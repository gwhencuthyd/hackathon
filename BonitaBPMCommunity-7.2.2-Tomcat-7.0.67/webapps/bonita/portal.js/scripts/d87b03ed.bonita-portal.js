!function(){"use strict";angular.module("org.bonitasoft.common.directives.bonitaHref",["org.bonitasoft.services.topurl"]).directive("bonitaHref",["manageTopUrl",function(a){return{restrict:"A",link:function(b,c,d){c.bind("click",function(){a.goTo(b.$eval(d.bonitaHref)||d.bonitaHref)})}}}])}(),function(){"use strict";angular.module("org.bonitasoft.common.directives.bonitags",[]).directive("bonitags",["$timeout",function(a){return{scope:{tagsSuggestion:"=",tagsSelection:"="},restrict:"E",template:'<div class="bootstrap-tags"></div>',replace:!0,link:function(b,c,d){function e(){f&&f.readOnly&&f.renderReadOnly()}var f;a(function(){f=c.tags({readOnly:""===d.readOnly||"true"===d.readOnly,tagData:b.tagsSelection,suggestions:b.tagsSuggestion,tagClass:d.tagClass||"label-default",promptText:" ",readOnlyEmptyMessage:" "}),b.$watch("tagsSelection",e,!0)},0)}}}])}(),function(){"use strict";function a(a,b,c){a.error=c&&a.form[b.field].$dirty,a.errorMessage=a.errors[b.name]}function b(a,b,c){a.$parent.$watch(b.fullName,function(d){c(a,b,d)})}angular.module("org.bonitasoft.common.directives.bootstrap-form-control",[]).directive("bootstrapFormControl",["$log",function(c){return{restrict:"AE",transclude:!0,scope:{label:"@",form:"=",errors:"="},template:'<div class="form-group has-feedback"><label for="{{ id }}" class="control-label">{{ label }}<span ng-if="required" style="color:red"> *</span></label><span ng-show="error" class="glyphicon glyphicon-warning-sign form-control-feedback"></span><ng-transclude></ng-transclude><span class="help-block" ng-show="error">{{ errorMessage }}</span></div>',link:function(d,e){var f=e.find("input, textarea, select");d.id=f.attr("id"),d.required=f.attr("required");var g=f.attr("name");if(f.addClass("form-control"),d.$watch("error",function(){e.toggleClass("error has-error",!!d.error)}),angular.isUndefined(g))c.error(d.id+" doesn't specify a name attribute");else for(var h in d.errors)d.errors.hasOwnProperty(h)&&b(d,{field:g,name:h,fullName:d.form.$name+"."+g+"."+h},a)}}}])}(),function(){"use strict";angular.module("org.bonitasoft.common.directives",[])}(),function(){"use strict";angular.module("org.bonitasoft.common.table.resizable",[]).directive("resizableColumn",["$timeout",function(a){return{restrict:"A",scope:{resizableColumn:"=",resizeSelector:"@"},link:function(b,c){var d=function(){a(function(){var a=c.data("resizableColumns");a&&a.destroy(),c.resizableColumns({selector:b.resizeSelector||"tr th"})},0)};b.$watch("resizableColumn",d,!0)}}}])}(),function(){"use strict";angular.module("org.bonitasoft.common.directives.toggleButton",[]).directive("toggleButton",function(){return{restrict:"E",template:'<input type="checkbox">',scope:{enableToggle:"="},replace:!0,link:function(a,b,c){b.prop("checked","true"===c.initialState),b.bootstrapToggle({on:c.on||"on",off:c.off||"off",style:c.style||"bonita-toggle",height:c.height||"25px"}),a.enableToggle?b.bootstrapToggle("enable"):b.bootstrapToggle("disable"),b.change(a.$apply),a.$watch("enableToggle",function(a,c){a!==c&&(a?b.bootstrapToggle("enable"):b.bootstrapToggle("disable"))}),a.$watch(function(){return b.prop("checked")},function(c,d){d!==c&&a.$emit("button.toggle",{value:b.prop("checked")})})}}})}(),function(){"use strict";angular.module("org.bonitasoft.common.directives.urlified",["org.bonitasoft.common.filters.urlify"]).directive("urlified",["$filter",function(a){return{restrict:"A",require:"ngModel",link:function(b,c,d,e){b.doGetTextCursorPosition=function(a){var b=0;if(document.selection){a.focus();var c=document.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}else a.selectionStart||"0"===a.selectionStart||0===a.selectionStart?b=a.selectionStart:a.setSelectionRange&&(b=a.selectionStart);return b},b.doSetTextCursorPosition=function(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}},b.$watch(d.ngModel,function(){e.$setViewValue(a("urlify")(b.$eval(d.ngModel)));var f=b.doGetTextCursorPosition(c[0]);e.$render(),b.doSetTextCursorPosition(c[0],f)})}}}])}(),function(){"use strict";angular.module("org.bonitasoft.common.i18n.factories",["gettext","org.bonitasoft.services.i18n"]).factory("i18nMsg",["i18nService","gettext","gettextCatalog",function(a,b,c){var d={};return d.field={mandatory:c.getString(b("This field is mandatory")),duplicateUrl:c.getString(b("This URL is already in use")),duplicateName:c.getString(b("This name is already in use")),reservedToken:a.getKey("application.edit.reservedTokenError")},d}])}(),function(){"use strict";angular.module("org.bonitasoft.common.filters.date.parser",["gettext"]).service("dateParser",["gettextCatalog","$filter",function(a,b){var c={},d=a.getString("MM/dd/yyyy h:mm a");return c.parseAndFormat=function(a){return b("date")(a.replace(/ /,"T"),d)},c}])}(),function(){"use strict";angular.module("org.bonitasoft.common.i18n.filters",["gettext"]).filter("dateI18n",["$window","gettextCatalog",function(a,b){return function(c,d){if(!c)return"";if(!d)throw new Error("[com.bonitasoft.common.i18n.filters@dateI18nFilter] You cannot use the date filter without a format");if(!a.moment)throw new Error("[com.bonitasoft.common.i18n.filters@dateI18nFilter] We need moment.js to translate our dates");return a.moment.locale(b.currentLanguage||b.baseLanguage),a.moment(+c).format(d)}}]).filter("dateAgo",["$window","gettextCatalog",function(a,b){return function(c){if(!a.moment)throw new Error("[com.bonitasoft.common.i18n.filters@dateAgoFilter] We need moment.js to translate our dates");a.moment.locale(b.currentLanguage||b.baseLanguage);var d=new Date(+c||Date.now());return a.moment(d).fromNow()}}])}(),function(){"use strict";angular.module("org.bonitasoft.common.filters.stringTemplater",[]).filter("stringTemplater",function(){return function(a,b){var c=/\{\}/;return a&&b&&"string"==typeof a?b instanceof Array?b.reduce(function(a,b){return a.replace(c,b)},a).replace(/\{\}/g,""):a.replace(c,b).replace(/\{\}/g,""):a}})}(),function(){"use strict";angular.module("org.bonitasoft.common.filters.urlify",[]).filter("urlify",function(){return function(a){return a?a.replace(" ","-").replace(/[^a-zA-Z0-9-_\\.~]/g,""):a}})}(),function(){"use strict";angular.module("org.bonitasoft.common.utils.filters",[]).filter("ucfirst",function(){return function(a){return a=a||"",a.charAt().toUpperCase()+a.slice(1)}})}(),function(){"use strict";angular.module("org.bonitasoft.common.properties",[]).value("growlOptions",{ttl:3e3,disableCountDown:!0,disableIcons:!0})}(),function(){"use strict";function a(a){return a.hasOwnProperty("id")&&delete a.id,a}function b(a){if(null===a)return{};var b=a.split("/"),c=b[0].split("-");return{total:parseInt(b[1],10),index:parseInt(c[0],10),currentPage:parseInt(c[0],10)+1,numberPerPage:parseInt(c[1],10)}}var c="../API/",d={response:function(a){return a.resource.pagination=b(a.headers("Content-Range")),a}},e=["$delegate","$http",function(b,c){return function(e,f,g,h){return g=angular.extend({},g,{search:angular.extend({isArray:!0,interceptor:d},g&&g.search),update:angular.extend({method:"PUT",transformRequest:[a].concat(c.defaults.transformRequest)},g&&g.update)}),b(e,f,g,h)}}],f=angular.module("org.bonitasoft.common.resources",["ngResource"]).constant("API_PATH",c).config(["$provide","$httpProvider",function(a,b){b.interceptors.push("unauthorizedResponseHandler"),a.decorator("$resource",e)}]).factory("unauthorizedResponseHandler",["$q","$window",function(a,b){return{responseError:function(c){return 401!==c.status||/\/API\/platform\/license/.test(c.config.url)||b.parent.location.reload(),a.reject(c)}}}]);!function(a){angular.forEach(a,function(a,b){f.factory(b,["$resource",function(b){return b(c+a+"/:id",{id:"@id"})}])})}({actorAPI:"bpm/actor",actorMemberAPI:"bpm/actorMember",archivedCaseAPI:"bpm/archivedCase",applicationAPI:"living/application",applicationMenuAPI:"living/application-menu",applicationPageAPI:"living/application-page",caseAPI:"bpm/case",commentAPI:"bpm/comment",categoryAPI:"bpm/category",customPageAPI:"portal/page",featureAPI:"system/feature",flowNodeAPI:"bpm/flowNode",archivedFlowNodeAPI:"bpm/archivedFlowNode",formMappingAPI:"form/mapping",groupAPI:"identity/group",archivedHumanTaskAPI:"bpm/archivedHumanTask",humanTaskAPI:"bpm/humanTask",i18nAPI:"system/i18ntranslation",membershipAPI:"identity/membership",personalDataAPI:"identity/personalcontactdata",processAPI:"bpm/process",processSupervisorAPI:"bpm/processSupervisor",processResolutionProblemAPI:"bpm/processResolutionProblem",professionalDataAPI:"identity/professionalcontactdata",profileAPI:"portal/profile",roleAPI:"identity/role",userAPI:"identity/user",sessionAPI:"system/session"}),f.factory("userTaskAPI",["$http",function(a){var b={};return b.execute=function(b,d){return a({url:c+"bpm/userTask/"+b+"/execution",method:"POST",data:d})},b}]),f.factory("importApplication",["$resource",function(a){return a("../services/application/import",{importPolicy:"@importPolicy",applicationsDataUpload:"@applicationsDataUpload"})}]),f.factory("processCategoryAPI",["$http",function(a){var b={};return b.save=function(b){return a({url:c+"bpm/processCategory",method:"POST",data:{category_id:""+b.category_id,process_id:""+b.process_id}})},b["delete"]=function(b){return a({url:c+"bpm/processCategory",method:"DELETE",data:[b.process_id+"/"+b.category_id]})},b}]),f.factory("processConnectorAPI",["$http","$resource",function(a,b){return b(c+"bpm/processConnector/:process_id/:definition_id/:definition_version",{process_id:"@process_id",definition_id:"@definition_id",definition_version:"@definition_version"},{search:{isArray:!0,url:c+"bpm/processConnector/",interceptor:d},update:{transformRequest:function(a){return delete a.process_id,delete a.definition_id,delete a.definition_version,angular.toJson(a)},method:"PUT"}})}]),f.factory("parameterAPI",["$http","$resource",function(a,b){return b(c+"bpm/processParameter/:process_id/:name",{process_id:"@process_id",name:"@name"},{search:{isArray:!0,url:c+"bpm/processParameter/",interceptor:d},update:{transformRequest:function(a){return delete a.process_id,delete a.name,angular.toJson(a)},method:"PUT"}})}])}(),function(){"use strict";function a(a){this.$q=a}a.prototype.load=function(a,b){function c(c){return 0===c.resource.pagination.total?(angular.copy([],e.data),void f.resolve(e.data)):void(e.data=a.search({p:0,c:c.resource.pagination.total,d:b.d,n:b.n,f:b.f,o:b.o},function(a){angular.copy(a.data,e.data),f.resolve(e.data)},function(a){f.reject(a)}))}function d(){return a.search({p:0,c:0,f:b.f}).$promise}var e={data:[]},f=this.$q.defer();return this.resource=a,b=b||{},d().then(c),f.promise},angular.module("org.bonitasoft.common.resources.store",["org.bonitasoft.common.resources"]).service("store",["$q",a])}(),function(){"use strict";function a(a){b=[],[].push.apply(b,a&&a.map(function(a){return a.name}))}var b=[];angular.module("org.bonitasoft.service.features",["org.bonitasoft.common.resources.store"]).constant("FEATURES",{searchIndexes:"SEARCH_INDEX"}).service("FeatureManagerResolver",["FeatureManager","featureAPI",function(b,c){return function(){return c.query({p:0,c:0}).$promise.then(a)}()}]).service("FeatureManager",["FEATURES",function(a){var c={};return c.isFeatureAvailable=function(a){return b.indexOf(a)>-1},c.isSearchIndexedFeatureActivated=function(){return b.indexOf(a.searchIndexes)>-1},c}])}(),function(){"use strict";angular.module("org.bonitasoft.services.i18n",["ngCookies","gettext","org.bonitasoft.common.resources"]).value("I18N_KEYS",{}).service("i18nService",["gettextCatalog","$cookies","i18nAPI","I18N_KEYS",function(a,b,c,d){function e(a){for(var b={},c=0;c<a.length;c++)b[a[c].key]=a[c].value;return b}function f(c){a.currentLanguage=b.get("BOS_Locale"),a.baseLanguage=null,a.setStrings(b.get("BOS_Locale"),e(c))}var g={};return a.debug=!1,g.getKey=function(b,c){return a.getString(d[b]||b,c)},g.translationsLoadPromise=function(){return c.query({f:"locale="+(b.get("BOS_Locale")||"en")}).$promise.then(f)}(),g}]).run(["I18N_KEYS","gettext",function(a,b){a["caselist.casesStates.active.title"]=b("Open cases"),a["caselist.casesStates.archived.title"]=b("Archived cases"),a["caselist.delete.single"]=b("1 case has been deleted"),a["caselist.delete.multiple"]=b("{{nbOfDeletedCases}} cases have been deleted"),a["processDetails.informations.category.update.error"]=b("An error occured during categories update"),a["processDetails.informations.category.update.sucess"]=b("Successfully updated categories"),a["processDetails.actors.update.success"]=b("{{nbSucess}} actor mapping updates succeeded"),a["processDetails.actors.update.error"]=b("{{nbErrors}} errors on mapping updates"),a["multiSelect.selectAll"]=b("Select all"),a["multiSelect.selectNone"]=b("Select none"),a["multiSelect.reset"]=b("Reset"),a["multiSelect.search.helper"]=b("Type here to search..."),a["processDetails.actors.users.label"]=b("Users"),a["processDetails.actors.users.mapping"]=b("Users mapped to {}"),a["processDetails.actors.users.selectHelper"]=b("Select users..."),a["processDetails.actors.groups.label"]=b("Groups"),a["processDetails.actors.groups.mapping"]=b("Groups"),a["processDetails.actors.groups.selectHelper"]=b("Select groups..."),a["processDetails.actors.roles.label"]=b("Roles"),a["processDetails.actors.roles.mapping"]=b("Roles"),a["processDetails.actors.roles.selectHelper"]=b("Select roles..."),a["processDetails.actors.memberships.label"]=b("Memberships"),a["processDetails.actors.memberships.mapping"]=b("Memberships mapped to {}"),a["processDetails.actors.memberships.selectGroupHelper"]=b("Select a group..."),a["processDetails.actors.memberships.selectRoleHelper"]=b("Select a role..."),a["processDetails.actors.memberships.item.label"]=b("{{role}} of {{group}}"),a["processDetails.actors.memberships.create.success"]=b("{{role}} of {{group}} has been created"),a["processDetails.pm.mapping.update.error"]=b("{{nbMapping}} Process manager mappings could not be updated"),a["processDetails.pm.mapping.update.success"]=b("{{nbMapping}} Process manager mappings have been updated"),a["processDetails.params.control.boolean"]=b("Error: value must be a boolean"),a["processDetails.params.control.double"]=b("Error: value must be a double"),a["processDetails.params.control.integer"]=b("Error: value must be an integer"),a["processVisu.tooltip.error"]=b("To use this feature, create a new version of the process in Bonita BPM Studio version 6.4 and above, then create and install the new .bar file in the Portal."),a["processVisu.key.cancelled"]=b("Cancelled, skipped instances"),a["processVisu.key.completed"]=b("Completed instances"),a["processVisu.key.failed"]=b("Failed instances"),a["processVisu.key.ongoing"]=b("Executing, completing, initializing instances"),a["processVisu.key.pending"]=b("Ready, waiting instances"),a["processVisu.case.title"]=b("Case id: {{caseId}} - Process: {{processName}} ({{processVersion}})"),a["processVisu.drawing.error"]=b("Error on drawing process!"),a["processVisu.drawing.inprogress"]=b("Drawing process..."),a["monitoring.processList.empty"]=b("No data"),a["monitoring.processList.error"]=b("Error!"),a["monitoring.processVisu.loading"]=b("Loading..."),a["monitoring.processList.http.error"]=b("Technical error."),a["processDetails.connector.upload.error"]=b("Cannot upload the file"),a["processDetails.startFor.user.helper"]=b("Type here to search for a user..."),a["processDetails.startFor.label"]=b("Enter the user to start the case for..."),a["processDetails.forms.add.error"]=b("Can't import page or form to the process"),a["processDetails.forms.mapping.empty"]=b("No Mapping"),a["processDetails.forms.mapping.edit.empty"]=b("Form cannot be empty"),a["processDetails.forms.upload.error.filename.length"]=b("Filename too long. The zip filename must be no longer than 50 characters"),a["processDetails.forms.upload.error.file.structure"]=b("Zip file structure error. Check that your .zip contains a well-formed page.properties and either the index.html or the Index.groovy file. For details, see the documentation or the example page readme (available in the custom page list)"),a["processDetails.forms.upload.error.name.already.exists"]=b("A page with this name already exists."),a["processDetails.forms.upload.error.filename.invalid"]=b("The name for the URL must start with custompage_ followed only by alphanumeric characters."),a["processDetails.forms.upload.error.compilation"]=b("Compilation failure. Verify that the Index.groovy class implements the PageController interface."),a["processDetails.problemResolution.message.actor"]=b("Actors must be resolved before enabling the Process."),a["processDetails.problemResolution.message.connector"]=b("Connectors must be resolved before enabling the Process."),a["processDetails.problemResolution.message.parameter"]=b("Parameters must be resolved before enabling the Process."),a["processDetails.problemResolution.message.businessData"]=b("The business data: [ {} ] uses Business Objects which are not defined in the current Business Data model. Deploy a compatible Business Data model before enabling the process."),a["processDetails.problemResolution.message.formMapping"]=b("The following form mappings are not resolved: [ {} ]. They must be resolved before enabling the Process."),a["processDetails.problemResolution.title"]=b("The Process cannot be enabled"),a["processDetails.problemResolution.resource.caseOverview"]=b("Case overview"),a["processDetails.problemResolution.resource.caseStart"]=b("Case start"),a["processDetails.scripts.update.success"]=b("Expression content has been updated"),a["processDetails.scripts.update.error"]=b("Can't update expression content"),a["application.edit.reservedTokenError"]=b("The words 'content', 'API' and 'theme' are reserved for internal use. They must not be used in an application or page URL."),a["processDetails.start.success"]=b("The case {{caseId}} has been started successfully."),a["processDetails.start.error"]=b("Error while trying to start the case. Some required information is missing (contract not fulfilled).")}])}(),function(){"use strict";angular.module("org.bonitasoft.service.process.resolution",["org.bonitasoft.services.i18n"]).value("ProcessResolutionProblemItems",{actor:"processDetails.problemResolution.message.actor",connector:"processDetails.problemResolution.message.connector",parameter:"processDetails.problemResolution.message.parameter","business data":"processDetails.problemResolution.message.businessData","form mapping":"processDetails.problemResolution.message.formMapping"}).service("ProcessProblemResolutionService",["i18nService","ProcessResolutionProblemItems",function(a,b){var c={};return c.title=a.getKey("processDetails.problemResolution.title"),c.buildProblemsList=function(c){var d=[];return _.isArray(c)?(angular.forEach(b,function(b,e){function f(b){return"PROCESS_OVERVIEW"===b?a.getKey("processDetails.problemResolution.resource.caseOverview"):"PROCESS_START"===b?a.getKey("processDetails.problemResolution.resource.caseStart"):b}var g=c.filter(function(a){return a.type===e});if(g.length){var h={type:e,message:a.getKey(b)},i=_.chain(g).pluck("ressource_id").compact().map(f).value();_.isArray(i)&&_.size(i)>0&&(h.args=_.size(i)>2?_.take(i,2).join(", ")+",...":i.join(", ")),d.push(h)}}),d):d},c}])}(),function(){"use strict";angular.module("org.bonitasoft.service.token",[]).service("TokenExtensionService",function(){var a={value:"admin"},b={get tokenExtensionValue(){return a.value},set tokenExtensionValue(b){a.value=b}};return b})}(),function(){"use strict";function a(a){return{from:function(b){b=b||"";var c=b.match(a);return c&&c[1]||void 0}}}angular.module("org.bonitasoft.services.navigation",[]).factory("topLocation",["$window",function(b){return Object.create({},{_pf:{get:function(){return a(/_pf=([1-9]*)/).from(b.parent.location.hash)}},tenant:{get:function(){return a(/tenant=([1-9]*)/).from(b.parent.location.search)}}})}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin",["org.bonitasoft.features.admin.cases","org.bonitasoft.features.admin.processes","org.bonitasoft.features.admin.applications.list","org.bonitasoft.features.admin.applications.details","org.bonitasoft.common.utils.filters"])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.applications.list",["ui.bootstrap","angularFileUpload","org.bonitasoft.common.directives.bonitaHref","org.bonitasoft.common.resources","org.bonitasoft.common.resources.store","org.bonitasoft.features.admin.applications.edit","org.bonitasoft.features.admin.applications.delete","org.bonitasoft.common.i18n.filters","ui.router","org.bonitasoft.services.topurl","org.bonitasoft.bonitable","org.bonitasoft.templates"]).config(["$stateProvider",function(a){a.state("bonita.applications",{url:"/admin/applications",templateUrl:"features/admin/applications/applications-list.html",controller:"applicationsListCtrl",controllerAs:"applicationsListCtrl",resolve:{templatingAppLoader:["templateAppDetailLoader",function(a){return a.load()}]}})}]).controller("applicationsListCtrl",["$scope","applicationAPI","$modal","store","templateAppDetailLoader","manageTopUrl",function(a,b,c,d,e,f){function g(){d.load(b,{d:["profileId","createdBy","updatedBy","layoutId"]}).then(function(b){a.applications=b,a.noData=!b.length})}var h=this;h.modalCreate=null,h.modalDelete=null,h.modalImport=null,h.modalExport=null,g(),a.sortableOptions={property:"lastUpdateDate",direction:!0},this.create=function(a){h.modalCreate=c.open({templateUrl:"features/admin/applications/edit-application.html",controller:"addApplicationCtrl",controllerAs:"addApplicationCtrl",size:a,resolve:{application:angular.noop}}),h.modalCreate.result.then(g)},this.importApp=function(){h.modalImport=c.open({templateUrl:"features/admin/applications/import-application.html",controller:"importApplicationCtrl",controllerAs:"importApplicationCtrl",resolve:{application:angular.noop}}),h.modalImport.result.then(g)},this.exportApplication=function(a){h.modalExport=c.open({templateUrl:"features/admin/applications/export-application.html",controller:"exportApplicationCtrl",controllerAs:"exportApplicationCtrl",size:"md",resolve:{application:function(){return a}}}),h.modalExport.result.then(g)},this.goToDetails=function(a){f.addOrReplaceParam("_id",a)},this.loadTemplatePopover=e.compile,this.deleteApplication=function(a,b){h.modalDelete=c.open({templateUrl:"features/admin/applications/delete-application.html",controller:"deleteApplicationCtrl",controllerAs:"deleteApplicationCtrl",size:b,resolve:{application:function(){return a}}}),h.modalDelete.result.then(g)}}]).controller("exportApplicationCtrl",["$scope","$modalInstance","application",function(a,b,c){a.application=c,this.cancel=function(){b.dismiss("cancel")}}]).controller("importApplicationCtrl",["$scope","$modalInstance","FileUploader","importApplication","$log",function(a,b,c,d,e){function f(b){a.importIsSuccessfull=!0,a.totalImportedApps=b.imported.length,a.imports=b.imported,a.errorsApi=b.errors,e.debug("[importApplicationCtrl@successUpload] Import a new app")}function g(b){a.importNotSuccessfull=!0,a.messageError=b.data.message}var h=this;h.successUpload=function(b,c){b=b||{file:{}},a.isUploadSuccess=!0,a.fileName=b.file.name,a.filePath=c||""},h.errorUpload=function(){throw new Error("Cannot upload the file")},a.uploader=new c({autoUpload:!0,url:"../portal/applicationsUpload",onSuccessItem:h.successUpload,onErrorItem:h.errorUpload}),this.importApp=function(){d.save({importPolicy:"FAIL_ON_DUPLICATES",applicationsDataUpload:a.filePath.replace("<pre>","").replace("</pre>","")}).$promise.then(f,g)},this.cancel=function(){b.dismiss("cancel")},this.closeModalSuccess=function(){b.close()}}]).service("templateAppDetailLoader",["$interpolate","$templateCache","$http","$q",function(a,b,c,d){var e=this;this.compile=angular.noop,this.load=function(f){return f=f||angular.noop,d.all([c.get("features/admin/applications/details/popverunsafe.html"),c.get("features/admin/applications/details/application-details-app.html")]).then(function(c){b.put("template/popover/popover.html",c[0].data),b.put("features/admin/applications/details/application-details-app.html",c[1].data),e.compile=a(c[1].data),f(c[0].data)})}}]).directive("exportAppButton",function(){return{restrict:"E",replace:!0,transclude:!0,scope:{url:"@",appId:"@",title:"@"},template:'<a class="btn-export" ng-href="{{url || \'../portal/exportApplications?id=\'}}{{appId}}" ng-transclude></a>'}})}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.applications.delete",["ui.bootstrap","org.bonitasoft.common.resources"]).controller("deleteApplicationCtrl",["$scope","applicationAPI","$modalInstance","application",function(a,b,c,d){a.application=d,a.confirmDelete=function(){b["delete"]({id:a.application.id}).$promise.then(function(){c.close()})},a.cancel=function(){c.dismiss("cancel")}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.applications.details",["ui.bootstrap","org.bonitasoft.common.resources","ui.router","org.bonitasoft.common.directives.bootstrap-form-control","org.bonitasoft.features.admin.applications.details.page-list","org.bonitasoft.common.i18n.filters","ui.tree","org.bonitasoft.service.features","xeditable"]).config(["$stateProvider",function(a){a.state("bonita.applicationsDetails",{url:"/admin/applications/:id",templateUrl:"features/admin/applications/details/application-details.html",controller:"applicationDetailsCtrl",controllerAs:"applicationDetailsCtrl"})}]).controller("applicationDetailsCtrl",["$rootScope","$scope","$modal","applicationAPI","$stateParams","FeatureManager","store","customPageAPI",function(a,b,c,d,e,f,g,h){var i=this;i.modal=null,i.isEditLayoutAvailable=f.isFeatureAvailable("APPLICATION_LOOK_N_FEEL"),g.load(h,{f:"contentType=layout"}).then(function(a){b.layoutPages=a}),g.load(h,{f:"contentType=theme"}).then(function(a){b.themePages=a}),i.reload=function(){b.app=d.get({id:e.id,d:["createdBy","updatedBy","profileId","layoutId","themeId"]})},i.reload(),i.update=function(a,b){var d=c.open({templateUrl:"features/admin/applications/edit-application.html",controller:"addApplicationCtrl",size:a,resolve:{application:function(){return b}}});d.result.then(function(){i.reload()})},i.updateLayout=function(a,b){var c={};return c.id=a.id,c.layoutId=b.id,d.update(c).$promise.then(i.reload,i.handleErrors)},i.updateTheme=function(a,b){var c={};return c.id=a.id,c.themeId=b.id,d.update(c).$promise.then(i.reload,i.handleErrors)},i.handleErrors=function(a){return a.data.message}}]).directive("backButton",function(){return{restrict:"E",template:'<button ng-click="goBack()" class="btn btn-default" translate>back</button>',controller:["$scope","$window","manageTopUrl",function(a,b){a.goBack=function(){b.history.back()}}]}})}(),angular.module("org.bonitasoft.features.admin.applications.details").controller("actionBarCtrl",["$scope","$modal","menuFactory",function(a,b,c){"use strict";var d=this;d.modal=null,this.removeItem=function(a,b){a.$parent.$parent.remove(),console.debug("[actionBarCtrl@removeItem] delete a menuItem "+b.id,b),c.remove(b.id)},this.addItem=function(a,e){d.modal=b.open({templateUrl:"features/admin/applications/details/menubuilder-addCustomMenuModal.html",controller:"addCustomMenuCtrl",controllerAs:"addCustomMenuCtrl",size:"sm",resolve:{AppID:function(){return+e.applicationId},customDataModal:function(){return{isAddition:!0,data:e}}}}),d.modal.result.then(function(a){var b={displayName:a.name,applicationId:+e.applicationId,applicationPageId:"id"in a.page?+a.page.id:"-1",parentMenuId:e.id};c.create(b).then(function(a){console.debug("[actionBarCtrl@addItem] Add a new child",a.item),e.children=e.children||[],e.children.push(a.item.toJSON())})})},this.editItem=function(a,e){d.modal=b.open({templateUrl:"features/admin/applications/details/menubuilder-addCustomMenuModal.html",controller:"addCustomMenuCtrl",controllerAs:"addCustomMenuCtrl",size:"sm",resolve:{AppID:function(){return+e.applicationId},customDataModal:function(){return{isEditionParentMenu:"-1"===e.parentMenuId,isEdition:!0,data:e}}}}),d.modal.result.then(function(a){e.displayName=a.name,e.applicationPageId="id"in a.page?+a.page.id:"-1",c.update(angular.copy(e))})}}]),angular.module("org.bonitasoft.features.admin.applications.details").controller("addCustomMenuCtrl",["$scope","$modalInstance","store","menuUtils","applicationPageAPI","AppID","customDataModal","i18nMsg",function(a,b,c,d,e,f,g,h){"use strict";a.isLabelOnly="inactive",a.i18n=h.field,c.load(e,{d:["pageId"],f:"applicationId="+f}).then(function(b){a.pages=b}),g&&(a.isAddition=!!g.isAddition,a.isEdition=!!g.isEdition,a.isEditionParentMenu=g.isEditionParentMenu,g.data&&g.data.displayName&&(a.menu={model:{name:a.isEdition?g.data.displayName:"",page:a.isEdition?{id:g.data.applicationPageId}:""},parent:a.isEdition?null:g.data},a.isEdition&&"-1"!==g.data.applicationPageId&&g.data.applicationPageId?a.currentSelectedPageId=g.data.applicationPageId:a.currentSelectedPageId=0,!g.isEditionParentMenu||"-1"!==g.data.applicationPageId&&g.data.applicationPageId||(a.isLabelOnly="active"))),this.cancel=function(){b.dismiss("cancel")},this.saveModal=function(c){var e=c.model.page?c.model.page.id||c.model.page:0;b.close({name:c.model.name,page:d.findItemPerId(e,a.pages),raw:c.model})}}]),angular.module("org.bonitasoft.features.admin.applications.details").controller("menuCreatorCtrl",["$rootScope","$scope","$modal","menuFactory",function(a,b,c,d){"use strict";function e(){d.get(+b.application.id).then(function(a){console.debug("[menuCreatorCtrl@successCb] load data from the API",a),b.data.menuItemBuilder=a},function(a){console.error("[menuCreatorCtrl@errorCb] "+a.message)})}var f=this;this.modal=null,b.isLabelOnly=!0,b.data={currentMenu:null,menuItem:[],menuItemBuilder:[]},this.loadMenu=e,a.$on("page-list:update",function(){f.loadMenu()}),e(),a.$on("page-list:pagesexist",function(a,c){b.hasPages=c}),this.add=function(){f.modal=c.open({templateUrl:"features/admin/applications/details/menubuilder-addCustomMenuModal.html",controller:"addCustomMenuCtrl",controllerAs:"addCustomMenuCtrl",size:"sm",resolve:{AppID:function(){return+b.application.id},customDataModal:function(){return{isEditionParentMenu:!0}}}}),f.modal.result.then(function(a){var c={displayName:a.name,applicationId:+b.application.id,applicationPageId:"id"in a.page?+a.page.id:"-1"};"id"in a.page||(c.children=[]),d.create(c).then(function(a){b.data.menuItemBuilder.push(a.formatted)})})}}]),angular.module("org.bonitasoft.features.admin.applications.details").controller("menuListCtrl",["$scope","menuFactory","menuConvertor","menuUtils",function(a,b,c,d){"use strict";a.treeOptions={accept:function(a,b){var c=b.$element;return"-1"!==a.$modelValue.applicationPageId||!c.hasClass("menucontainer-submenu")&&!c.hasClass("menucontainer-submenu-exist")},dragStop:function(e){var f=e.source.nodeScope.subItem||e.source.nodeScope.menu,g=c.buildIndex(angular.copy(a.model));b.update(d.findItemPerId(f.id,g)).then(function(b){a.model=b})}}}]),angular.module("org.bonitasoft.features.admin.applications.details").directive("actionBar",function(){"use strict";return{restrict:"AE",transclude:!0,scope:{edit:"@",remove:"@",add:"@",collapsed:"=",menu:"=",data:"="},templateUrl:"features/admin/applications/details/menubuilder-actionBar.html",controller:"actionBarCtrl",controllerAs:"actionBarCtrl"}}),angular.module("org.bonitasoft.features.admin.applications.details").directive("menuCreator",function(){"use strict";return{restrict:"AE",scope:{application:"=app"},templateUrl:"features/admin/applications/details/menubuilder-menuCreator.html",controller:"menuCreatorCtrl",controllerAs:"menuCreatorCtrl"}}),angular.module("org.bonitasoft.features.admin.applications.details").directive("menuList",function(){"use strict";return{restrict:"AE",scope:{model:"=ngModel"},templateUrl:"features/admin/applications/details/menubuilder-menuList.html",
controller:"menuListCtrl"}}),angular.module("org.bonitasoft.features.admin.applications.details").factory("menuConvertor",["menuUtils",function(a){"use strict";function b(b){var c,d=[];return b.forEach(function(e){e.applicationPageId&&"-1"!==e.applicationPageId||(e.children=e.children||[]),-1!==+e.parentMenuId&&(c=a.findItemPerId(e.parentMenuId,b),c.id&&(c.children=c.children||[],c.children.push(e),e=null)),e&&d.push(e)}),d}function c(b){var c,d=[],e=0;return b.forEach(function(b){b.menuIndex=++e,c=angular.copy(b),c.children&&c.children.length||(c.parentMenuId="-1"),delete c.children,d.push(c),d=a.bindChildren(b,d)}),d}function d(a,b){return a.menuIndex=a.menuIndex||b||1,a.parentMenuId=a.parentMenuId||"-1",!a.children&&("-1"===a.parentMenuId||a.parentMenuId<=0)&&(a.parentMenuId="-1"),a.children&&(a.parentMenuId="-1",delete a.children),a}return{toApi:d,fromApi:b,buildIndex:c}}]),angular.module("org.bonitasoft.features.admin.applications.details").factory("menuUtils",function(){"use strict";function a(a,b){return a.children=a.children||[],a.children.forEach(function(b,c){b.parentMenuId=a.id,b.menuIndex=c+1,delete b.children}),b.concat(a.children)}function b(a,b){return b.filter(function(b){return+b.id===+a})[0]||{}}return{bindChildren:a,findItemPerId:b}}),angular.module("org.bonitasoft.features.admin.applications.details").service("menuFactory",["$rootScope","$q","menuConvertor","applicationMenuAPI","menuUtils","store",function(a,b,c,d,e,f){"use strict";function g(){}var h={};return h.get=function(a){var e=b.defer();return f.load(d,{f:"applicationId="+a,o:"menuIndex ASC"}).then(function(a){e.resolve(c.fromApi(a))},function(){e.reject(new Error("Cannot find any data for the menu"))}),e.promise},h.update=function(a){a=c.toApi(a);var e=b.defer();return d.update({id:a.id},a).$promise.then(function(b){g(),console.debug("[menuFactory@update] Update success",b),h.get(a.applicationId).then(function(a){e.resolve(a)})},e.reject),e.promise},h.create=function(a){a=c.toApi(a);var e=b.defer();return d.save(a).$promise.then(function(b){g(),console.debug("[menuFactory@create] record success",b),h.get(a.applicationId).then(function(a){var c=b.toJSON();"-1"!==c.parentMenuId||c.applicationPageId||(c.children=[]),e.resolve({formatted:c,item:b,col:a})})},e.reject),e.promise},h.remove=function(a){return g(),d.remove({id:a})},h}]),function(){"use strict";angular.module("org.bonitasoft.features.admin.applications.details.page-list",["ui.bootstrap","org.bonitasoft.common.directives.bootstrap-form-control","org.bonitasoft.features.admin.applications.edit","org.bonitasoft.common.directives.urlified","org.bonitasoft.common.resources","org.bonitasoft.common.i18n.factories"]).controller("addPageCtrl",["$scope","customPageAPI","applicationPageAPI","applicationMenuAPI","$modalInstance","application","i18nMsg","store",function(a,b,c,d,e,f,g,h){function i(b){500===b.status&&b.data.cause.exception.indexOf("AlreadyExistsException")>-1?a.page.form.token.$duplicate=!0:a.alerts.push({type:"danger",msg:b.data.message||"Something went wrong during the creation. You might want to cancel and try again."})}function j(){e.close()}a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},a.i18n=g.field,a.application=f,h.load(b,{f:"contentType=page"}).then(function(b){a.customPages=b}),a.add=function(b){var d=b.model.token.toLowerCase();a.page.form.token.$reservedToken=!1,"api"===d||"content"===d||"theme"===d?a.page.form.token.$reservedToken=!0:(b.model.applicationId=a.application.id,c.save(b.model).$promise.then(j,i))},a.cancel=function(){e.dismiss("cancel")}}]).controller("pageListCtrl",["$scope","pageModel","$modal",function(a,b,c){var d=this;d.modal=null,a.pages=[],d.loadPages=function(c){b.load(a.application.id,!0===c).then(function(b){a.pages=b})},d.loadPages(!0),d.add=function(){d.modal=c.open({templateUrl:"features/admin/applications/details/page-list-addPageModal.html",controller:"addPageCtrl",size:"lg",resolve:{application:function(){return a.application}}}),d.modal.result.then(d.loadPages)},d.remove=function(a){b.remove(a).then(d.loadPages)},d.setAsHomePage=function(c){b.setHome(c,a.application).then(function(){d.loadPages(),a.application.homePageId=c.id})}}]).factory("pageModel",["$rootScope","$q","store","applicationPageAPI","applicationAPI",function(a,b,c,d,e){var f={};return f.exist=function(b){return!f.loadedPagesEventTriggered&&b.length?(a.$emit("page-list:pagesexist",!0),console.debug("[pageModel@exist] Trigger page-list:pagesexist",!0),f.loadedPagesEventTriggered=!0,f.loadedPagesEventTriggered):(b.length||(console.debug("[pageModel@exist] Trigger page-list:pagesexist",!1),a.$emit("page-list:pagesexist",!1),f.loadedPagesEventTriggered=!1),f.loadedPagesEventTriggered)},f.loadedPagesEventTriggered=!1,f.load=function(a,e){e&&(f.loadedPagesEventTriggered=!1);var g=b.defer();return c.load(d,{d:["pageId"],f:"applicationId="+a}).then(function(a){console.debug("[pageModel@load] Fetch some pages from API",a),f.exist(a),g.resolve(a)}),g.promise},f.remove=function(c){var e=b.defer();return d["delete"](c).$promise.then(function(b){e.resolve(b),a.$emit("page-list:update")}),e.promise},f.setHome=function(a,c){var d=b.defer(),f={homePageId:a.id,profileId:c.profileId.id,layoutId:c.layoutId.id,themeId:c.themeId.id,createdBy:c.createdBy.id,updatedBy:c.updatedBy.id};return e.update({id:c.id},angular.extend({},c,f)).$promise.then(function(){console.debug("[pageModel@setHome] Set the page:"+a.pageId.displayName+" as the Home Page"),d.resolve(a)},d.reject),d.promise},f}]).directive("pageList",function(){return{restrict:"E",templateUrl:"features/admin/applications/details/page-list.html",controller:"pageListCtrl",controllerAs:"list",scope:{application:"="}}})}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.applications.edit",["ui.bootstrap","org.bonitasoft.common.directives.bootstrap-form-control","org.bonitasoft.common.directives.urlified","org.bonitasoft.common.resources","org.bonitasoft.common.resources.store","org.bonitasoft.common.i18n.factories"]).controller("addApplicationCtrl",["$scope","applicationAPI","profileAPI","customPageAPI","$modalInstance","application","store","i18nMsg",function(a,b,c,d,e,f,g,h){function i(b){404===b.status?a.alerts.push({type:"danger",msg:'The custom page "home" or "defaultlayout" doesn\'t seems installed properly. Go to Configuration > Custom Pages to install it.'}):500===b.status&&b.data.cause.exception.indexOf("AlreadyExistsException")>-1?a.application.form.token.$duplicate=!0:a.alerts.push({type:"danger",msg:b.data.message||"Something went wrong during the creation. You might want to cancel and try again."})}function j(){e.close()}a.i18n=h.field,a.editionMode=!!f,a.editionMode?(a.application={model:angular.copy(f)},a.application.model.profileId=f.profileId&&f.profileId.id||f.profileId,a.application.model.layoutId=f.layoutId&&f.layoutId.id||f.layoutId,a.application.model.themeId=f.themeId&&f.themeId.id||f.themeId):a.application={model:{version:"1.0",profileId:"1"}},g.load(c).then(function(b){a.profiles=b}),a.alerts=[],a.closeAlert=function(b){a.alerts.splice(b,1)},a.cancel=function(){e.dismiss("cancel")},a.submit=function(c){var d=c.model.token.toLowerCase();if(a.application.form.token.$reservedToken=!1,"api"===d||"content"===d||"theme"===d)a.application.form.token.$reservedToken=!0;else{var e=angular.copy(c.model);b[a.editionMode?"update":"save"](e).$promise.then(j,i)}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.cases",["org.bonitasoft.features.admin.cases.list"])}(),function(){"use strict";function a(a,b,c,d,e){var f=this;f.confirmDeleteSelectedCases=function(c){a.$selectedItems&&b.open({templateUrl:"features/admin/cases/list/cases-list-deletion-modal.html",controller:"DeleteCaseModalCtrl",controllerAs:"deleteCaseModalCtrl",resolve:{typeOfCase:function(){return c||""},caseItems:function(){return a.$selectedItems}},size:"sm"}).result.then(f.deleteSelectedCases)},f.checkNoCasesSelected=function(){return!(a.$selectedItems&&a.$selectedItems.length>0)},f.deleteSelectedCases=function(){function b(){a.$emit("caselist:notify",{type:"success",status:1===h?d.getKey("caselist.delete.single",{nbOfDeletedCases:h}):d.getKey("caselist.delete.multiple",{nbOfDeletedCases:h})}),a.pagination.currentPage=1,a.$emit("caselist:search")}var f=a.$selectedItems;if(f){var g=f.map(function(a){return a.id});if(g&&g.length){var h=0;e.all(g.map(function(b){return c["delete"]({id:b}).$promise.then(function(){h++},function(b){a.$emit("caselist:http-error",b)})})).then(b)}}}}function b(a,b,c,d){a.caseItems=d,a.typeOfCase=c,this.ok=function(){b.close()},this.cancel=function(){b.dismiss("cancel")}}angular.module("org.bonitasoft.features.admin.cases.list.delete",["org.bonitasoft.common.resources","org.bonitasoft.services.i18n","ui.bootstrap"]).controller("ActiveCaseDeleteCtrl",["$scope","$modal","caseAPI","i18nService","$q",a]).directive("activeCaseDelete",function(){return{restrict:"E",require:"^ActiveCaseListCtrl",transclude:!0,controller:"ActiveCaseDeleteCtrl",template:'<button id="delete-button" type="button" class="btn btn-default" ng-click="deleteCtrl.confirmDeleteSelectedCases()" ng-disabled="deleteCtrl.checkNoCasesSelected()"><div ng-transclude></div></button>',controllerAs:"deleteCtrl"}}).controller("ArchivedCaseDeleteCtrl",["$scope","$modal","archivedCaseAPI","i18nService","$q",a]).directive("archivedCaseDelete",function(){return{restrict:"E",require:"^ArchivedCaseListCtrl",transclude:!0,template:'<button id="delete-archived-button" type="button" class="btn btn-default" ng-click="deleteCtrl.confirmDeleteSelectedCases(\'archived\')" ng-disabled="deleteCtrl.checkNoCasesSelected()"><div ng-transclude></div></button>',controller:"ArchivedCaseDeleteCtrl",controllerAs:"deleteCtrl"}}).controller("DeleteCaseModalCtrl",["$scope","$modalInstance","typeOfCase","caseItems",b])}(),function(){"use strict";function a(a,b,c,d,e,f){a.selectedFilters.selectedApp=d.appName,a.selectedFilters.selectedVersion=d.appVersion,a.selectedFilters.selectedStatus=d.caseStatus,a.defaultFilters=d,a.caseStatesValues=e,angular.isDefined(f.caseStateFilter)&&f.caseStateFilter&&angular.isDefined(a.caseStatesValues[f.caseStateFilter])&&(a.selectedFilters.selectedStatus=f.caseStateFilter),a.caseStatesValues[d.caseStatus]=d.caseStatus,a.apps=[],a.versions=[],a.appNames=[],a.allCasesSelected=!1,a.selectedFilters.currentSearch="";var g=this,h=[];a.supervisorId&&h.push("supervisor_id="+a.supervisorId),g.initFilters=function(b){a.apps=b;var c=b.map(function(b){return a.selectedFilters.processId&&a.selectedFilters.processId===b.id&&(a.selectedFilters.selectedApp=b.name,g.filterVersion(a.selectedFilters.selectedApp),a.selectedFilters.selectedVersion=b.version),b.name});c.forEach(function(b){b&&$.inArray(b,a.appNames)<0&&a.appNames.push(b)})},b.load(c,{f:h}).then(g.initFilters),g.selectApp=function(b){b?b!==a.selectedFilters.selectedApp&&(a.selectedFilters.selectedApp=b):a.selectedFilters.selectedApp=d.appName},g.selectVersion=function(b){b&&b!==d.appVersion?a.selectedFilters.selectedVersion=b:a.selectedFilters.selectedVersion=d.appVersion},g.selectCaseStatus=function(b){b&&b!==d.caseStatus?a.selectedFilters.selectedStatus=b:a.selectedFilters.selectedStatus=d.caseStatus},g.filterVersion=function(b){a.versions=[],a.selectedFilters.selectedVersion=d.appVersion,a.apps&&a.apps.filter&&(a.versions=a.apps.filter(function(a){return a&&a.name===b&&a.version}).map(function(a){return a.version})),a&&a.versions&&1===a.versions.length&&(a.selectedFilters.selectedVersion=a.versions[0])},g.filterProcessDefinition=function(b){if(b&&a.selectedFilters.selectedApp&&a.apps){var c=a.apps.filter(function(c){return c&&c.name===a.selectedFilters.selectedApp&&b===c.version});c&&c.length?a.selectedFilters.selectedProcessDefinition=c[0]&&c[0].id:delete a.selectedFilters.selectedProcessDefinition}else delete a.selectedFilters.selectedProcessDefinition},g.submitSearch=function(){a.pagination.currentPage=1,a.$emit("caselist:search")},a.$watch("selectedFilters.selectedApp",function(){a.selectedFilters.processId?a.selectedFilters.selectedApp!==d.appName&&delete a.selectedFilters.processId:(g.filterVersion(a.selectedFilters.selectedApp),delete a.selectedFilters.selectedProcessDefinition)}),a.$watch("selectedFilters.selectedVersion",function(){g.filterProcessDefinition(a.selectedFilters.selectedVersion)})}angular.module("org.bonitasoft.features.admin.cases.list.filters",["org.bonitasoft.common.resources","org.bonitasoft.features.admin.cases.list.values","gettext","ui.bootstrap","ui.router","org.bonitasoft.common.resources.store"]).controller("ActiveCaseFilterController",["$scope","store","processAPI","defaultFilters","caseStatesValues","$stateParams",a]).directive("activeCaseFilters",function(){return{restrict:"E",require:"^ActiveCaseListCtrl",templateUrl:"features/admin/cases/list/cases-list-filters.html",controller:"ActiveCaseFilterController",controllerAs:"filterCtrl"}}).controller("ArchivedCaseFilterController",["$scope","store","processAPI","defaultFilters","caseStatesValues","$stateParams",a]).directive("archivedCaseFilters",function(){return{restrict:"E",require:"^ArchivedCaseListCtrl",templateUrl:"features/admin/cases/list/archived-cases-list-filters.html",controller:"ArchivedCaseFilterController",controllerAs:"filterCtrl"}})}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.cases.list.values",[]).value("casesColumns",[{name:"ID",path:["id"]},{name:"Process name",path:["processDefinitionId","name"]},{name:"Version",path:["processDefinitionId","version"]},{name:"Start date",path:["start"]},{name:"Started by",path:["started_by","userName"],defaultValue:"System"},{name:"Failed Flow Nodes",path:["failedFlowNodes"]},{name:"Pending Flow Nodes",path:["activeFlowNodes"]}]).value("allCaseStatesValues",{started:"Started",error:"Failed",aborted:"Aborted",completed:"Completed",canceled:"Canceled"}).value("caseStatesValues",{error:"With failures"}).value("moreDetailToken","casemoredetailsadmin").value("pageSizes",[25,50,100,200]).value("defaultPageSize",25).value("defaultSort","id").value("archivedDefaultSort","sourceObjectId").value("defaultFilters",{appVersion:"All",appName:"All",caseStatus:"All"}).value("defaultDeployedFields",["processDefinitionId","started_by","startedBySubstitute"]).value("defaultActiveCounterFields",["activeFlowNodes","failedFlowNodes"]).value("activedTabName","").value("archivedCasesColumns",[{name:"ID",path:["sourceObjectId"]},{name:"Process name",path:["processDefinitionId","name"]},{name:"Version",path:["processDefinitionId","version"]},{name:"Start date",path:["start"]},{name:"Started by",path:["started_by","userName"],defaultValue:"System"},{name:"End date",path:["end_date"]},{name:"State",path:["state"]}]).value("archivedCaseStatesValues",{started:"Started",error:"Failed"}).value("archivedMoreDetailToken","archivedcasemoredetailsadmin").value("archivedTabName","archived").value("defaultArchivedCounterFields",[])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){function u(a,b){var c={ttl:3e3,disableCountDown:!0,disableIcons:!0},d=((b.status||"")+" "+(b.statusText||"")+" "+(b.errorMsg||"")).trim();switch(b.type){case"success":m.success(d,c);break;case"danger":m.error(d,c);break;default:m.info(d,c)}}function v(){var b=angular.copy(B);a.selectedFilters.selectedProcessDefinition?b.push("processDefinitionId="+a.selectedFilters.selectedProcessDefinition):a.selectedFilters.selectedApp&&a.selectedFilters.selectedApp!==j.appName&&b.push("name="+a.selectedFilters.selectedApp),a.selectedFilters.selectedStatus&&a.selectedFilters.selectedStatus!==j.caseStatus&&b.push("state="+a.selectedFilters.selectedStatus),a.searchOptions.filters=b}function w(b,c){if(c)if(401===c.status)h.url("/");else{var d={status:c.status,statusText:c.statusText,type:"danger"};c.data&&(d.errorMsg=c.data.message,d.resource=c.data.api+"/"+c.data.resource),a.$emit("caselist:notify",d)}}function x(){return t.isSearchIndexedFeatureActivated()}function y(){a.loading=!0;var c=a.cases=[],d=a.pagination=angular.copy(a.pagination);b.search({p:d.currentPage-1,c:d.itemsPerPage,d:f,o:a.searchOptions.searchSort,f:a.searchOptions.filters,n:g,s:a.selectedFilters.currentSearch}).$promise.then(function(b){d.total=b&&b.resource&&b.resource.pagination&&b.resource.pagination.total,a.currentFirstResultIndex=(d.currentPage-1)*d.itemsPerPage+1,a.currentLastResultIndex=Math.min(a.currentFirstResultIndex+d.itemsPerPage-1,d.total),b&&b.resource&&b.resource.map(function(b){var c={};return a.columns.forEach(function(a){for(var d=b,e=0;e<a.path.length;e++)d=d&&d[a.path[e]];c[a.name]=d}),c.id=b.id,c.processDefinitionId=b.processDefinitionId,c.fullCase=b,c.sourceObjectId=b.sourceObjectId,c}).forEach(function(a){c.push(a)})},function(b){d.total=0,a.currentFirstResultIndex=0,a.currentLastResultIndex=0,a.$emit("caselist:http-error",b)})["finally"](function(){a.loading=!1,l()})}var z=this,A="processmoredetailsadmin";a.columns=c,a.pagination={itemsPerPage:d,currentPage:1,total:0},a.selectedFilters={processId:q},a.pageSizes=i,a.cases=void 0,a.loading=!0;var B=[];r&&(B.push("supervisor_id="+r),n=n.replace("admin","pm"),A=A.replace("admin","pm")),angular.isDefined(s)&&s&&B.push("state="+s),a.processManager=+!!r,a.supervisorId=r,a.archivedTabName=!!o,a.searchOptions={filters:[],searchSort:e+" ASC"},a.searchOptions.filters=angular.copy(B),a.sortOptions={property:e,direction:!0},z.reinitCases=function(){delete a.searchOptions.searchSort,a.pagination.currentPage=1,z.searchForCases()},a.$on("caselist:http-error",w),a.$on("caselist:notify",u),a.$on("caselist:search",y),z.loadContent=function(){a.$watch("selectedFilters",v,!0),a.$watch("searchOptions",function(){a.pagination.currentPage=1,a.selectedFilters.processId||z.searchForCases()},!0)},z.parseAndFormat=k.parseAndFormat,z.updateSortField=function(b){a.searchOptions.searchSort&&!b||(a.searchOptions.searchSort=(b&&b.property?b.property:e)+" "+(b&&b.direction===!1?"DESC":"ASC"),a.pagination.currentPage=1)},z.onDropComplete=function(b,c){if(a.columns&&a.columns&&c){var d=a.columns.indexOf(c);if(d!==b-1&&d>-1){var e;if(d>b){for(e=d-1;e>=b;e--)a.columns[e+1]=a.columns[e];a.columns[b]=c}else{for(e=d+1;b>e;e++)a.columns[e-1]=a.columns[e];a.columns[b-1]=c}}}},z.filterColumn=function(a){return a&&a.selected},z.changeItemPerPage=function(b){b&&(a.pagination.itemsPerPage=b,a.pagination.currentPage=1,z.searchForCases())},z.getLinkToCase=function(a){return a?p.getPath()+p.getSearch()+"#?id="+a.id+"&_p="+(n||"")+"&"+p.getCurrentProfile():void 0},z.getLinkToProcess=function(a){return a&&a.processDefinitionId?p.getPath()+p.getSearch()+"#?id="+a.processDefinitionId.id+"&_p="+(A||"")+"&"+p.getCurrentProfile():void 0},z.getLinkToCaseOverview=function(a){return a?p.getPath()+p.getSearch()+"#?name="+a.processDefinitionId.name+"&version="+a.processDefinitionId.version+"&processDefinitionId="+a.processDefinitionId.id+"&id="+a.id+"&token=DisplayCaseForm&_p=DisplayCaseForm&_pf="+p.getCurrentProfile():void 0},z.getLinkToArchivedCaseOverview=function(a){return a?p.getPath()+p.getSearch()+"#?name="+a.processDefinitionId.name+"&version="+a.processDefinitionId.version+"&processDefinitionId="+a.processDefinitionId.id+"&id="+a.id+"&sourceObjectId="+a.sourceObjectId+"&token=DisplayCaseForm&_p=DisplayCaseForm&_pf="+p.getCurrentProfile():void 0},z.addAlertEventHandler=u,z.buildFilters=v,z.handleHttpErrorEvent=w,z.searchForCases=y,z.displayKeys=x}angular.module("org.bonitasoft.features.admin.cases.list.table",["org.bonitasoft.common.resources","org.bonitasoft.common.table.resizable","org.bonitasoft.common.filters.stringTemplater","org.bonitasoft.services.topurl","org.bonitasoft.features.admin.cases.list.values","org.bonitasoft.features.admin.cases.list.filters","org.bonitasoft.features.admin.cases.list.delete","gettext","ui.bootstrap","ui.router","angular-growl","ngAnimate","org.bonitasoft.bonitable","org.bonitasoft.bonitable.selectable","org.bonitasoft.bonitable.repeatable","org.bonitasoft.bonitable.sortable","org.bonitasoft.bonitable.storable","org.bonitasoft.bonitable.settings","org.bonitasoft.templates","as.sortable","org.bonitasoft.common.filters.date.parser","org.bonitasoft.service.features"]).config(["growlProvider",function(a){a.globalPosition("top-center")}]).controller("ActiveCaseListCtrl",["$scope","caseAPI","casesColumns","defaultPageSize","defaultSort","defaultDeployedFields","defaultActiveCounterFields","$location","pageSizes","defaultFilters","dateParser","$anchorScroll","growl","moreDetailToken","tabName","manageTopUrl","processId","supervisorId","caseStateFilter","FeatureManager",a]).controller("ArchivedCaseListCtrl",["$scope","archivedCaseAPI","archivedCasesColumns","defaultPageSize","archivedDefaultSort","defaultDeployedFields","defaultArchivedCounterFields","$location","pageSizes","defaultFilters","dateParser","$anchorScroll","growl","archivedMoreDetailToken","tabName","manageTopUrl","processId","supervisorId","caseStateFilter","FeatureManager",a])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.cases.list",["ui.router","org.bonitasoft.features.admin.cases.list.table","ui.bootstrap","gettext","org.bonitasoft.services.i18n","org.bonitasoft.services.topurl","org.bonitasoft.features.admin.cases.list.values","org.bonitasoft.common.directives.bonitaHref"]).config(["$stateProvider",function(a){a.state("bonita.cases",{url:"/admin/cases/list?processId&supervisor_id&caseStateFilter",templateUrl:"features/admin/cases/list/cases.html","abstract":!0,controller:"CaseCtrl",controllerAs:"caseCtrl"}).state("bonita.cases.active",{url:"",views:{"case-list":{templateUrl:"features/admin/cases/list/cases-list.html",controller:"ActiveCaseListCtrl",controllerAs:"caseCtrl"}},resolve:{tabName:["activedTabName",function(a){return a}],supervisorId:["$stateParams",function(a){return a.supervisor_id}],processId:["$stateParams",function(a){return a.processId}],caseStateFilter:["$stateParams",function(a){return a.caseStateFilter}]}}).state("bonita.cases.archived",{url:"/archived",views:{"case-list":{templateUrl:"features/admin/cases/list/cases-list.html",controller:"ArchivedCaseListCtrl",controllerAs:"caseCtrl"}},resolve:{tabName:["archivedTabName",function(a){return a}],supervisorId:["$stateParams",function(a){return a.supervisor_id}],processId:["$stateParams",function(a){return a.processId}],caseStateFilter:["$stateParams",function(a){return a.caseStateFilter}]}})}]).controller("CaseCtrl",["$scope","$state","manageTopUrl","i18nService",function(a,b,c,d){a.state=b,a.currentToken=c.getCurrentPageToken(),a.casesStates=[],a.casesStates.push({state:"bonita.cases.active",title:d.getKey("caselist.casesStates.active.title"),htmlAttributeId:"TabActiveCases"}),a.casesStates.push({state:"bonita.cases.archived",title:d.getKey("caselist.casesStates.archived.title"),tabName:"archived",htmlAttributeId:"TabArchivedCases"})}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.mappings",["org.bonitasoft.services.i18n","org.bonitasoft.common.resources.store"]).value("MAPPING_PROFILES",{USER:"USER",GROUP:"GROUP",ROLE:"ROLE",MEMBERSHIP:"MEMBERSHIP"}).value("MANAGER_FILTER",{USER:["user_id=>0","group_id=-1","role_id=-1"],GROUP:["user_id=-1","group_id=>0","role_id=-1"],ROLE:["user_id=-1","group_id=-1","role_id=>0"],MEMBERSHIP:["user_id=-1","group_id=>0","role_id=>0"]}).value("ACTOR_PROFILES",{users:{deploy:{filter:"member_type=USER",deploy:["user_id"]},type:"users",name:"USER"},groups:{deploy:{filter:"member_type=GROUP",deploy:["group_id"]},type:"groups",name:"GROUP"},roles:{deploy:{filter:"member_type=ROLE",deploy:["role_id"]},type:"roles",name:"ROLE"},memberships:{deploy:{filter:"member_type=MEMBERSHIP",deploy:["role_id","group_id"]},type:"memberships",name:"MEMBERSHIP"}}).value("userIdAttribute","user_id").value("groupIdAttribute","group_id").value("roleIdAttribute","role_id").service("MappingService",["i18nService","userIdAttribute","groupIdAttribute","roleIdAttribute","userAPI","groupAPI","roleAPI","MAPPING_PROFILES","store",function(a,b,c,d,e,f,g,h,i){var j={};j.labelFormatter={USER:function(a){var c=a[b]||a;return c.firstname+" "+c.lastname},GROUP:function(a){var b=a[c]||a;return b.displayName},ROLE:function(a){var b=a[d]||a;return b.displayName},MEMBERSHIP:function(b){return a.getKey("processDetails.actors.memberships.item.label",{group:b[c].displayName,role:b[d].displayName})}};var k={USER:{deploy:[b],o:"firstname asc",actorId:b,searchAPI:e},GROUP:{deploy:[c],o:"displayName asc",actorId:c,searchAPI:f},ROLE:{deploy:[d],o:"displayName asc",actorId:d,searchAPI:g},MEMBERSHIP:{deploy:[d,c],o:"displayName asc",actorId:d,actorId2:c}};return j.getSearchMemberParams=function(a){return angular.copy(k[a])},j.loadMembers=function(a,b,c,d){return i.load(d,{f:b.filters,d:b.deploy}).then(function(d){return d.forEach(function(b){b.label=j.labelFormatter[a](b)}),a!==h.MEMBERSHIP&&d.forEach(function(a){c.push(a[b.actorId].id)}),d},angular.noop)},j.searchMembers=function(a,b,c){return b=b||{p:0,c:200},b.o=c.o,j.getSearchMemberParams(a).searchAPI.search(b).$promise.then(function(a){return a.data})},j}])}(),function(){"use strict";angular.module("org.bonitasoft.common.actors.selectbox",["org.bonitasoft.services.i18n","org.bonitasoft.common.properties","org.bonitasoft.features.admin.mappings","isteven-multi-select"]).directive("actorsSelectBox",function(){return{priority:1e4,scope:{localLang:"=",selectedMembers:"=",alreadyMappedActorsIds:"=",type:"@"},controller:"ActorsSelectBoxCtrl",controllerAs:"actorsCtrl",restrict:"E",templateUrl:"features/admin/mapping/actors.html",link:function(a,b,c,d){d.selectionMode=c.selectionMode}}}).controller("ActorsSelectBoxCtrl",["$scope","MappingService",function(a,b){var c=this;c.selectedMembers=a.selectedMembers,a.$watch(function(){return a.alreadyMappedActorsIds&&a.alreadyMappedActorsIds.length},function(){_.isArray(a.alreadyMappedActorsIds)&&(c.members=c.members.filter(function(b){return-1===a.alreadyMappedActorsIds.indexOf(b.id)}))}),c.selectedMembers.list=[];var d=a.type;c.members=[];var e,f={p:0,c:200},g=b.getSearchMemberParams(d);c.search=function(h){h.keyword&&e===h.keyword||(e=f.s,f.s=h.keyword,b.searchMembers(d,f,g,a.alreadyMappedActorsIds).then(function(e){c.members=_.chain(e).filter(function(b){return-1===a.alreadyMappedActorsIds.indexOf(b.id)}).forEach(function(a){a.listLabel=b.labelFormatter[d](a),a.buttonLabel=a.listLabel}).value()}))},c.search({})}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes.details.actorMapping",["ui.bootstrap","org.bonitasoft.common.resources","org.bonitasoft.common.filters.stringTemplater","org.bonitasoft.services.i18n","org.bonitasoft.common.properties","org.bonitasoft.features.admin.mappings"]).constant("ACTOR_PER_PAGE",10).constant("MEMBERS_PER_CELL",5).service("ActorMappingService",["actorMemberAPI","MEMBERS_PER_CELL","$q",function(a,b,c){var d={};return d.getMembersForAnActor=function(a,b,e){var f=[],g={};return angular.forEach(b,function(b){f.push(d.getActorMembers(a,b.deploy,e).then(function(a){g[b.type]=a}))}),c.all(f).then(function(){return g})},d.getActorMembers=function(c,d,e){var f=["process_id="+e.id,"actor_id="+c.id];return f=f.concat(d.filter),a.search({p:0,c:b,f:f,d:d.deploy}).$promise},d}]).controller("ActorsMappingCtrl",["$scope","$modal","process","ACTOR_PER_PAGE","MEMBERS_PER_CELL","growl","i18nService","$log","$filter","processActors","ActorMappingService","growlOptions","defaultLocalLang","ACTOR_PROFILES",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){var o=this,p=[];p.pagination={currentPage:1,numberPerPage:d},o.actors=j,o.membersPerCell=e,o.actorsMembers={},o.actorProfiles=n,o.actors.forEach(function(a){k.getMembersForAnActor(a,o.actorProfiles,c).then(function(b){o.actorsMembers[a.id]=b})}),o.editMapping=function(d,e){b.open({templateUrl:"features/admin/processes/details/edit-actor-members.html",controller:"EditActorMembersCtrl",controllerAs:"editActorMembersCtrl",size:"lg",backdrop:!1,resolve:{process:function(){return c},memberProfile:function(){return o.actorProfiles[e]},actor:function(){return d},defaultLocalLang:function(){return m}}}).result.then(function(a){a=_.compact(a),f.success(g.getKey("processDetails.actors.update.success",{nbSucess:a.length}),l)},function(a){angular.isDefined(a)&&_.isArray(a)&&(h.error("Actor mapping errors",a),f.error(g.getKey("processDetails.actors.update.error",{nbErrors:a.length}),l))})["finally"](function(){a.$emit("process.refresh"),k.getActorMembers(d,o.actorProfiles[e].deploy,c).then(function(a){o.actorsMembers[d.id][e]=a})})}}]).filter("dateInMillis",function(){return function(a){return Date.parse(a)}})}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m){function n(a){return r.processResolutionProblems.some(function(b){return b.type===a})}function o(){var a={ttl:3e3,disableCountDown:!0,disableIcons:!0};e.open({templateUrl:"features/admin/processes/details/delete-process-modal.html",controller:"DeleteProcessModalInstanceCtrl",controllerAs:"deleteProcessModalInstanceCtrl",size:"sm",resolve:{process:function(){return c}}}).result.then(function(){g.goTo({token:"processlisting"+k.tokenExtensionValue})},function(b){angular.isDefined(b)&&(m.error("An Error occurred during process deletion",b),l.error("An Error occurred during process deletion: "+b.message,a))})}function p(){j.retrieveProcess(c.id).$promise.then(function(a){c.configurationState=a.configurationState}),j.retrieveProcessResolutionProblem(c.id).then(function(a){r.processResolutionProblems=a})}function q(a,b){var e=b.value?"ENABLED":"DISABLED";d.update({id:c.id,activationState:e}).$promise.then(function(){c.activationState=e})}var r=this;r.includesCurrentState=function(a){return f.includes(a)},r.menuContent=b,r.process=c,r.toggleProcessActivation=q,r.refreshProcess=p,r.deleteProcess=o,r.currentPageToken=g.getCurrentPageToken(),r.processResolutionProblems=i,r.hasResolutionProblem=n,a.$on("button.toggle",r.toggleProcessActivation),a.$on("process.refresh",r.refreshProcess),r.goBack=function(){h.history.back()}}function b(a,b,c,d){var e=this;e.process=c,e["delete"]=function(){b["delete"]({id:c.id}).$promise.then(function(){d.close()},function(a){d.dismiss(a)})},e.cancel=function(){d.dismiss()}}var c="bonita.processesDetails.information",d="bonita.processesDetails.params",e="bonita.processesDetails.processConnectors",f="bonita.processesDetails.actorsMapping";angular.module("org.bonitasoft.features.admin.processes.details",["ngAnimate","ui.router","ui.bootstrap","gettext","org.bonitasoft.service.token","angular-growl","org.bonitasoft.services.topurl","org.bonitasoft.common.directives.bonitaHref","org.bonitasoft.common.directives.toggleButton","org.bonitasoft.common.resources","org.bonitasoft.features.admin.processes.details.actorMapping","org.bonitasoft.features.admin.processes.editActorMembers","org.bonitasoft.services.topurl","org.bonitasoft.features.admin.processes.details.information","org.bonitasoft.features.admin.processes.details.processConnectors","org.bonitasoft.features.admin.processes.details.params","org.bonitasoft.service.process.resolution","org.bonitasoft.common.filters.stringTemplater"]).value("menuContent",[]).config(["$provide",function(a){a.decorator("menuContent",["$delegate","gettext",function(a,b){return a.push({name:b("General"),resolutionLabel:"general",state:c}),a.push({name:b("Actors"),resolutionLabel:"actor",state:f}),a.push({name:b("Parameters"),resolutionLabel:"parameter",state:d}),a.push({name:b("Connectors"),resolutionLabel:"connector",state:e}),a}])}]).service("ProcessMoreDetailsResolveService",["store","processConnectorAPI","parameterAPI","categoryAPI","processAPI","actorAPI","processResolutionProblemAPI","ProcessProblemResolutionService",function(a,b,c,d,e,f,g,h){var i={};return i.retrieveProcessResolutionProblem=function(b){return a.load(g,{f:["process_id="+b]}).then(function(a){return h.buildProblemsList(a.map(function(a){return{type:a.target_type,ressource_id:a.ressource_id
}}))})},i.retrieveProcessActors=function(a,b){return f.search({p:b.currentPage-1,c:b.numberPerPage,o:"name ASC",f:"process_id="+a,n:["users","groups","roles","memberships"]}).$promise.then(function(a){return a.data})},i.retrieveProcess=function(a){return e.get({id:a,d:["deployedBy"],n:["openCases","failedCases"]})},i.retrieveCategories=function(b){return a.load(d,{f:["id="+b]})},i.retrieveParameters=function(b){return a.load(c,{f:["process_id="+b],o:["name ASC"]})},i.retrieveConnectors=function(c){return a.load(b,{o:"definition_id ASC",f:"process_id="+c})},i}]).config(["$stateProvider","ACTOR_PER_PAGE",function(a,b){a.state("bonita.processesDetails",{url:"/admin/processes/details/:processId?supervisor_id",templateUrl:"features/admin/processes/details/menu.html","abstract":!0,controller:"ProcessMenuCtrl",controllerAs:"processMenuCtrl",resolve:{process:["$stateParams","ProcessMoreDetailsResolveService",function(a,b){var c=b.retrieveProcess(a.processId);return c.id=a.processId,c}],processResolutionProblems:["$stateParams","ProcessMoreDetailsResolveService",function(a,b){return b.retrieveProcessResolutionProblem(a.processId)}],supervisorId:["$stateParams","TokenExtensionService",function(a,b){return b.tokenExtensionValue=angular.isDefined(a.supervisor_id)?"pm":"admin",a.supervisor_id}],defaultLocalLang:["i18nService",function(a){return a.translationsLoadPromise.then(function(){return{selectAll:a.getKey("multiSelect.selectAll"),selectNone:a.getKey("multiSelect.selectNone"),reset:a.getKey("multiSelect.reset"),search:a.getKey("multiSelect.search.helper")}})}]}}).state(c,{url:"",templateUrl:"features/admin/processes/details/information.html",controller:"ProcessInformationCtrl",controllerAs:"processInformationCtrl",resolve:{categories:["$stateParams","ProcessMoreDetailsResolveService",function(a,b){return b.retrieveCategories(a.processId)}]}}).state(d,{url:"/params",templateUrl:"features/admin/processes/details/params.html",controller:"ProcessParamsCtrl",controllerAs:"processParamsCtrl",resolve:{parameters:["$stateParams","ProcessMoreDetailsResolveService",function(a,b){return b.retrieveParameters(a.processId)}]}}).state(e,{url:"/connectors",templateUrl:"features/admin/processes/details/process-connectors.html",controller:"ProcessConnectorsCtrl",controllerAs:"processConnectorsCtrl",resolve:{processConnectors:["$stateParams","ProcessMoreDetailsResolveService",function(a,b){return b.retrieveConnectors(a.processId)}]}}).state(f,{url:"/actorsMapping",templateUrl:"features/admin/processes/details/actors-mapping.html",controller:"ActorsMappingCtrl",controllerAs:"actorsMappingCtrl",resolve:{processActors:["$stateParams","ProcessMoreDetailsResolveService",function(a,c){return c.retrieveProcessActors(a.processId,{currentPage:1,numberPerPage:b})}]}})}]).controller("ProcessMenuCtrl",a).controller("DeleteProcessModalInstanceCtrl",b),a.$inject=["$scope","menuContent","process","processAPI","$modal","$state","manageTopUrl","$window","processResolutionProblems","ProcessMoreDetailsResolveService","TokenExtensionService","growl","$log"],b.$inject=["$scope","processAPI","process","$modalInstance"]}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes.editActorMembers",["ui.bootstrap","org.bonitasoft.services.i18n","ui.router","angular-growl","isteven-multi-select","org.bonitasoft.common.resources.store","org.bonitasoft.common.properties","org.bonitasoft.features.admin.mappings","org.bonitasoft.common.actors.selectbox"]).controller("EditActorMembersCtrl",["$modalInstance","actorMemberAPI","actor","memberProfile","process","i18nService","$q","defaultLocalLang","MAPPING_PROFILES","MappingService",function(a,b,c,d,e,f,g,h,i,j){function k(a){var c=[];return a.forEach(function(a){c.push(b["delete"]({id:a.id}).$promise)}),c}function l(){var a=[];return n.newMembers.list.forEach(function(b){var d={actor_id:c.id};d[n.searchMemberParams.actorId]=b.id,a.push(n.actorMemberAPISave(d).$promise)}),a}function m(){return n.saveCallFinished=0,n.newMembers.membership.group.list.length&&n.newMembers.membership.role.list.length?b.save({role_id:n.newMembers.membership.role.list[0].id,group_id:n.newMembers.membership.group.list[0].id,actor_id:c.id}).$promise:void 0}var n=this;n.memberType=d.name,n.members={},n.newMembers={list:[],membership:{role:{list:[]},group:{list:[]}}},n.actor=c,n.membersToDelete=[],n.mappedIds=[],n.searchMemberParams=j.getSearchMemberParams(n.memberType),n.constant=i,n.localLang=angular.copy(h),n.localLang.nothingSelected=f.getKey("processDetails.actors."+d.type+".selectHelper"),n.localLangRole=angular.copy(h),n.localLangRole.nothingSelected=f.getKey("processDetails.actors.memberships.selectRoleHelper"),n.localLangGroup=angular.copy(h),n.localLangGroup.nothingSelected=f.getKey("processDetails.actors.memberships.selectGroupHelper"),n.currentMemberLabel=f.getKey("processDetails.actors."+d.type+".label"),n.title=f.getKey("processDetails.actors."+d.type+".mapping"),n.isMembershipEdit=function(){return n.memberType===i.MEMBERSHIP},n.hasModificationToApply=function(){return n.newMembers.list.length||!!n.membersToDelete.length||n.newMembers.membership.group.list.length&&n.newMembers.membership.role.list.length},n.initView=function(){n.searchMemberParams.filters=["actor_id="+c.id,"member_type="+n.memberType],j.loadMembers(n.memberType,n.searchMemberParams,n.mappedIds,b).then(function(a){n.members=a})},n.reenableMember=function(a){n.membersToDelete.splice(n.membersToDelete.indexOf(a),1),n.members.push(a)},n.removeMember=function(a){n.members.splice(n.members.indexOf(a),1),n.membersToDelete.push(a)},n.removeAll=function(){n.members.forEach(function(a){n.membersToDelete.push(a)}),n.members.length=0},n.reenableAll=function(){n.membersToDelete.forEach(function(a){n.members.push(a)}),n.membersToDelete.length=0},n.apply=function(){var b=[];b=b.concat(l()),b=b.concat(m()),b=b.concat(k(n.membersToDelete)),g.all(b).then(a.close,n.cancel)},n.actorMemberAPISave=function(a){return b.save(a)},n.cancel=function(){a.dismiss()}}])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k){function l(){var a=h.open({templateUrl:"features/admin/processes/details/manage-category-mapping-modal.html",controller:"ManageCategoryMappingModalInstanceCtrl",controllerAs:"manageCategoryMappingInstanceCtrl",resolve:{process:function(){return b},initiallySelectedCategories:function(){return o.categories},allCategories:function(){return d.load(e)}}});a.result.then(o.updateTagsAndAlertUser,function(a){-1===["cancel","backdrop click"].indexOf(a)&&(k.error("category update failed :",a),i.error(j.getKey("processDetails.informations.category.update.error")+" : "+a,p))})}function m(a){o.categories=a,o.selectedCategories.length=0,[].push.apply(o.selectedCategories,a.map(function(a){return a.name})),i.success(j.getKey("processDetails.informations.category.update.sucess"),p)}function n(){return"RESOLVED"===b.configurationState}var o=this;o.process=b,o.parseAndFormat=c.parseAndFormat,o.selectedCategories=f.map(function(a){return a.name}),o.categories=f,o.openProcessCategoryManagementModal=l,o.updateTagsAndAlertUser=m,o.isProcessResolved=n();var p={ttl:3e3,disableCountDown:!0,disableIcons:!0}}angular.module("org.bonitasoft.features.admin.processes.details.information",["org.bonitasoft.common.filters.date.parser","org.bonitasoft.common.directives.bonitags","ui.bootstrap","angular-growl","org.bonitasoft.common.resources.store","org.bonitasoft.features.admin.processes.details.information.categories","org.bonitasoft.services.i18n"]).controller("ProcessInformationCtrl",a),a.$inject=["$scope","process","dateParser","store","categoryAPI","categories","$q","$modal","growl","i18nService","$log"]}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes.details.information.categories",["org.bonitasoft.common.directives.bonitags","ui.bootstrap","org.bonitasoft.common.resources.store","angular-growl","gettext"]).controller("ManageCategoryMappingModalInstanceCtrl",["$scope","categoryAPI","process","gettextCatalog","$modalInstance","store","initiallySelectedCategories","allCategories","categoryManager",function(a,b,c,d,e,f,g,h,i){var j=this;j.selectedTags=g.map(function(a){return a.name}),j.tags=h.map(function(a){return a.name}),j.updateCategories=function(){e.close(i.updateCategories(h,g,j.selectedTags,j.tags,c.id))},j.cancel=function(){e.dismiss("cancel")}}]).service("categoryManager",["processCategoryAPI","categoryAPI","$q",function(a,b,c){var d={};return d.selectedCategoriesPopulatePromise=function(a,b,d){return c.all(a.concat(b)).then(function(){return d})},d.saveCategoryProcessIfNotAlreadySelected=function(b,c,e,f){d.categoryWasInitiallySelected(b,c)||e.push(a.save({category_id:b.id,process_id:f}))},d.deleteCategoryProcessIfNeeded=function(b,c,e,f,g){!d.categoryIsSelected(b,g)&&d.categoryWasInitiallySelected(b,c)&&e.push(a["delete"]({category_id:b.id,process_id:f}))},d.updateCategories=function(a,b,c,e,f){var g=[],h=[];return a.forEach(function(a){d.categoryIsSelected(a,c)?(h.push(a),d.saveCategoryProcessIfNotAlreadySelected(a,b,g,f)):d.deleteCategoryProcessIfNeeded(a,b,g,f,c)}),d.selectedCategoriesPopulatePromise(g,d.createNewCategoriesPromises(h,e,c,f),h)},d.createNewCategoriesPromises=function(c,d,e,f){return _.difference(e,d).map(function(d){return b.save({name:d}).$promise.then(function(b){return c.push(b),a.save({category_id:b.id,process_id:f})})})},d.categoryWasInitiallySelected=function(a,b){return a&&b?!!b.filter(function(b){return b.id===a.id}).length:!1},d.categoryIsSelected=function(a,b){return a&&b?!!b.filter(function(b){return b===a.name}).length:!1},d}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes.details.params",["org.bonitasoft.common.resources","org.bonitasoft.service.features","xeditable","org.bonitasoft.services.i18n"]).constant("TYPE_ERROR_MESSAGE",{"java.lang.Boolean":{message:"processDetails.params.control.boolean",checkvalueMatchType:function(a){return"true"===a||"false"===a||a===!0||a===!1}},"java.lang.Double":{message:"processDetails.params.control.double",checkvalueMatchType:function(a){return _.isString(a)&&!isNaN(parseFloat(a))||_.isNumber(a)}},"java.lang.Integer":{message:"processDetails.params.control.integer",checkvalueMatchType:function(a){return _.isString(a)&&Number(a)%1===0||_.isNumber(a)&&a%1===0}}}).controller("ProcessParamsCtrl",["parameters","FeatureManager","process","parameterAPI","$log","$scope","i18nService","TYPE_ERROR_MESSAGE",function(a,b,c,d,e,f,g,h){var i=this;i.parameters=a,i.process=c,i.booleanValues=[{value:"true"},{value:"false"}],i.showActions=b.isFeatureAvailable("POST_DEPLOY_CONFIG"),i.updateParameter=function(a,b){return angular.isDefined(h[a.type])&&!h[a.type].checkvalueMatchType(b)?g.getKey(h[a.type].message):d.update({process_id:a.process_id,description:a.description,name:a.name,value:b,type:a.type}).$promise.then(function(){f.$emit("process.refresh")},function(a){return e.error("error updating parameter : ",a),a.data.message})}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes.details.processConnectors",["ui.bootstrap","angular-growl","org.bonitasoft.service.features","org.bonitasoft.common.resources.store"]).controller("ProcessConnectorsCtrl",["$scope","process","FeatureManager","processConnectors",function(a,b,c,d){var e=this;e.process=b,e.processConnectors=d,e.showActions=c.isFeatureAvailable("POST_DEPLOY_CONFIG")}])}(),function(){"use strict";angular.module("org.bonitasoft.features.admin.processes",["org.bonitasoft.features.admin.processes.details"])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.cases",["org.bonitasoft.features.user.cases.list"])}(),function(){"use strict";function a(a,b,c,d,e,f){a.selectedFilters.selectedApp=d.appName,a.selectedFilters.selectedVersion=d.appVersion,a.selectedFilters.selectedStartedBy=d.startedBy,a.defaultUserFilters=d,a.caseStatesUserValues=e,angular.isDefined(f.caseStateFilter)&&f.caseStateFilter&&angular.isDefined(a.caseStatesUserValues[f.caseStateFilter])&&(a.selectedFilters.selectedStartedBy=f.caseStateFilter),a.caseStatesUserValues[d.startedBy]=d.startedBy,a.apps=[],a.versions=[],a.appNames=[],a.allCasesSelected=!1,a.selectedFilters.currentSearch="";var g=this,h=[];a.supervisorId&&h.push("supervisor_id="+a.supervisorId),g.initFilters=function(b){a.apps=b;var c=b.map(function(b){return a.selectedFilters.processId&&a.selectedFilters.processId===b.id&&(a.selectedFilters.selectedApp=b.name,g.filterVersion(a.selectedFilters.selectedApp),a.selectedFilters.selectedVersion=b.version),b.name});c.forEach(function(b){b&&$.inArray(b,a.appNames)<0&&a.appNames.push(b)})},b.load(c,{f:h}).then(g.initFilters),g.selectApp=function(b){b?b!==a.selectedFilters.selectedApp&&(a.selectedFilters.selectedApp=b):a.selectedFilters.selectedApp=d.appName},g.selectVersion=function(b){b&&b!==d.appVersion?a.selectedFilters.selectedVersion=b:a.selectedFilters.selectedVersion=d.appVersion},g.selectCaseStartedBy=function(b){b&&b!==d.startedBy?a.selectedFilters.selectedStartedBy="Me":a.selectedFilters.selectedStartedBy=d.startedBy},g.filterVersion=function(b){a.versions=[],a.selectedFilters.selectedVersion=d.appVersion,a.apps&&a.apps.filter&&(a.versions=a.apps.filter(function(a){return a&&a.name===b&&a.version}).map(function(a){return a.version})),a&&a.versions&&1===a.versions.length&&(a.selectedFilters.selectedVersion=a.versions[0])},g.filterProcessDefinition=function(b){if(b&&a.selectedFilters.selectedApp&&a.apps){var c=a.apps.filter(function(c){return c&&c.name===a.selectedFilters.selectedApp&&b===c.version});c&&c.length?a.selectedFilters.selectedProcessDefinition=c[0]&&c[0].id:delete a.selectedFilters.selectedProcessDefinition}else delete a.selectedFilters.selectedProcessDefinition},g.submitSearch=function(){a.pagination.currentPage=1,a.$emit("caselist:search")},a.$watch("selectedFilters.selectedApp",function(){a.selectedFilters.processId?a.selectedFilters.selectedApp!==d.appName&&delete a.selectedFilters.processId:(g.filterVersion(a.selectedFilters.selectedApp),delete a.selectedFilters.selectedProcessDefinition)}),a.$watch("selectedFilters.selectedVersion",function(){g.filterProcessDefinition(a.selectedFilters.selectedVersion)})}angular.module("org.bonitasoft.features.user.cases.list.filters",["org.bonitasoft.common.resources","org.bonitasoft.features.user.cases.list.values","gettext","ui.bootstrap","ui.router","org.bonitasoft.common.resources.store"]).controller("ActiveCaseUserFilterController",["$scope","store","processAPI","defaultUserFilters","caseStatesUserValues","$stateParams",a]).directive("activeCaseUserFilters",function(){return{restrict:"E",require:"^ActiveCaseListUserCtrl",templateUrl:"features/user/cases/list/cases-list-filters.html",controller:"ActiveCaseUserFilterController",controllerAs:"filterUserCtrl"}}).controller("ArchivedCaseUserFilterController",["$scope","store","processAPI","defaultUserFilters","caseStatesUserValues","$stateParams",a]).directive("archivedCaseUserFilters",function(){return{restrict:"E",require:"^ArchivedCaseListUserCtrl",templateUrl:"features/user/cases/list/archived-cases-list-filters.html",controller:"ArchivedCaseUserFilterController",controllerAs:"filterUserCtrl"}})}(),function(){"use strict";angular.module("org.bonitasoft.features.user.cases.list.values",[]).value("casesUserColumns",[{name:"ID",path:["id"]},{name:"Process name",path:["processDefinitionId","name"]},{name:"Version",path:["processDefinitionId","version"]},{name:"Start date",path:["start"]},{name:"Started by",path:["started_by","userName"],defaultValue:"System"}]).value("caseStatesUserValues",{Me:"Me"}).value("moreUserDetailToken","casemoredetails").value("pageSizes",[25,50,100,200]).value("defaultPageSize",25).value("defaultSort","id").value("archivedDefaultSort","sourceObjectId").value("defaultUserFilters",{appName:"All",startedBy:"Anyone"}).value("defaultDeployedFields",["processDefinitionId","started_by","startedBySubstitute"]).value("defaultActiveCounterFields",["activeFlowNodes","failedFlowNodes"]).value("activedTabName","").value("archivedCasesColumns",[{name:"ID",path:["sourceObjectId"]},{name:"Process name",path:["processDefinitionId","name"]},{name:"Version",path:["processDefinitionId","version"]},{name:"Start date",path:["start"]},{name:"Started by",path:["started_by","userName"],defaultValue:"System"},{name:"End date",path:["end_date"]},{name:"State",path:["state"]}]).value("archivedCaseStatesValues",{started:"Started",error:"Failed"}).value("archivedUserMoreDetailToken","archivedcasemoredetails").value("archivedTabName","archived").value("defaultArchivedCounterFields",[])}(),function(){"use strict";function a(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){function w(a,b){var c={ttl:3e3,disableCountDown:!0,disableIcons:!0},d=((b.status||"")+" "+(b.statusText||"")+" "+(b.errorMsg||"")).trim();switch(b.type){case"success":o.success(d,c);break;case"danger":o.error(d,c);break;default:o.info(d,c)}}function x(){var b=angular.copy(C);a.selectedFilters.selectedProcessDefinition?b.push("processDefinitionId="+a.selectedFilters.selectedProcessDefinition):a.selectedFilters.selectedApp&&a.selectedFilters.selectedApp!==l.appName&&b.push("name="+a.selectedFilters.selectedApp),a.selectedFilters.selectedStartedBy&&a.selectedFilters.selectedStartedBy!==l.startedBy&&b.push("started_by="+a.currentUserId),a.searchOptions.filters=b}function y(b,c){if(c)if(401===c.status)j.url("/");else{var d={status:c.status,statusText:c.statusText,type:"danger"};c.data&&(d.errorMsg=c.data.message,d.resource=c.data.api+"/"+c.data.resource),a.$emit("caselist:notify",d)}}function z(){return v.isSearchIndexedFeatureActivated()}function A(){a.loading=!0;var e=a.cases=[],f=a.pagination=angular.copy(a.pagination);b.get({id:"unusedId"}).$promise.then(function(b){a.currentUserId=b.user_id;var g=angular.copy(a.searchOptions.filters);g.push("user_id="+a.currentUserId),c.search({p:f.currentPage-1,c:f.itemsPerPage,d:h,o:a.searchOptions.searchSort,f:g,n:i,s:a.selectedFilters.currentSearch}).$promise.then(function(b){f.total=b&&b.resource&&b.resource.pagination&&b.resource.pagination.total,a.currentFirstResultIndex=(f.currentPage-1)*f.itemsPerPage+1,a.currentLastResultIndex=Math.min(a.currentFirstResultIndex+f.itemsPerPage-1,f.total),b&&b.resource&&b.resource.map(function(b){var c={};return a.columns.forEach(function(a){for(var d=b,e=0;e<a.path.length;e++)d=d&&d[a.path[e]];c[a.name]=d}),c.id=b.id,c.processDefinitionId=b.processDefinitionId,c.fullCase=b,c.sourceObjectId=b.sourceObjectId,d.search({p:0,c:1,f:["state=ready","user_id="+a.currentUserId,"caseId="+b.id]}).$promise.then(function(a){c["Available tasks"]=a.resource.pagination.total}),c}).forEach(function(a){e.push(a)})},function(b){f.total=0,a.currentFirstResultIndex=0,a.currentLastResultIndex=0,a.$emit("caselist:http-error",b)})["finally"](function(){a.loading=!1,n()})})}var B=this;a.columns=e,a.pagination={itemsPerPage:f,currentPage:1,total:0},a.selectedFilters={processId:s},a.pageSizes=k,a.cases=void 0,a.loading=!0;var C=[];angular.isDefined(u)&&u&&C.push("state="+u),a.processManager=+!!t,a.supervisorId=t,a.archivedTabName=!!q,a.searchOptions={filters:[],searchSort:g+" ASC"},a.searchOptions.filters=angular.copy(C),a.currentUserId=null,a.sortOptions={property:g,direction:!0},B.reinitCases=function(){delete a.searchOptions.searchSort,a.pagination.currentPage=1,B.searchForCases()},a.$on("caselist:http-error",y),a.$on("caselist:notify",w),a.$on("caselist:search",A),B.loadContent=function(){a.$watch("selectedFilters",x,!0),a.$watch("searchOptions",function(){a.pagination.currentPage=1,a.selectedFilters.processId||B.searchForCases()},!0)},B.parseAndFormat=m.parseAndFormat,B.updateSortField=function(b){a.searchOptions.searchSort&&!b||(a.searchOptions.searchSort=(b&&b.property?b.property:g)+" "+(b&&b.direction===!1?"DESC":"ASC"),a.pagination.currentPage=1)},B.onDropComplete=function(b,c){if(a.columns&&a.columns&&c){var d=a.columns.indexOf(c);if(d!==b-1&&d>-1){var e;if(d>b){for(e=d-1;e>=b;e--)a.columns[e+1]=a.columns[e];a.columns[b]=c}else{for(e=d+1;b>e;e++)a.columns[e-1]=a.columns[e];a.columns[b-1]=c}}}},B.filterColumn=function(a){return a&&a.selected},B.changeItemPerPage=function(b){b&&(a.pagination.itemsPerPage=b,a.pagination.currentPage=1,B.searchForCases())},B.getLinkToCase=function(a){return a?r.getPath()+r.getSearch()+"#?id="+a.id+"&_p="+(p||"")+"&"+r.getCurrentProfile():void 0},B.getLinkToCaseOverview=function(a){return a?r.getPath()+r.getSearch()+"#?name="+a.processDefinitionId.name+"&version="+a.processDefinitionId.version+"&processDefinitionId="+a.processDefinitionId.id+"&id="+a.id+"&token=DisplayCaseForm&_p=DisplayCaseForm&_pf="+r.getCurrentProfile():void 0},B.getLinkToArchivedCaseOverview=function(a){return a?r.getPath()+r.getSearch()+"#?name="+a.processDefinitionId.name+"&version="+a.processDefinitionId.version+"&processDefinitionId="+a.processDefinitionId.id+"&id="+a.id+"&sourceObjectId="+a.sourceObjectId+"&token=DisplayCaseForm&_p=DisplayCaseForm&_pf="+r.getCurrentProfile():void 0},B.addAlertEventHandler=w,B.buildFilters=x,B.handleHttpErrorEvent=y,B.searchForCases=A,B.displayKeys=z}angular.module("org.bonitasoft.features.user.cases.list.table",["org.bonitasoft.common.resources","org.bonitasoft.common.table.resizable","org.bonitasoft.common.filters.stringTemplater","org.bonitasoft.services.topurl","org.bonitasoft.features.user.cases.list.values","org.bonitasoft.features.user.cases.list.filters","gettext","ui.bootstrap","ui.router","angular-growl","ngAnimate","org.bonitasoft.bonitable","org.bonitasoft.bonitable.selectable","org.bonitasoft.bonitable.repeatable","org.bonitasoft.bonitable.sortable","org.bonitasoft.bonitable.storable","org.bonitasoft.bonitable.settings","org.bonitasoft.templates","as.sortable","org.bonitasoft.common.filters.date.parser","org.bonitasoft.service.features"]).config(["growlProvider",function(a){a.globalPosition("top-center")}]).controller("ActiveCaseListUserCtrl",["$scope","sessionAPI","caseAPI","humanTaskAPI","casesUserColumns","defaultPageSize","defaultSort","defaultDeployedFields","defaultActiveCounterFields","$location","pageSizes","defaultUserFilters","dateParser","$anchorScroll","growl","moreUserDetailToken","tabName","manageTopUrl","processId","supervisorId","caseStateFilter","FeatureManager",a]).controller("ArchivedCaseListUserCtrl",["$scope","sessionAPI","archivedCaseAPI","humanTaskAPI","archivedCasesColumns","defaultPageSize","archivedDefaultSort","defaultDeployedFields","defaultArchivedCounterFields","$location","pageSizes","defaultUserFilters","dateParser","$anchorScroll","growl","archivedUserMoreDetailToken","tabName","manageTopUrl","processId","supervisorId","caseStateFilter","FeatureManager",a])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.cases.list",["ui.router","org.bonitasoft.features.user.cases.list.table","ui.bootstrap","gettext","org.bonitasoft.services.i18n","org.bonitasoft.services.topurl","org.bonitasoft.features.user.cases.list.values","org.bonitasoft.common.directives.bonitaHref"]).config(["$stateProvider",function(a){a.state("bonita.userCases",{url:"/user/cases/list?processId&caseStateFilter",templateUrl:"features/user/cases/list/cases.html","abstract":!0,controller:"CaseUserCtrl",controllerAs:"caseUserCtrl"}).state("bonita.userCases.active",{url:"",views:{"case-list":{templateUrl:"features/user/cases/list/cases-list.html",controller:"ActiveCaseListUserCtrl",controllerAs:"caseUserCtrl"}},resolve:{tabName:["activedTabName",function(a){return a}],supervisorId:["$stateParams",function(a){return a.supervisor_id}],processId:["$stateParams",function(a){return a.processId}],caseStateFilter:["$stateParams",function(a){return a.caseStateFilter}]}}).state("bonita.userCases.archived",{url:"/archived",views:{"case-list":{templateUrl:"features/user/cases/list/cases-list.html",controller:"ArchivedCaseListUserCtrl",controllerAs:"caseUserCtrl"}},resolve:{tabName:["archivedTabName",function(a){return a}],supervisorId:["$stateParams",function(a){return a.supervisor_id}],processId:["$stateParams",function(a){return a.processId}],caseStateFilter:["$stateParams",function(a){return a.caseStateFilter}]}})}]).controller("CaseUserCtrl",["$scope","$state","manageTopUrl","i18nService",function(a,b,c,d){a.state=b,a.currentToken=c.getCurrentPageToken(),a.casesStates=[],a.casesStates.push({state:"bonita.userCases.active",title:d.getKey("caselist.casesStates.active.title"),htmlAttributeId:"TabActiveCases"}),a.casesStates.push({state:"bonita.userCases.archived",title:d.getKey("caselist.casesStates.archived.title"),tabName:"archived",htmlAttributeId:"TabArchivedCases"})}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.mappings",["org.bonitasoft.services.i18n","org.bonitasoft.common.resources.store"]).value("MAPPING_PROFILES",{USER:"USER",GROUP:"GROUP",ROLE:"ROLE",MEMBERSHIP:"MEMBERSHIP"}).value("MANAGER_FILTER",{USER:["user_id=>0","group_id=-1","role_id=-1"],GROUP:["user_id=-1","group_id=>0","role_id=-1"],ROLE:["user_id=-1","group_id=-1","role_id=>0"],MEMBERSHIP:["user_id=-1","group_id=>0","role_id=>0"]}).value("ACTOR_PROFILES",{users:{deploy:{filter:"member_type=USER",deploy:["user_id"]},type:"users",name:"USER"},groups:{deploy:{filter:"member_type=GROUP",deploy:["group_id"]},type:"groups",name:"GROUP"},roles:{deploy:{filter:"member_type=ROLE",deploy:["role_id"]},type:"roles",name:"ROLE"},memberships:{deploy:{filter:"member_type=MEMBERSHIP",deploy:["role_id","group_id"]},type:"memberships",name:"MEMBERSHIP"}}).value("userIdAttribute","user_id").value("groupIdAttribute","group_id").value("roleIdAttribute","role_id").service("MappingService",["i18nService","userIdAttribute","groupIdAttribute","roleIdAttribute","userAPI","groupAPI","roleAPI","MAPPING_PROFILES","store",function(a,b,c,d,e,f,g,h,i){var j={};j.labelFormatter={USER:function(a){var c=a[b]||a;return c.firstname+" "+c.lastname},GROUP:function(a){var b=a[c]||a;return b.displayName},ROLE:function(a){var b=a[d]||a;return b.displayName},MEMBERSHIP:function(b){return a.getKey("processDetails.actors.memberships.item.label",{group:b[c].displayName,role:b[d].displayName})}};var k={USER:{deploy:[b],o:"firstname asc",actorId:b,searchAPI:e},GROUP:{deploy:[c],o:"displayName asc",actorId:c,searchAPI:f},ROLE:{deploy:[d],o:"displayName asc",actorId:d,searchAPI:g},MEMBERSHIP:{deploy:[d,c],o:"displayName asc",actorId:d,actorId2:c}};return j.getSearchMemberParams=function(a){return angular.copy(k[a])},j.loadMembers=function(a,b,c,d){return i.load(d,{f:b.filters,d:b.deploy}).then(function(d){return d.forEach(function(b){b.label=j.labelFormatter[a](b)}),a!==h.MEMBERSHIP&&d.forEach(function(a){c.push(a[b.actorId].id)}),d},angular.noop)},j.searchMembers=function(a,b,c){return b=b||{p:0,c:200},b.o=c.o,j.getSearchMemberParams(a).searchAPI.search(b).$promise.then(function(a){return a.data})},j}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.ui.iframe.spy",[]).directive("formSpy",["$window","$timeout",function(a,b){return{scope:{spySubmit:"&"},restrict:"A",link:function(c){angular.element(a).on("message",function(a){b(function(){a.data?c.spySubmit({message:a.data}):a.originalEvent?c.spySubmit({message:a.originalEvent.data}):c.spySubmit({message:void 0})})})}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.ui.iframe",[]).directive("bonitaIframeViewer",["$timeout",function(a){return{templateUrl:"portalTemplates/user/tasks/list/common/directive/bonita-iframe-viewer.html",scope:{trigger:"=isVisible",isEditable:"=",frameUrl:"="},replace:!0,link:function(b,c){function d(c,d){return c&&d?"none"!==c.style.display&&0!==d.offsetHeight?void a(e,100,!1):void a(function(){var a=d.offsetHeight+parseInt(d.style.paddingBottom||0,10)+10;b.loading=!0,g.style.height=a+"px"},100):0===g.contentWindow.document.documentElement.offsetHeight?void a(e,100,!1):void a(function(){b.loading=!0,g.style.height=g.contentWindow.document.documentElement.offsetHeight+"px"},100)}var e,f,g=c.find("iframe")[0],h=c.find("iframe"),i=!0;b.$watch("frameUrl",function(a){if(a){if(b.loading=!1,g.contentDocument.body&&g.contentDocument.body.children.length>0){var c=g.contentDocument.getElementById("main"),j=g.contentDocument.getElementById("loading");j&&(j.style.display=""),c&&(c.style.display="none")}b.url=a,(i=!i)&&(b.url=a.replace(/^(.*\?)([^&]+)&([^&]+)(.*)$/,"$1$3&$2$4")),h.off("load"),f&&(f(),f=null),h.one("load",function(){var a=g.contentDocument.getElementById("loading"),c=g.contentDocument.getElementById("main");e=d.bind(null,a,c),b.trigger?e():f=b.$watch("trigger",function(a){a&&(f(),e())})})}})}}}])}(),function(){"use strict";angular.module("ui.focus",[]).directive("inputFocus",["$timeout",function(a){return{priority:10,restrict:"A",link:function(b,c){a(function(){c[0].focus()},30,!1)}}}])}(),function(){"use strict";angular.module("common.filters",[]).filter("moment",function(){return function(a,b){return moment(a).isValid()===!1?"-":(a=moment(a),a.year()===moment().year()&&(b=b.replace(/\s+YYYY/,"")),a.format(b))}}).filter("encodeURI",function(){return window.encodeURI})}(),function(){"use strict";angular.module("common.iframe",[]).service("iframe",["$location","$window",function(a,b){function c(b,c){var d=a.search()[c];return angular.isDefined(d)?b+c+"="+d:""}this.getTaskForm=function(a,b,d,e){var f=this.getPortalUrl()+"/portal/resource/taskInstance/<process.name>/<process.version>/<task.name>/content/?id=<task.id><tenantQueryString><localeQueryString>",g=[["<process.name>",encodeURIComponent(a.name)],["<process.version>",encodeURIComponent(a.version)],["<task.name>",encodeURIComponent(b.name)],["<task.id>",b.id],["<user.id>",d],["<tenantQueryString>",c("&","tenant")],["<localeQueryString>",c("&","locale")]],h=g.reduce(function(a,b){return a.replace(b[0],b[1])},f);return e===!1&&(h+="&displayConfirmation=false"),h},this.getCaseVisu=function(a,b){var d=this.getPortalUrl()+"/portal.js/<tenantQueryString><localeQueryString>#/admin/monitoring/<process.id>-<case.id>?diagramOnly=1",e=[["<tenantQueryString>",c("?","tenant")],["<localeQueryString>",c("&","locale")],["<process.id>",b.id],["<case.id>",a.id]];return e.reduce(function(a,b){return a.replace(b[0],b[1])},d)},this.getCaseOverview=function(a,b){var d=this.getPortalUrl()+"/portal/resource/processInstance/<process.name>/<process.version>/content/?id=<case.id><tenantQueryString><localeQueryString>",e=[["<process.name>",encodeURIComponent(b.name)],["<process.version>",encodeURIComponent(b.version)],["<case.id>",a.sourceObjectId||a.id],["<tenantQueryString>",c("&","tenant")],["<localeQueryString>",c("&","locale")]];return e.reduce(function(a,b){return a.replace(b[0],b[1])},d)},this.getPortalUrl=function(){var a=b.location.href,c=a.indexOf("/portal");return a.substring(0,c)}}])}(),function(){"use strict";angular.module("keymaster",[]).service("key",function(){return window.key.filter=function(a){var b=(a.target||a.srcElement).tagName;return!("INPUT"===b&&"checkbox"!==a.target.getAttribute("type")||"SELECT"===b||"TEXTAREA"===b)},window.key})}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.app.pref",["ngCookies","org.bonitasoft.features.user.tasks.app.config"]).service("preference",["$cookies","DEFAULT_DETAILS","COLUMNS_SETTINGS",function(a,b,c){function d(a){if(!e.hasOwnProperty(a))throw new Error("preference key not found")}var e=angular.extend({showDetails:b,lastTab:""},c);this.getMode=function(a,b){return b?"min":a?"mid":"max"},this.get=function(a){return d.call(this,a),f[a]},this.set=function(b,c,e){d.call(this,b),e=e||!1,f[b]=c,e&&a.put(b,JSON.stringify(c))},this.flush=function(){angular.forEach(e,function(b,c){a.remove(c)})};var f={};angular.forEach(e,function(b,c){f[c]=JSON.parse(a.get(c)||"null"),null===f[c]&&(f[c]=b)})}])}(),function(){"use strict";angular.module("common.screen",[]).service("screen",["$document","$window","$rootScope","$timeout",function(a,b,c,d){var e,f=10,g=a[0];this.size=!1,
this.breakpoints=[{name:"xs",size:[0,767]},{name:"sm",size:[768,991]},{name:"md",size:[992,1199]},{name:"lg",size:[1200,Number.POSITIVE_INFINITY]}],this.on=function(a){c.$on("responsive:update",a)},this.off=function(a){c.$off("responsive:update",a)},this.getWidth=function(){return g.body&&g.body.offsetWidth},this.update=function(){var a=this.getWidth(),b=this.breakpoints.filter(function(b){return a>b.size[0]&&a<b.size[1]});1===b.length&&b[0].name!==this.size.name&&(this.size=b[0],d(function(){c.$broadcast("responsive:update")}))},this.onResize=function(){e&&d.cancel(e),e=d(this.update.bind(this),f,!1)},b.addEventListener("resize",this.update.bind(this)),this.update()}])}(),function(){"use strict";angular.module("common.security",[]).factory("securityInterceptor",["$injector","$location","$log","$q","$rootScope",function(a,b,c,d,e){return{responseError:function(a){return 401===a.status&&(e.error=a,c.warn("securityInterceptor reject and close session",a)),d.reject(a)}}}]).config(["$httpProvider",function(a){a.interceptors.push("securityInterceptor")}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.app.store",["api.request","org.bonitasoft.features.user.tasks.app.config"]).service("taskListStore",["archivedFlowNodeAPI","caseAPI","archivedCaseAPI","commentAPI","processAPI","processSupervisorAPI","professionalDataAPI","$q","TASK_FILTERS","taskRequest",function(a,b,c,d,e,f,g,h,i,j){function k(a,b){return{c:0,p:0,f:b.map(function(b){return b.replace(/%userId/,a)})}}function l(a,b){var c=i[b],d=k(a,c.filters),e=c.resource.search(d).$promise;return e.then(function(a){m.count[b]=a.resource.pagination.total})}var m=this;this.processes=[],this.tasks=[],this.user=null,this.currentCase=null,this.currentTask=null,this.count={},this.request=j,this.getProcessList=function(){var a={c:0,p:0,f:["user_id="+this.user.user_id,"forPendingOrAssignedTask=true"]},b=e.search(a).$promise.then(function(b){return a.c=b.resource.pagination.total,e.search(a).$promise}).then(function(a){m.processes=[{name:"All",id:!1}].concat(a.resource),m.request.process=m.processes[0]});return b},this.getTasks=function(){var a=this.request.getRequest();a.params.f=a.params.f.map(function(a){return a.replace(/%userId/,m.user.user_id)});var b=this.tasks.indexOf(this.currentTask);return a.resource.search(a.params).$promise.then(function(a){m.tasks=a.resource,j.pagination=a.resource.pagination,m.tasks.length>0&&(b=Math.max(0,Math.min(b,m.tasks.length-1)),m.currentTask=m.tasks[b])})},this.getCaseInfo=function(a){if(!a)throw new Error("Missing parameter when requesting getCaseInfo caseId");var d=b.get({id:a,d:["started_by","processDefinitionId"]}).$promise;return d.then(function(a){m.currentCase=a},function(b){if(404===b.status){var d=c.search({p:0,c:1,f:["sourceObjectId="+a],d:["started_by","processDefinitionId"]}).$promise;return d.then(function(a){a.resource.pagination.total>0&&(m.currentCase=a.resource[0])})}})},this.getProcessSupervisors=function(a){if(!a)throw new Error("Missing parameter when requesting getProcessSupervisor processId");var b=f.search({f:["process_id="+a],c:10,p:0,d:"user_id"}).$promise;return b.then(function(a){m.currentCase.supervisors=a.resource;var b=a.resource.map(function(a){return g.get({id:a.user_id.id}).$promise.then(function(b){a.user_id.email=b.email})});return h.all(b)})},this.getHistory=function(a){return h.all({archivedFlowNodes:this.getArchivedFlowNode(a.caseId),comment:this.getComment(a.caseId)}).then(function(a){function b(a){var b=["The task",'"'+a.name+'"',"was",a.state];return a.executedBySubstitute&&a.executedBy&&a.executedBySubstitute.userName!==a.executedBy.userName&&(b=b.concat(["by",a.executedBySubstitute.userName])),b.join(" ")}function c(a){return{content:a.content||b(a),date:a.postDate||a.archivedDate}}function d(a,b){return moment(a.date).diff(b.date)}var e=a.comment.slice(),f=a.archivedFlowNodes.slice();m.currentCase.history=e.concat(f).map(c).sort(d)})},this.getComment=function(a){if(!a)throw new Error("Missing parameter when requesting getComment caseId");var b=d.search({f:["processInstanceId="+a],c:100,p:0,d:"user_id"}).$promise;return b.then(function(a){return a.resource})},this.getArchivedFlowNode=function(b){if(!b)throw new Error("Missing parameter when requesting getArchivedFlowNode caseId");var c=a.search({f:["caseId="+b,"isTerminal=true"],c:100,p:0,d:["executedBySubstitute","executedBy"]}).$promise;return c.then(function(a){return a.resource})},this.countPoolTasks=function(a){return l(a,"POOL_TASK")},this.countMyTasks=function(a){return l(a,"MY_TASK")},this.countTodoTasks=function(a){return l(a,"TODO")},this.countAll=function(){var a=l.bind(null,m.user.user_id),b=["TODO","MY_TASK","POOL_TASK"].map(a);return h.all(b)}}])}(),function(){"use strict";angular.module("api.request",["org.bonitasoft.features.user.tasks.app.config"]).constant("DEFAULT_SORT",{property:"displayName",direction:!1}).constant("PAGE_SIZES",[25,50,100]).constant("DEFAULT_PAGE_SIZE",50).service("taskRequest",["TASK_FILTERS","DEFAULT_SORT","DEFAULT_PAGE_SIZE",function(a,b,c){this.process=null,this.taskFilter=a.TODO,this.searchOption={d:["rootContainerId"]},this.search="",this.sortOption=angular.copy(b),this.pagination={numberPerPage:c},this.resetFilters=function(a){this.search=a&&a.search||"",this.sortOption=a&&a.sortOption||angular.copy(b),this.process=a&&a.process||!1},this.getRequest=function(){var a=angular.extend({},this.searchOption);return this.search&&(a.s=this.search||""),a.c=this.pagination.numberPerPage,a.p=this.pagination.currentPage-1||0,a.o=this.sortOption.property+" "+(this.sortOption.direction?"DESC":"ASC"),a.f=this.taskFilter.filters.slice(),this.process&&this.process.id&&a.f.push("processId="+this.process.id),{resource:this.taskFilter.resource,params:a}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.app.config",["org.bonitasoft.common.resources"]).service("TASK_FILTERS",["humanTaskAPI","archivedHumanTaskAPI",function(a,b){return{TODO:{title:"To do",resource:a,filters:["state=ready","user_id=%userId"]},MY_TASK:{title:"My tasks",resource:a,filters:["state=ready","assigned_id=%userId"]},POOL_TASK:{title:"Available tasks",resource:a,filters:["state=ready","assigned_id=0","user_id=%userId"]},DONE:{title:"Done tasks",resource:b,filters:["assigned_id=%userId"]}}}]).constant("DEFAULT_DETAILS",!0).constant("COLUMNS_SETTINGS",{min:[!1,!0,!1,!0,!1,!1,!1,!0,!1],mid:[!1,!0,!1,!1,!0,!1,!1,!0,!0],max:[!0,!0,!1,!0,!0,!0,!1,!0,!0]})}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.app",["org.bonitasoft.features.user.tasks.app.store","org.bonitasoft.features.user.tasks.app.pref","org.bonitasoft.features.user.tasks.app.config","api.request","org.bonitasoft.features.user.tasks.ui.iframe.spy","common.screen","common.iframe","org.bonitasoft.common.resources","org.bonitasoft.features.user.tasks.modal.form","org.bonitasoft.features.user.tasks.modal.details","org.bonitasoft.features.user.tasks.ui.switcher","ui.bootstrap.modal","ui.bootstrap.buttons","ui.bootstrap.dropdown","ngToast"]).config(["ngToastProvider",function(a){a.configure({horizontalPosition:"center"})}]).constant("FORM_SUCCESS","Form submitted.<br/>The next task in the list is now selected.").constant("FORM_ERROR","An error occurred while submitting the form.").constant("FORM_ERROR_TOO_BIG","The attachment is too big.<br/>Select a smaller attachment and submit the form again.").controller("TaskAppCtrl",["$modal","$q","taskListStore","sessionAPI","screen","iframe","preference","humanTaskAPI","processAPI","ngToast","TASK_FILTERS","PAGE_SIZES","FORM_SUCCESS","FORM_ERROR","FORM_ERROR_TOO_BIG","$timeout",function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){var q=c;this.tasks=q.tasks,this.request=q.request,this.TASK_FILTERS=k,this.PAGE_SIZES=l,this.showDetails=g.get("showDetails")===!0,this.smallScreen="sm"===e.size.name,this.showMenu=!0,this.expandDetails=!1,this.getMode=g.getMode,this.loadingTasks=!1,this.init=function(){q.user=d.get({id:"unusedId"}),q.user.$promise.then(function(){this.user=q.user,this.updateTasks(),this.updateCount(),this.updateProcessList()}.bind(this))},this.searchTask=function(){this.loadingTasks=!0,this.updateTasks()["finally"](function(){this.loadingTasks=!1}.bind(this))},this.setProcess=function(a){q.request.process=a,this.updateTasks()},this.selectTask=function(a){q.currentTask=a,this.currentTask=a,q.getCaseInfo(a.caseId).then(function(){this.currentCase=q.currentCase}.bind(this)).then(function(){return q.getProcessSupervisors(a.rootContainerId.id)}).then(function(){return q.getHistory(q.currentTask)})},this.updateTasks=function(){var a=q.getTasks().then(function(){this.tasks=q.tasks,this.currentTask=q.currentTask}.bind(this));return a.then(function(){return q.currentTask?q.getCaseInfo(q.currentTask.caseId).then(function(){return q.getProcessSupervisors(q.currentTask.rootContainerId.id)}).then(function(){return q.getHistory(q.currentTask)}):null})["finally"](function(){q.currentCase&&(this.currentCase=q.currentCase)}.bind(this)),a},this.updateCount=function(){q.countAll().then(function(){this.count=q.count}.bind(this))},this.updateAll=function(){this.updateCount(),this.updateTasks()},this.setFilter=function(a){this.expandDetails=!1,q.request.taskFilter=a,q.request.resetFilters({process:q.processes[0]})},this.updateProcessList=function(){q.getProcessList().then(function(){this.processes=q.processes}.bind(this))},this.onScreenChange=function(){this.smallScreen="sm"===e.size.name||"xs"===e.size.name},e.on(this.onScreenChange.bind(this)),this.updateLayout=function(a){g.set("showDetails",a,!0)},this.showTasksFormPopup=function(c){p(function(c,d){i.get({id:q.currentTask.processId}).$promise.then(function(e){var g,i=f.getTaskForm(e,d,c.user.user_id);if(d.assigned_id!==q.user.user_id)g=h.update({id:d.id,assigned_id:q.user.user_id}).$promise;else{var j=b.defer();j.resolve({assigned_id:q.user.user_id}),g=j.promise}g.then(function(b){return d.assigned_id=b.assigned_id,c.modaleInstance=a.open({templateUrl:"portalTemplates/user/tasks/list/tasks-modal-form.html",controller:"ModalFormCtrl",controllerAs:"modal",windowClass:"FormModal",resolve:{url:function(){return i},task:function(){return d},userId:function(){return q.user.user_id},refreshHandler:function(){return function(){c.updateAll()}}}}),c.modaleInstance.result}.bind(c)).then(function(){},function(){c.updateTasks(),c.updateCount()}.bind(c))}.bind(c))},100,!0,this,c)},this.showTaskDetailsPopup=function(b){var c=f.getTaskForm(b.rootContainerId,b,this.user.user_id),d=this;this.modaleInstance=a.open({templateUrl:"portalTemplates/user/tasks/list/tasks-modal-details.html",controller:"ModalDetailsCtrl",controllerAs:"modal",windowClass:"FormModal",resolve:{url:function(){return c},task:function(){return b},Case:function(){return q.currentCase},userId:function(){return q.user.user_id},refreshCountHandler:function(){return function(){d.updateCount()}}}}),this.modaleInstance.result.then(function(){},function(){this.updateTasks(),this.updateCount()}.bind(this))},this.changeFilter=function(a){this.setFilter(a),this.updateTasks(),this.updateCount()},this.getSize=function(){var a=12;return this.showDetails&&!this.expandDetails&&(a/=2),a},this.onFormSubmited=function(a){var b=JSON.parse(a);"error"===b.message?"fileTooBigError"===b.dataFromError||413===b.status?j.create({className:"danger",content:o}):(j.create({className:"danger",content:n}),this.updateTasks(),this.updateCount()):"success"===b.message&&(j.create(m),this.updateTasks(),this.updateCount(),this.modaleInstance&&this.modaleInstance.close())}}]).directive("taskApp",function(){return{controller:"TaskAppCtrl",controllerAs:"app",restrict:"A",link:function(a,b,c,d){d.init()}}})}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.details",["org.bonitasoft.features.user.tasks.app.store","org.bonitasoft.features.user.tasks.app.pref","org.bonitasoft.common.resources","common.filters","common.iframe","org.bonitasoft.features.user.tasks.ui.iframe","ui.bootstrap.tabs","ngToast"]).service("taskDetailsHelper",["taskListStore","preference","humanTaskAPI",function(a,b,c){this.takeReleaseTask=function(b){var d;return d=b.assigned_id===a.user.user_id?"":a.user.user_id,c.update({id:b.id,assigned_id:d}).$promise.then(function(a){b.assigned_id=a.assigned_id})},this.initTab=function(a){a.tab[b.get("lastTab")||"context"]=!0},this.saveSelectedTab=function(a){b.set("lastTab",a,!0)}}]).directive("taskDetails",["iframe","taskListStore","taskDetailsHelper","processAPI","formMappingAPI",function(a,b,c,d,e){return{restrict:"AE",templateUrl:"portalTemplates/user/tasks/list/tasks-details.html",replace:!1,scope:{currentTask:"=",currentCase:"=",refreshCount:"&",editable:"=",inactive:"=",hideForm:"=",activeTab:"@"},link:function(f,g,h){f.tab={context:!1,form:!1},h.activeTab?f.tab.context=!0:c.initTab(f),f.inactive=f.inactive||!1,f.$watch("currentCase",function(b){b&&(f.overviewUrl=a.getCaseOverview(b,b.processDefinitionId),f.diagramUrl=a.getCaseVisu(b,b.processDefinitionId))}),f.hasForm=!1,f.$watch("currentTask",function(c){c&&"USER_TASK"===f.currentTask.type&&e.search({p:0,c:1,f:["processDefinitionId="+f.currentTask.processId,"task="+f.currentTask.name,"type=TASK"]}).$promise.then(function(c){c.resource.pagination.total>0&&"NONE"===c.resource[0].target?f.hasForm=!1:(f.hasForm=!0,f.hideForm||d.get({id:f.currentTask.processId}).$promise.then(function(c){f.formUrl=a.getTaskForm(c,f.currentTask,b.user.user_id,!1)}))})}),f.onClickTab=function(a){c.saveSelectedTab(a)},f.onTakeReleaseTask=function(){c.takeReleaseTask(f.currentTask).then(function(){f.refreshCount()})}}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.filter",["ui.bootstrap.buttons","ui.bootstrap.collapse"]).directive("taskFilters",[function(){return{restrict:"AE",templateUrl:"portalTemplates/user/tasks/list/tasks-filters.html",replace:!0,scope:{taskStatus:"=filter",TASK_FILTERS:"=filters",count:"=",filterChange:"&"},link:function(a){a.setStatusTaskFilter=function(b){a.filterChange({filter:b})}}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.ui.switcher",["ui.bootstrap.buttons"]).directive("layoutSwitch",function(){return{scope:{value:"=",onChange:"&"},restrict:"AE",templateUrl:"portalTemplates/user/tasks/list/tasks-layoutswitch.html",replace:!0,link:function(a){a.changeHandler=function(b){a.onChange({showDetails:b})}}}})}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.list",["org.bonitasoft.features.user.tasks.app","org.bonitasoft.features.user.tasks.filter","org.bonitasoft.features.user.tasks.list.table","org.bonitasoft.features.user.tasks.details","ui.bootstrap.tpls","org.bonitasoft.templates","org.bonitasoft.portalTemplates","common.security","org.bonitasoft.features.user.tasks.app.config"]).config(["$stateProvider",function(a){a.state("bonita.userTasks",{url:"/user/tasks/list",templateUrl:"portalTemplates/user/tasks/list/tasks-list.html",controller:"TaskUserListCtrl",controllerAs:"taskUserListCtrl"})}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.modal.details",["ui.bootstrap.modal"]).controller("ModalDetailsCtrl",["url","task","Case","userId","refreshCountHandler","$modalInstance",function(a,b,c,d,e,f){function g(){e()}this.title=b.displayName,this.Case=c,this.task=b,this.formUrl=a,this.onRefreshCountHandler=g,this.userId=d,this.cancel=function(){f.dismiss("abort")}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.modal.form",["ui.bootstrap.modal"]).controller("ModalFormCtrl",["url","task","userId","$modalInstance","formMappingAPI",function(a,b,c,d,e){this.task=b,this.title=b.displayName,this.isFormEditable=b.assigned_id===c,this.isFormVisible=!0,this.formUrl=a,this.hasForm=!1,"USER_TASK"===b.type&&(this.hasForm=!0,e.search({p:0,c:1,f:["processDefinitionId="+b.processId,"task="+b.name,"type=TASK"]}).$promise.then(function(a){a.resource.pagination.total>0&&"NONE"===a.data[0].target&&(this.hasForm=!1)}.bind(this))),this.cancel=function(){d.dismiss("abort")}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.details").constant("COMMENT_ERROR","The task has been submitted but an error occurred while adding the comment.").directive("noForm",["$window","taskListStore","userTaskAPI","humanTaskAPI","commentAPI","ngToast","COMMENT_ERROR",function(a,b,c,d,e,f,g){return{restrict:"AE",templateUrl:"portalTemplates/user/tasks/list/tasks-no-form.html",replace:!1,scope:{currentTask:"=",editable:"=",inactive:"="},link:function(h){h.inactive=h.inactive||!1,h.onExecuteTask=function(){k(),"MANUAL_TASK"===h.currentTask.type?d.update({id:h.currentTask.id,state:"completed",executedBy:b.user.user_id},i,j):c.execute(h.currentTask.id,{}).then(i,j)};var i=function(){var b={message:"success",action:"Submit task"};a.self.postMessage(JSON.stringify(b),"*")},j=function(){var b={message:"error",action:"Submit task"};a.self.postMessage(JSON.stringify(b),"*")},k=function(){h.currentTask.comment&&e.save({userId:b.user.user_id,processInstanceId:h.currentTask.parentCaseId,content:h.currentTask.comment},function(){},function(){f.create({"class":"warning",content:g})})}}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks.list.table",["ui.router","org.bonitasoft.features.user.tasks.app.config","org.bonitasoft.features.user.tasks.app.pref","org.bonitasoft.features.user.tasks.app.store","org.bonitasoft.bonitable","org.bonitasoft.bonitable.selectable","org.bonitasoft.bonitable.sortable","org.bonitasoft.bonitable.repeatable","org.bonitasoft.bonitable.settings","ui.focus","common.filters","ui.bootstrap.pagination","ui.bootstrap.dropdown","keymaster","org.bonitasoft.services.topurl","org.bonitasoft.common.directives.bonitaHref","gettext"]).controller("TaskUserListCtrl",["$scope","$q","taskListStore","preference","TASK_FILTERS",function(a,b,c,d,e){function f(a,b){b.selected=a}function g(b){return b.assigned_id===a.user.user_id}function h(b){return b.assigned_id!==a.user.user_id}a.TASK_FILTERS=e,this.checkTask=f,this.isAssigned=g,this.isUnAssigned=h,a.canDoGroupAction=function(){return a.request.taskFilter!==e.DONE},a.colspan=function(b){if(!b)return 0;var c=b.reduce(function(a,b){return a+(b.visible?1:0)},0);return"mid"!==a.mode&&(c+=1),a.request.taskFilter!==e.DONE&&(c+=1),c+1},a.canTake=function(b){return b?a.canDoGroupAction()&&a.request.taskFilter!==e.MY_TASKS&&b.some(h):void 0},a.canRelease=function(b){return b?a.canDoGroupAction()&&a.request.taskFilter!==e.MY_TASKS&&b.some(g):void 0},a.disableProcessFilter=function(){return e.TODO!==a.request.taskFilter},a.getPaginationStatus=function(){var b=a.request.pagination,c=Math.min(b.total,b.numberPerPage);return(b.currentPage-1)*c+1+" - "+Math.min(b.currentPage*c,b.total)+" / "+b.total}}]).directive("taskList",["$q","key","humanTaskAPI","taskListStore","preference","$location","$anchorScroll","$timeout","COLUMNS_SETTINGS",function(a,b,c,d,e,f,g,h,i){return{controller:"TaskUserListCtrl",restrict:"AE",templateUrl:"portalTemplates/user/tasks/list/tasks-table.html",scope:{tasks:"=",currentTask:"=",request:"=",user:"=",mode:"=",pageSizes:"=",refreshTasks:"&",refreshCount:"&",selectTask:"&",doTask:"&",viewTask:"&"},link:function(d,j,k,l){function m(b,e,f){if(b){var g=b.filter(e).map(function(a){return c.update({id:a.id,assigned_id:f}).$promise});a.all(g).then(function(){var a=l.checkTask.bind(null,!1);d.tasks.forEach(a),d.refreshAll()})}}var n=-1;d.$watch("mode",function(a){d.columnSettings=e.get(a)||i.mid}),d.pageSizeHandler=function(a){d.request.pagination.numberPerPage=a,d.refreshTasks()},d.onClickTask=function(a){d.selectTask({task:a})},d.refreshAll=function(){d.refreshCount(),d.refreshTasks()},d.visibilityHandler=function(a,b){var c=b.map(function(a){return a.visible});e.set(d.mode,c,!0)},d.takeTasks=function(a){return m(a,l.isUnAssigned,d.user.user_id)},d.releaseTasks=function(a){return m(a,l.isAssigned,"")},d.goToDetail=function(a){f.hash(a),g()},d.onDoTask=function(a){d.doTask({task:a})},d.onViewTask=function(a){d.viewTask({task:a})},d.showTaskButtons=function(a){a.btnVisible=!0},d.hideTaskButtons=function(a){a.btnVisible=!1},d.onCheckBoxChange=function(a,c){a.stopPropagation(),h(function(){if(b.shift&&-1!==n){var d=a.target.checked;n>c&&(n+=1);var e=j[0].querySelectorAll("tbody input[type=checkbox]");[].slice.call(e,Math.min(n,c),Math.max(n,c)).filter(function(a){return a.checked!==d}).forEach(function(a){a.click()})}n=c})}}}}])}(),function(){"use strict";angular.module("org.bonitasoft.features.user.tasks",["org.bonitasoft.features.user.tasks.list"])}(),function(){"use strict";angular.module("org.bonitasoft.features.user",["org.bonitasoft.features.user.cases","org.bonitasoft.features.user.tasks","org.bonitasoft.common.utils.filters"])}(),function(){"use strict";window.console||(window.console={log:angular.noop,error:angular.noop,debug:angular.noop,warn:angular.noop}),window.console.debug||(window.console.debug=window.console.log),window.navigator.userAgent.indexOf("IE")>-1&&(document.body.className+=" isBrowser-ie"),angular.module("org.bonitasoft.portal",["ngCookies","gettext","ui.router","org.bonitasoft.service.features","org.bonitasoft.services.i18n","org.bonitasoft.common.resources","org.bonitasoft.features.admin","org.bonitasoft.features.user"]).provider("bonita",function(){this.stateResolve={translations:["i18nService",function(a){return a.translationsLoadPromise}]},this.$get=function(){return this.stateResolve}}).config(["$httpProvider",function(a){a.defaults.xsrfHeaderName=a.defaults.xsrfCookieName="X-Bonita-API-Token"}]).config(["$stateProvider","bonitaProvider",function(a,b){a.state("bonita",{template:"<ui-view/>",resolve:b.stateResolve})}])}(),angular.module("org.bonitasoft.portalTemplates",["portalTemplates/admin/applications/applications-list.html","portalTemplates/admin/applications/delete-application.html","portalTemplates/admin/applications/details/application-details-app.html","portalTemplates/admin/applications/details/application-details.html","portalTemplates/admin/applications/details/menubuilder-actionBar.html","portalTemplates/admin/applications/details/menubuilder-addCustomMenuModal.html","portalTemplates/admin/applications/details/menubuilder-menuCreator.html","portalTemplates/admin/applications/details/menubuilder-menuList.html","portalTemplates/admin/applications/details/page-list-addPageModal.html","portalTemplates/admin/applications/details/page-list.html","portalTemplates/admin/applications/details/popverunsafe.html","portalTemplates/admin/applications/edit-application-look-n-feel.html","portalTemplates/admin/applications/edit-application.html","portalTemplates/admin/applications/export-application.html","portalTemplates/admin/applications/import-application.html","portalTemplates/admin/cases/list/archived-cases-list-filters.html","portalTemplates/admin/cases/list/cases-list-deletion-modal.html","portalTemplates/admin/cases/list/cases-list-filters.html","portalTemplates/admin/cases/list/cases-list.html","portalTemplates/admin/cases/list/cases.html","portalTemplates/admin/mapping/actors.html","portalTemplates/admin/processes/details/actors-mapping.html","portalTemplates/admin/processes/details/delete-process-modal.html","portalTemplates/admin/processes/details/edit-actor-members.html","portalTemplates/admin/processes/details/information.html","portalTemplates/admin/processes/details/manage-category-mapping-modal.html","portalTemplates/admin/processes/details/menu.html","portalTemplates/admin/processes/details/params.html","portalTemplates/admin/processes/details/process-connectors.html","portalTemplates/user/cases/list/archived-cases-list-filters.html","portalTemplates/user/cases/list/cases-list-filters.html","portalTemplates/user/cases/list/cases-list.html","portalTemplates/user/cases/list/cases.html","portalTemplates/user/tasks/list/common/directive/bonita-iframe-viewer.html","portalTemplates/user/tasks/list/tasks-details.html","portalTemplates/user/tasks/list/tasks-filters.html","portalTemplates/user/tasks/list/tasks-layoutswitch.html","portalTemplates/user/tasks/list/tasks-list.html","portalTemplates/user/tasks/list/tasks-modal-details.html","portalTemplates/user/tasks/list/tasks-modal-form.html","portalTemplates/user/tasks/list/tasks-no-form.html","portalTemplates/user/tasks/list/tasks-table.html"]),angular.module("portalTemplates/admin/applications/applications-list.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/applications-list.html",'<div class="container" id="content">\n\n  <h1>{{\'Application list\' | translate}}</h1>\n\n  <p>\n    <button id="create-application" class="btn btn-primary" ng-click="applicationsListCtrl.create(\'lg\')" title="{{\'Create an application\' | translate}}">{{ \'New\' | translate}}</button>\n    <button id="import-application" class="btn btn-primary" ng-click="applicationsListCtrl.importApp(\'lg\')" title="{{ \'Import an application\' | translate }}">{{ \'Import\' | translate}}</button>\n  </p>\n\n  <section ng-if="noData">\n    <p class="text-muted" id="no-data-header">{{ \'No application available.\' | translate}}</p>\n    <p id="no-data-message">\n      {{\'To create an application, click New or Import.\' | translate}}\n      <br>\n      {{\'An application is a customized environment for a specific user profile, in which users interact with business data and business processes in the most efficient way.\' | translate}}\n    </p>\n  </section>\n\n  <table ng-if="!noData" class="table resizable app-container-list" bonitable sort-options="sortableOptions" bo-storable="applications-list">\n    <thead>\n      <tr>\n        <th bo-sorter="displayName" id="application-display-name" class="table-column-large" title="{{\'Sort by name\' | translate }}" bo-sorter-title-desc="{{\'Sort by name\' | translate }} Desc" bo-sorter-title-asc="{{\'Sort by name\' | translate }} Asc">{{ \'Name\' | translate }}</th>\n        <th bo-sorter="version" id="application-version" class="table-column-xs" title="{{\'Sort by version\' | translate }}" bo-sorter-title-desc="{{\'Sort by version\' | translate }} Desc" bo-sorter-title-asc="{{\'Sort by version\' | translate }} Asc">{{\'Version\' | translate}}</th>\n        <th bo-sorter="token" id="application-path" title="{{\'Sort by URL\' | translate }}" bo-sorter-title-desc="{{\'Sort by URL\' | translate }} Desc" bo-sorter-title-asc="{{\'Sort by URL\' | translate }} Asc">{{\'URL\' | translate}}</th>\n        <th id="application-profile" class="table-column-xs">{{\'Profile\' | translate}}</th>\n        <th bo-sorter="lastUpdateDate" id="application-last-update-date" class="table-column-xs" title="{{\'Sort by updated on\' | translate }}" bo-sorter-title-desc="{{\'Sort by updated on\' | translate }} Desc" bo-sorter-title-asc="{{\'Sort by updated on\' | translate }} Asc">{{\'Updated on\' | translate}}</th>\n        <th data-noresize class="table-column-xs table-header-actions">{{\'Actions\' | translate}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr class="table-row table-row-{{$index}}" ng-repeat="application in applications | orderBy: sortableOptions.property : sortableOptions.direction track by $index">\n        <td class="application-display-name" title="{{ application.displayName }}">{{ application.displayName }}</td>\n        <td class="application-version" title="{{ application.version }}">{{ application.version }}</td>\n        <td class="application-path">\n          <a target="_blank" title="../apps/{{ application.token }}" ng-href="../apps/{{ application.token }}" ng-disabled="!application.profileId.name"> ../apps/{{application.token}}</a>\n        </td>\n        <td ng-if="application.profileId.name" class="application-profile" title="{{ application.profileId.name }}">{{ application.profileId.name }}</td>\n        <td ng-if="!application.profileId.name" class="application-profile"><span tooltip="{{ \'No profile mapped to this application\' | translate }}" class="glyphicon glyphicon-warning-sign text-warning"></span></td>\n        <td class="application-last-update-date" aria-label="{{ application.lastUpdateDate | dateI18n:\'YYYY-MM-DD HH:mm:ss\'}}">\n          <span class="clickable" popover="{{applicationsListCtrl.loadTemplatePopover(application)}}" popover-trigger="mouseenter">{{ application.lastUpdateDate | dateAgo }}</span>\n        </td>\n        <td class="application-actions">\n          <div class="btn-group">\n            <button bonita-href="{ \'token\': \'applicationslistingadmin\', \'_id\': application.id }" class="glyphicon glyphicon-option-horizontal btn-action-edit" title="{{\'Edit\' | translate}}" aria-label="{{\'Edit\' | translate}}"></button>\n            <button class="glyphicon glyphicon-export btn-action-export" title="{{\'Export\' | translate}}" aria-label="{{\'Export\' | translate}}" ng-click="applicationsListCtrl.exportApplication(application, \'sm\')"></button>\n          </div>\n          <button class="glyphicon glyphicon-trash btn-action-delete" aria-label="{{\'Delete\' | translate}}" title="{{\'Delete\' | translate}}" ng-click="applicationsListCtrl.deleteApplication(application, \'sm\')"></button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/delete-application.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/delete-application.html",'<div class="modal-header">\n    <h3 class="modal-title">{{\'Delete application\' | translate}}</h3>\n</div>\n<div class="modal-body">\n    <p>{{ \'The application\' | translate }} <i>{{application.displayName||application.name}}</i> {{\'will be permanently deleted.\' | translate}}</p>\n</div>\n\n<div class="modal-footer">\n    <div class="form-group has-feedback">\n        <div>\n            <button id="confirm" type="submit" class="btn btn-primary" ng-click="confirmDelete(applicationId)" >{{\'Delete\' | translate}}</button>\n            <button id="cancel" type="submit" class="btn btn-default" ng-click="cancel()">{{\'Cancel\' | translate}}</button>\n        </div>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/details/application-details-app.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/application-details-app.html","<div class=\"popover-item-content\">\n\n  <dl class=\"popover-item-def\">\n    <dt>{{'Creation' | translate}}</dt>\n    <dd>{{createdBy.firstname | ucfirst }} {{createdBy.lastname | ucfirst}} - {{creationDate | dateI18n:'YYYY-MM-DD HH:mm' }}</dd>\n\n  </dl>\n\n  <dl class=\"popover-item-def\">\n   <dt>{{'Update' | translate}}</dt>\n   <dd>{{updatedBy.firstname | ucfirst }} {{updatedBy.lastname | ucfirst }} - {{lastUpdateDate | dateI18n:'YYYY-MM-DD HH:mm' }}</dd>\n  </dl>\n</div>\n")}]),angular.module("portalTemplates/admin/applications/details/application-details.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/application-details.html",'<div id="app-details-container" class="container">\n  <div class="btn-toolbar actions">\n    <div class="col-md-2"><back-button></back-button></div>\n    <div class="col-md-10 text-right"><button id="app-edit-btn" class="btn btn-primary" ng-click="applicationDetailsCtrl.update(\'lg\', app )" aria-label="{{\'Edit\' | translate}}">{{\'Edit\' | translate}}</button></div>\n  </div>\n  <div id="app-edit-section" class="app-details-container col-md-12">\n    <h1 id="app-details-title">{{app.displayName}} ({{app.version}})</h1>\n    <div class="panel panel-default">\n      <div class="panel-body">\n        <p id="app-details-description" class="type-info">{{ app.description }}</p>\n        <div class="row">\n          <div class="col-md-4">\n            <dl class="dl-horizontal app-details-col">\n              <dt id="app-path-label">{{\'URL\' | translate}}</dt>\n              <dd id="app-path-value"><a target="_blank" title="../apps/{{ app.token }}" ng-href="../apps/{{ app.token }}">../apps/{{ app.token }}</a></dd>\n              <dt id="app-profile-label">{{\'Profile\' | translate}}</dt>\n              <dd id="app-profile-value">{{ app.profileId.name}}</dd>\n            </dl>\n          </div>\n          <div class="col-md-4">\n            <dl class="dl-horizontal">\n              <dt id="app-creation-on-label">{{\'Creation on\' | translate}}</dt>\n              <dd id="app-creation-on-value">{{ app.creationDate | dateI18n:\'YYYY-MM-DD HH:mm:ss\'}}</dd>\n              <dt id="app-created-by-label">{{\'Created by\' | translate}}</dt>\n              <dd id="app-created-by-value">{{ app.createdBy.firstname }} {{app.createdBy.lastname}}</dd>\n            </dl>\n          </div>\n          <div class="col-md-4">\n            <dl class="dl-horizontal">\n              <dt id="app-updated-on-label">{{\'Updated on\' | translate}}</dt>\n              <dd id="app-updated-on-value">{{ app.lastUpdateDate | dateI18n:\'YYYY-MM-DD HH:mm:ss\'}}</dd>\n              <dt id="app-updated-by-label">{{\'Updated by\' | translate}}</dt>\n              <dd id="app-updated-by-value">{{ app.updatedBy.firstname }} {{ app.updatedBy.lastname }}</dd>\n            </dl>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="look-n-feel-edit-section" class="col-md-12">\n    <h2>{{\'Look & Feel\' | translate}}</h2>\n    <div class="panel panel-default">\n      <div class="row panel-body">\n        <div class="col-md-6">\n          <dl class="dl-horizontal app-details-col">\n            <dt id="app-layout-label">{{\'Layout\' | translate}}</dt>\n            <dd id="app-layout-value">\n              <div  ng-if="!applicationDetailsCtrl.isEditLayoutAvailable">{{app.layoutId.displayName}}</div>\n              <a  ng-if="applicationDetailsCtrl.isEditLayoutAvailable"  href="" editable-select="app.layoutId" onbeforesave="applicationDetailsCtrl.updateLayout(app, $data)" e-ng-options="layoutPage as layoutPage.displayName for layoutPage in layoutPages track by layoutPage.id">{{ app.layoutId.displayName }}</a>\n            </dd>\n          </dl>\n        </div>\n        <div class="col-md-6">\n          <dl class="dl-horizontal app-details-col">\n            <dt id="app-theme-label">{{\'Theme\' | translate}}</dt>\n            <dd id="app-theme-value">\n              <div  ng-if="!applicationDetailsCtrl.isEditLayoutAvailable">{{app.themeId.displayName}}</div>\n              <a  ng-if="applicationDetailsCtrl.isEditLayoutAvailable"  href="" editable-select="app.themeId" onbeforesave="applicationDetailsCtrl.updateTheme(app, $data)"\n                  e-ng-options="themePage as themePage.displayName for themePage in themePages track by themePage.id">{{ app.themeId.displayName }}</a>\n            </dd>\n          </dl>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div id="application-page-list-section" ng-if="app.id">\n    <page-list id="page-list" application="app" class="col-md-6"></page-list>\n    <menu-creator id="menu-creator" app="app" class="col-md-6 menu-creator"></menu-creator>\n  </div>\n</div>\n');
}]),angular.module("portalTemplates/admin/applications/details/menubuilder-actionBar.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/menubuilder-actionBar.html",'<div class="circle-indicator" data-nodrag="" ng-if="menu.parentMenuId === \'-1\' || !menu.parentMenuId"></div>\n<span ng-transclude></span>\n<button class="clickable glyphicon glyphicon-trash btn-action-remove pull-right" ng-click="actionBarCtrl.removeItem(this, menu)" ng-if="remove !== \'false\'" title="{{ \'Delete\' | translate }}" aria-label="{{ \'Delete\' | translate }}"></button>\n<button class="clickable glyphicon glyphicon-pencil btn-action-edit pull-right" ng-click="actionBarCtrl.editItem(this, menu)" ng-if="edit !== \'false\'" title="{{ \'Edit\' | translate }}" aria-label="{{ \'Edit\' | translate }}"></button>\n<button class="clickable glyphicon glyphicon-plus btn-action-add pull-right" ng-click="actionBarCtrl.addItem(this, menu)" ng-if="add !== \'false\'  && (!menu.applicationPageId || menu.applicationPageId === \'-1\')" title="{{ \'Add menu item\' | translate }}" aria-label="{{ \'Add menu item\' | translate }}"></button>\n')}]),angular.module("portalTemplates/admin/applications/details/menubuilder-addCustomMenuModal.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/menubuilder-addCustomMenuModal.html",'<form role="form" name="menu.form" novalidate>\n\n  <header class="modal-header">\n\n    <h3 class="modal-title" ng-if="!isEdition && !isAddition">{{ \'Add menu\' | translate}}</h3>\n    <h3 class="modal-title" ng-if="isAddition">{{ \'Add menu item\' | translate}}</h3>\n    <h3 class="modal-title" ng-if="isEdition && isEditionParentMenu">{{ \'Edit menu\' | translate}}</h3>\n    <h3 class="modal-title" ng-if="isEdition && !isEditionParentMenu">{{ \'Edit menu item\' | translate}}</h3>\n  </header>\n  <div class="modal-body">\n\n    <section ng-show="!isEdition && !isAddition" class="menu-choice-container">\n\n      <div class="row">\n        <div class="col-md-11 col-centered">\n\n          <div class="radio-inline">\n            <label class="label-choice-inline">\n              <input type="radio" name="typeMenu" id="setTopLevelMenu" ng-model="isLabelOnly"  value="inactive">\n              {{\'One-page menu\' | translate}}\n            </label>\n            <label class="label-choice-inline">\n              <input type="radio" name="typeMenu" id="setpageMenu"  ng-model="isLabelOnly" value="active" ng-change="menu.model.page = null">\n              {{\'Multi-page menu\' | translate}}\n            </label>\n          </div>\n\n        </div>\n\n      </div>\n    </section>\n\n    <bootstrap-form-control\n      form="menu.form"\n      label="{{\'Name\' | translate}}"\n      errors="{ $invalid: i18n.mandatory, $duplicate: i18n.duplicateName }">\n\n      <input type="text" id="name" name="name" ng-model="menu.model.name" autofocus required ng-trim="false"/>\n    </bootstrap-form-control>\n\n    <p ng-if="\'active\' === isLabelOnly && !(isAddition || isEdition)">{{\'Add pages in Navigation\' | translate}}</p>\n\n    <bootstrap-form-control\n      form="menu.form"\n      label="{{\'Page\' | translate}}"\n      class="form-menu-pages select-form-container"\n      ng-if="\'inactive\' === isLabelOnly || ((isAddition || isEdition) && \'inactive\' === isLabelOnly)">\n      <select name="Page" id="page" required ng-model="menu.model.page">\n        <option ng-repeat="page in pages track by $index" value="{{page.id}}" ng-selected="currentSelectedPageId == page.id">\n          {{ page.pageId.displayName }} - {{ page.token }}\n        </option>\n      </select>\n      <i>{{\'Select the page\' | translate}}</i>\n    </bootstrap-form-control>\n\n\n  </div>\n\n  <footer class="modal-footer modal-menu-footer">\n    <button id="add-page-pop-up-add-btn" class="btn btn-primary" ng-click="addCustomMenuCtrl.saveModal(menu)" ng-disabled="menu.form.$invalid" >{{ isEdition ? \'Save\' : \'Add\' | translate}}</button>\n\n    <button type="button" id="add-page-pop-up-cancel-btn" class="btn btn-default" ng-click="addCustomMenuCtrl.cancel()">{{\'Cancel\' | translate}}</button>\n  </footer>\n</form>\n')}]),angular.module("portalTemplates/admin/applications/details/menubuilder-menuCreator.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/menubuilder-menuCreator.html",'<header class="page-header">\n<h2>{{ \'Navigation\' | translate }}</h2>\n</header>\n\n<div class="col-md-3">\n    <button id="menu-list-add-button" ng-click="menuCreatorCtrl.add()" ng-disabled="!hasPages" class="btn btn-primary"\n            title="{{\'Add top-level menu\' | translate}}">{{ \'Add\' | translate }}\n    </button>\n</div>\n<div class="col-md-9">\n  <div class="jumbotron" ng-if="!data.menuItemBuilder.length">\n    <em>{{ \'Specify the menu structure.\' | translate }}<br> {{ \'You must add a page before you can reference it in a\n      menu.\' | translate }}</em>\n  </div>\n  <menu-list ng-model="data.menuItemBuilder" ng-if="data.menuItemBuilder.length"></menu-list>\n</div>\n\n')}]),angular.module("portalTemplates/admin/applications/details/menubuilder-menuList.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/menubuilder-menuList.html",'<div class="container-menubuilder" ui-tree="treeOptions" data-max-depth="2">\n\n  <ul class="list-group" ui-tree-nodes="" data-ng-model="model">\n\n    <li class="list-group-item" data-ng-repeat="menu in model" ui-tree-node ng-class="{\'menucontainer-has-submenu-items\': !menu.applicationPageId || menu.applicationPageId === \'-1\', \'menucontainer-no-submenu-items\': menu.applicationPageId && menu.applicationPageId !== \'-1\'}">\n         <div ui-tree-handle ng-class="{\'hidden-submenu\': collapsed}">\n           <action-bar collapsed="collapsed" menu="menu" data="data">{{menu.displayName}}</action-bar>\n         </div>\n\n         <ul ui-tree-nodes="" ng-if="!menu.applicationPageId || menu.applicationPageId === \'-1\'" data-ng-model="menu.children" ng-class="{\'menucontainer-submenu-exist\':menu.children.length,\'menucontainer-submenu\':!menu.children.length}" ><li data-ng-repeat="subItem in menu.children"  ui-tree-node>\n             <div ui-tree-handle>\n                <action-bar add="false" menu="subItem" data="data">{{subItem.displayName}}</action-bar>\n             </div>\n           </li></ul>\n\n       </li>\n  </ul>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/details/page-list-addPageModal.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/page-list-addPageModal.html",'<form role="form" name="page.form" novalidate>\n  <div class="modal-header">\n    <h3 class="modal-title">{{ \'Add page\' | translate }}</h3>\n  </div>\n\n  <div class="modal-body">\n    <alert ng-repeat="alert in alerts track by $id(alert)" type="{{ alert.type }}" close="closeAlert($index)">{{alert.msg}}</alert>\n    <bootstrap-form-control\n      id="page-form-control"\n      form="page.form"\n      label="{{ \'Page\' | translate }}"\n      errors="{ $invalid: i18n.mandatory }"\n      class="select-form-container">\n      <select name="Page" id="page" ng-model="page.model.pageId" required>\n        <option ng-repeat="customPage in customPages" value="{{ customPage.id }}">\n          {{ customPage.urlToken }} - {{ customPage.displayName }}\n        </option>\n      </select>\n    </bootstrap-form-control>\n\n    <bootstrap-form-control\n      id="url-form-control"\n      form="page.form"\n      label="{{ \'URL\' | translate }}"\n      errors="{ $invalid: i18n.mandatory, $duplicate: i18n.duplicateUrl, $reservedToken: i18n.reservedToken}">\n      <div class="input-group">\n        <span class="input-group-addon">../apps/{{application.token}}/</span>\n        <input type="text" id="token" name="token" ng-model="page.model.token" required urlified ng-trim="false"/>\n      </div>\n    </bootstrap-form-control>\n\n  </div>\n  <div class="modal-footer">\n    <button id="add-page-pop-up-add-btn" class="btn btn-primary" type="submit" ng-click="add(page)" ng-disabled="page.form.$invalid">{{\'Add\' | translate}}\n    </button>\n    <button id="add-page-pop-up-cancel-btn" class="btn btn-default" ng-click="cancel()">{{\'Cancel\' | translate}}</button>\n  </div>\n</form>\n')}]),angular.module("portalTemplates/admin/applications/details/page-list.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/page-list.html",'<header class="page-header">\n  <h2>{{\'Pages\' | translate}}</h2>\n</header>\n<div class="col-md-3">\n  <button id="page-list-add-button" ng-click="list.add()" class="btn btn-primary" title="{{ \'Add from custom pages\' | translate }}">{{\'Add\' | translate}}</button>\n</div>\n<div class="col-md-9">\n  <table class="table table-condensed">\n    <tbody>\n      <tr ng-repeat="page in pages track by $index" class="table-row table-row-{{$index}}"\n      ng-class="{\'page-is-home\': application.homePageId == page.id}">\n        <td class="page-name">\n          {{ page.token }} - <em>{{ page.pageId.displayName }}</em>\n        </td>\n        <td class="td-small">\n          <button class="btn-action-sethome clickable glyphicon glyphicon-home"\n              title="{{\'Set as Home page\' | translate}}"\n              ng-click="list.setAsHomePage(page)">\n            <span aria-hidden="true">{{\'Set as Home page\' | translate}}</span>\n          </button>\n        </td>\n        <td class="td-small">\n          <button class="btn-action-delete clickable glyphicon glyphicon-trash"\n              title="{{\'Remove\' | translate}}"\n              ng-if="application.homePageId != page.id"\n              ng-click="list.remove(page)">\n            <span aria-hidden="true">{{\'Remove\' | translate}}</span>\n          </button>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/details/popverunsafe.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/details/popverunsafe.html",'<div class="popover {{placement}}" ng-class="{ in: isOpen(), fade: animation() }">\n  <div class="arrow"></div>\n\n  <div class="popover-inner">\n      <h3 class="popover-title" ng-bind="title" ng-show="title"></h3>\n      <div class="popover-content" bind-html-unsafe="content"></div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/edit-application-look-n-feel.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/edit-application-look-n-feel.html",'<form role="form" name="application.form" novalidate>\n  <div class="modal-header">\n    <h3 class="modal-title">{{ editionMode ? "Edit" : "Create" |\n     translate }} {{\'an Application\' | translate}}</h3>\n  </div>\n  <div class="modal-body">\n\n    <alert ng-repeat="alert in alerts" type="{{ alert.type }}" close="closeAlert($index)">{{alert.msg}}</alert>\n    <bootstrap-form-control form="application.form" class="select-form-container" label="{{ \'Layout\' | translate }}">\n      <select id="profile"\n              name="profile" ng-model="application.model.layoutId"\n              ng-options="layoutPage.id as layoutPage.urlToken + \' - \' + layoutPage.displayName for layoutPage in layoutPages"></select>\n\n\n    </bootstrap-form-control>\n\n    <bootstrap-form-control form="application.form" class="select-form-container" label="{{ \'Theme\' | translate }}">\n      <select id="theme"\n              name="layout" ng-model="application.model.themeId">\n        <option ng-repeat="layoutPage in layoutPages" value="{{ layoutPage.id }}">\n          {{ layoutPage.urlToken }} - {{ layoutPage.displayName }}\n        </option>\n      </select>\n    </bootstrap-form-control>\n  </div>\n  <div class="modal-footer">\n    <div class="form-group has-feedback">\n      <div>\n        <button id="btn-submit" type="submit" class="btn btn-primary" ng-disabled="application.form.$invalid"\n                ng-click="submit(application)">{{ "Save" | translate }}\n        </button>\n        <button id="btn-cancel" type="submit" class="btn btn-default" ng-click="cancel()">{{ \'Cancel\' | translate}}</button>\n      </div>\n    </div>\n  </div>\n</form>\n')}]),angular.module("portalTemplates/admin/applications/edit-application.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/edit-application.html",'<form role="form" name="application.form" novalidate>\n  <div class="modal-header">\n    <h3 class="modal-title">{{ editionMode ? "Edit" : "Create" |\n     translate }} {{\'an application\' | translate}}</h3>\n  </div>\n  <div class="modal-body">\n\n    <alert ng-repeat="alert in alerts" type="{{ alert.type }}" close="closeAlert($index)">{{alert.msg}}</alert>\n\n    <bootstrap-form-control\n      id="display-name-form-control"\n      form="application.form"\n      label="{{ \'Display name\' | translate }}"\n      errors="{ $invalid: i18n.mandatory }">\n      <input type="text"\n             id="display-name"\n             name="displayName"\n             ng-model="application.model.displayName"\n             maxlength="255" required/>\n    </bootstrap-form-control>\n\n    <bootstrap-form-control\n      id="url-form-control"\n      form="application.form"\n      label="{{ \'URL\' | translate }}"\n      errors="{ $invalid: i18n.mandatory, $duplicate: i18n.duplicateUrl, $reservedToken: i18n.reservedToken}">\n      <div class="input-group">\n        <span class="input-group-addon">../apps/</span>\n        <input type="text"\n               id="url"\n               name="token"\n               ng-model="application.model.token"\n               maxlength="50"\n               urlified required ng-trim="false"/>\n      </div>\n\n    </bootstrap-form-control>\n\n    <bootstrap-form-control\n      id="version-form-control"\n      form="application.form"\n      label="{{ \'Version\' | translate }}"\n      errors="{ $invalid: i18n.mandatory }">\n      <input type="text"\n             id="version"\n             name="version"\n             ng-model="application.model.version"\n             maxlength="50" required/>\n    </bootstrap-form-control>\n\n    <bootstrap-form-control form="application.form" class="select-form-container" label="{{ \'Profile\' | translate }}">\n      <select id="profile"\n              name="profile" ng-model="application.model.profileId"\n              ng-options="profile.id as profile.name for profile in profiles" required></select>\n    </bootstrap-form-control>\n\n\n    <bootstrap-form-control form="application.form" label="{{\'Description\' | translate}}">\n      <textarea id="description"\n                name="description"\n                ng-model="application.model.description"\n                maxlength="1024"></textarea>\n    </bootstrap-form-control>\n  </div>\n\n  <div class="modal-footer">\n    <div class="form-group has-feedback">\n      <div>\n        <button id="btn-submit" type="submit" class="btn btn-primary" ng-disabled="application.form.$invalid"\n                ng-click="submit(application)">{{ editionMode ? "Save" : "Create" | translate }}\n        </button>\n        <button id="btn-cancel" type="submit" class="btn btn-default" ng-click="cancel()">{{ \'Cancel\' | translate}}</button>\n      </div>\n    </div>\n  </div>\n</form>\n')}]),angular.module("portalTemplates/admin/applications/export-application.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/export-application.html",'<div class="modal-header">\n    <h3 class="modal-title">{{ \'Export application\' | translate}}</h3>\n</div>\n<div class="modal-body">\n    <p>{{\'You are about to export the application\' | translate}} <i>{{application.displayName||application.name}}</i>.<br> {{\'When you export an application, pages and profiles are not exported in the file.\' | translate}}</p>\n</div>\n\n<div class="modal-footer">\n  <div class="form-group has-feedback">\n    <export-app-button\n      id="confirm"\n      app-id="{{application.id}}"\n      class="btn btn-primary"\n      ng-click="exportApplicationCtrl.cancel()"\n      >{{\'Export\' | translate}}\n    </export-app-button>\n    <button\n      id="cancel"\n      class="btn btn-default"\n      ng-click="exportApplicationCtrl.cancel()">{{\'Cancel\' | translate}}\n    </button>\n   </div>\n</div>\n')}]),angular.module("portalTemplates/admin/applications/import-application.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/applications/import-application.html",'<form role="form" name="form" novalidate>\n  <div class="modal-header">\n    <h3 class="modal-title" ng-if="!importIsSuccessfull && !importNotSuccessfull">{{\'Import an application\' | translate}}</h3>\n    <h3 class="modal-title" ng-if="importIsSuccessfull">{{\'Status of import\' | translate}}</h3>\n    <h3 class="modal-title" ng-if="importNotSuccessfull">{{\'Error\' | translate}}</h3>\n  </div>\n  <div class="modal-body">\n\n    <section id="beforeImport" ng-if="!importIsSuccessfull && !importNotSuccessfull">\n      <p>{{ \'Before you import the application, the pages and the profile must already be loaded in the Portal.\' | translate }}</p>\n\n      <bootstrap-form-control\n        class="field-upload-container"\n        form="form"\n        label="{{\'Application XML file\' | translate}}">\n\n        <div class="upload-field">\n          <input type="file" id="importAppXml" name="import-file" ng-model="importFile.file" required nv-file-select uploader="uploader" accept=".xml">\n          <div class="upload-field-content" ng-class="{\'upload-success\': isUploadSuccess}"><span ng-if="fileName">{{fileName}}</span><span ng-if="!fileName">{{ \'Click here to choose your file. XML file (.xml)\' | translate }}</span></div>\n        </div>\n\n      </bootstrap-form-control>\n    </section>\n\n    <section id="afterImport" ng-if="importIsSuccessfull" >\n\n      <div class="import-status">\n        <p ng-if="!errorsApi.length">1 {{\'application has been successfully imported, with complete page mapping and menu mapping.\' | translate}}</p>\n\n        <p ng-if="errorsApi.length">1 {{\'application has been partially imported. The following items are not loaded in the Portal.\' | translate}}</p>\n\n        <ul>\n          <li ng-repeat="imported in imports track by $index">{{\'URL\' | translate }}: ../apps/{{ imported.name}}</li>\n        </ul>\n\n        <ul ng-if="errorsApi.length">\n          <li ng-repeat="error in errorsApi track by $index">\n            <span arial-label="application">{{\'URL\' | translate }}: ../apps/{{ error.name}}</span>\n\n            <ul ng-repeat="(key, value) in error.errors track by $index">\n              <li ng-repeat="label in value track by $index">{{label}}  {{ key | lowercase | ucfirst }}</li>\n            </ul>\n          </li>\n        </ul>\n      </div>\n    </section>\n\n    <section id="afterImportError" ng-if="importNotSuccessfull">\n      <p>{{messageError}}.</p>\n    </section>\n\n  </div>\n\n  <div class="modal-footer">\n      <div class="form-group has-feedback">\n          <div class="col-md-12 col-centered-text center-block">\n              <button\n                ng-if="!importIsSuccessfull && !importNotSuccessfull"\n                id="confirm"\n                ng-disabled="!isUploadSuccess"\n                class="btn btn-primary"\n                ng-click="importApplicationCtrl.importApp()">{{ \'Import\' | translate }}\n              </button>\n              <button\n                ng-if="!importIsSuccessfull && !importNotSuccessfull"\n                id="cancel"\n                class="btn btn-default"\n                ng-click="importApplicationCtrl.cancel()">{{ \'Cancel\' | translate }}\n              </button>\n\n              <button\n                ng-if="importIsSuccessfull"\n                id="cancel"\n                class="btn btn-default"\n                ng-click="importApplicationCtrl.closeModalSuccess()">{{ \'Close\' | translate }}\n              </button>\n\n              <button\n                ng-if="importNotSuccessfull"\n                id="cancel"\n                class="btn btn-default center-block"\n                ng-click="importApplicationCtrl.cancel()">{{ \'Close\' | translate }}\n              </button>\n          </div>\n      </div>\n  </div>\n</form>\n')}]),angular.module("portalTemplates/admin/cases/list/archived-cases-list-filters.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/cases/list/archived-cases-list-filters.html",'<div id="case-filters" class="panel panel-default">\n\n  <div class="panel-heading title">{{ \'Filters\' | translate }}</div>\n  <div class="panel-body">\n    <div class="col-md-3 button-filter"> {{ \'Process name\' | translate }}\n      <div class="btn-group" dropdown id="case-app-name-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle ">{{selectedFilters.selectedApp | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterCtrl.selectApp(defaultFilters.appName)"><a>{{defaultFilters.appName | translate}}</a></li>\n          <li ng-if="appNames &amp;&amp; appNames.length>0" class="divider"></li>\n          <li ng-repeat="appName in appNames" ng-click="filterCtrl.selectApp(appName)"><a>{{appName}}</a></li>\n        </ul>\n      </div>\n    </div>\n\n    <div class="col-md-3 button-filter">{{\'Process version\' | translate }}\n      <div class="btn-group" dropdown id="case-app-version-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle " ng-disabled="selectedFilters.selectedApp  === defaultFilters.appName">{{selectedFilters.selectedVersion | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterCtrl.selectVersion(defaultFilters.appVersion)"><a>{{defaultFilters.appVersion | translate}}</a></li>\n          <li class="divider"></li>\n          <li ng-repeat="version in versions" ng-click="filterCtrl.selectVersion(version)"><a>{{version}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">\n    </div>\n    <div class="col-md-3 button-filter">\n      <form role="form" name="searchForm" novalidate ng-submit="filterCtrl.submitSearch()">\n          <div class="input-group">\n            <input type="text" class="form-control" ng-model="selectedFilters.currentSearch" name="searchField" id="case-list-search" placeholder="{{ \'Search...\' | translate }}">\n            <span ng-click="filterCtrl.submitSearch()" class="input-group-addon pointer"><span class="glyphicon glyphicon-search"></span></span>\n          </div>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/cases/list/cases-list-deletion-modal.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/cases/list/cases-list-deletion-modal.html",'<div class="modal-header">\n  <h3 class="modal-title">{{ \'Confirm delete?\' | translate }}</h3>\n</div>\n\n<div ng-if="\'archived\' !==  typeOfCase">\n  <div class="modal-body" ng-if="1 === caseItems.length">\n    {{ \'The deleted case will be permanently deleted and will not be stored in the archives.\' | translate }}\n  </div>\n\n  <div class="modal-body" ng-if="caseItems.length > 1">\n    {{ \'These deleted cases will be permanently deleted and will not be stored in the archives.\' | translate }}\n  </div>\n</div>\n\n<div ng-if="\'archived\' === typeOfCase ">\n  <div class="modal-body" ng-if="1 === caseItems.length">\n    {{ \'The deleted case will be permanently deleted from the archives.\' | translate }}\n  </div>\n\n  <div class="modal-body" ng-if="caseItems.length > 1">\n    {{ \'These deleted cases will be permanently deleted from the archives.\' | translate }}\n  </div>\n</div>\n\n<div class="modal-footer">\n    <button id="ValidateCaseDeletionBtn" class="btn btn-primary" ng-click="deleteCaseModalCtrl.ok()">{{ \'Delete\' | translate }}</button>\n    <button id="CancelCaseDeletionBtn" class="btn btn-default" ng-click="deleteCaseModalCtrl.cancel()">{{ \'Cancel\' | translate }}</button>\n</div>\n')}]),angular.module("portalTemplates/admin/cases/list/cases-list-filters.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/cases/list/cases-list-filters.html",'<div id="case-filters" class="panel panel-default">\n  <div class="panel-heading title">{{\'Filters\' | translate}}</div>\n  <div class="panel-body">\n    <div class="col-md-3 button-filter">{{\'Process name\' | translate}}\n      <div class="btn-group" dropdown id="case-app-name-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{selectedFilters.selectedApp | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterCtrl.selectApp(defaultFilters.appName)"><a>{{defaultFilters.appName | translate}}</a></li>\n          <li ng-if="appNames &amp;&amp; appNames.length>0" class="divider"></li>\n          <li ng-repeat="appName in appNames" ng-click="filterCtrl.selectApp(appName)"><a>{{appName}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">{{\'Process version\' | translate}}\n      <div class="btn-group" dropdown id="case-app-version-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle" ng-disabled="selectedFilters.selectedApp  === defaultFilters.appName">{{selectedFilters.selectedVersion | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterCtrl.selectVersion(defaultFilters.appVersion)"><a>{{defaultFilters.appVersion | translate}}</a></li>\n          <li class="divider"></li>\n          <li ng-repeat="version in versions" ng-click="filterCtrl.selectVersion(version)"><a>{{version}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">{{\'Case state\' | translate}}\n      <div class="btn-group" dropdown id="case-app-status-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{caseStatesValues[selectedFilters.selectedStatus] | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterCtrl.selectCaseStatus(defaultFilters.caseStatus)"><a>{{defaultFilters.caseStatus | translate}}</a></li>\n          <li class="divider"></li>\n          <li ng-click="filterCtrl.selectCaseStatus(\'error\')"><a>{{\'With failures\' | translate}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3">\n      <form role="form" name="searchForm" novalidate ng-submit="filterCtrl.submitSearch()">\n        <div class="input-group">\n          <input type="text" class="form-control" ng-model="selectedFilters.currentSearch" name="searchField" id="case-list-search" placeholder="{{ \'Search...\' | translate }}">\n          <span ng-click="filterCtrl.submitSearch()" class="input-group-addon pointer"><span class="glyphicon glyphicon-search"></span></span>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/cases/list/cases-list.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/cases/list/cases-list.html",'<div>\n\n  <div ng-switch on="archivedTabName">\n    <archived-case-filters ng-switch-when="true"> </archived-case-filters>\n    <active-case-filters ng-switch-default> </active-case-filters>\n  </div>\n  <div class="panel panel-default">\n\n    <div class="panel-heading title">{{ \'Case list\' | translate }} <span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{\'Only cases from root processes are displayed in the table below. No details are available for cases started by call activities.\' | translate}}" popover-trigger="mouseenter"></span> <span ng-click="caseCtrl.reinitCases()" tooltip="{{ \'Refresh\' | translate}}" tooltip-animation="false" tooltip-popup-delay="300" class="case-list-refresh glyphicon glyphicon-repeat"></span></div>\n    <div class="panel-body">\n      <div growl></div>\n      <div ng-show="cases.length">\n        <div class="col-md-12">\n          <table ng-if="!archivedTabName" bonitable bo-storable="admin-cases-list" on-storage-loaded="caseCtrl.loadContent()" bo-repeatable  on-sort="caseCtrl.updateSortField(sortOptions)" sort-options="sortOptions" resizable-column="$columns" resize-selector="tr th.case-column" class="table table-striped table-hover table-responsive">\n            <thead>\n              <tr>\n                <th colspan="{{$columns.length+2}}">\n                  <div class="pull-left case-action table-buttons">\n                    <div class="case-action table-buttons"> <active-case-delete>{{\'Delete\' | translate}}</active-case-delete></div>\n                  </div>\n                  <div class="pull-right table-buttons">\n                    <table-settings class="pull-right" page-size="pagination.itemsPerPage" sizes="pageSizes" columns="$columns" update-page-size="caseCtrl.changeItemPerPage(size)"></table-settings>\n                    <span  ng-if="pagination.total" id="cases-results-size-top" class="pull-right">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n                  </div>\n                </th>\n              </tr>\n              <tr data-headers>\n                <th class="case-checkbox" data-ignore><div bo-selectall></div></th>\n                <th class="text-right case-column" bo-sorter="id" bo-sorter-title-asc="{{\'sort by ID ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by ID descending\' | translate}}">{{\'ID\' | translate}}</th>\n\n                <th class="case-column" bo-sorter="name" bo-sorter-title-asc="{{\'sort by Process name ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Process name descending\' | translate}}">{{\'Process name\' | translate}}</th>\n                <th class="case-column" >{{\'Version\' | translate}}</th>\n                <th bo-sorter="startDate" class="case-column" bo-sorter-title-asc="{{\'sort by Start date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Start date descending\' | translate}}">{{\'Start date\' | translate}}</th>\n                <th class="case-column">{{\'Started by\' | translate}}</th>\n                <th class="text-right case-column">{{\'Failed Flow Nodes\' | translate}}</th>\n                <th class="text-right case-column">{{\'Pending Flow Nodes\' | translate}}</th>\n                <th bo-sorter="index1" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()"><span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{\'To personalize the display of search keys (and columns in general), use the table settings button on the right. You can search on up to 5 search keys.\' | translate}}" popover-trigger="mouseenter"></span> {{\'Search Key 1\' | translate}}</th>\n                <th bo-sorter="index2" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 2\' | translate}}</th>\n                <th bo-sorter="index3" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 3\' | translate}}</th>\n                <th bo-sorter="index4" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 4\' | translate}}</th>\n                <th bo-sorter="index5" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 5\' | translate}}</th>\n                <th data-ignore class="text-center">{{\'Actions\' | translate}}</th>\n              </tr>\n            </thead>\n            <tbody>\n\n            <tr ng-repeat="case in cases" id="caseId-{{::case.id}}" class="case-row" ng-class="{\'info\' : case.selected}">\n              <td class="case-checkbox">\n                <input id="case-check-{{::case.id}}" type="checkbox" bo-selector="case" >\n              </td>\n\n              <td class="text-right case-detail"><a id="case-detail-link-{{case.id}}" target="_parent" href="{{::caseCtrl.getLinkToCase(case)}}">{{case[\'ID\']}}</a></td>\n              <td class="case-detail"><a id="case-process-link-{{case.id}}" target="_parent" href="{{::caseCtrl.getLinkToProcess(case)}}">{{case[\'Process name\']}}</a></td>\n              <td class="case-detail">{{::case[\'Version\']}}</td>\n              <td class="case-detail">{{::caseCtrl.parseAndFormat(case[\'Start date\'])}}</td>\n              <td class="case-detail">{{::case[\'Started by\'] || (\'System\' | translate)}}</td>\n              <td class="case-detail text-right" ng-switch="case.fullCase.state">\n                <div ng-switch-when="error">\n                  <span tooltip="{{\'One or more connectors on case start or case end failed\' | translate}}" tooltip-animation="false" tooltip-popup-delay="500" class="alert-error glyphicon glyphicon-exclamation-sign"></span>\n                  {{::case[\'Failed Flow Nodes\']}}\n                </div>\n                <!--need a switch otherwise, the counter is not aligned with the glyphicon-->\n                <div ng-switch-default>\n                  {{::case[\'Failed Flow Nodes\']}}\n                </div>\n\n              </td>\n              <td class="case-detail text-right">{{::(case[\'Pending Flow Nodes\'] - case[\'Failed Flow Nodes\'])}}</td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="1"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="2"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="3"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="4"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="5"></search-index></td>\n              <td class="case-link text-center">\n                <case-visu process-id=\'{{::case.processDefinitionId.id}}\' case-id=\'{{::case.ID}}\'></case-visu>\n                <a id="case-overview-btn-{{::case.id}}" tooltip="{{\'View case overview\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseCtrl.getLinkToCaseOverview(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-eye-open"></span>\n                </a>\n                <a id="case-detail-btn-{{::case.id}}" tooltip="{{\'View case details\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseCtrl.getLinkToCase(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-option-horizontal"></span>\n                </a>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n\n          <table ng-if="archivedTabName" bonitable bo-storable="archived-admin-cases-list" on-storage-loaded="caseCtrl.loadContent()" bo-repeatable on-sort="caseCtrl.updateSortField(sortOptions)" sort-options="sortOptions" resizable-column="$columns" resize-selector="tr th.case-column" class="table table-striped table-hover table-responsive">\n            <thead>\n              <tr>\n                <th colspan="{{$columns.length+2}}">\n                  <div class="pull-left case-action table-buttons">\n                    <div class="case-action table-buttons"> <archived-case-delete>{{\'Delete\' | translate}}</archived-case-delete></div>\n                  </div>\n                  <div class="pull-right table-buttons">\n                    <table-settings class="pull-right" page-size="pagination.itemsPerPage" sizes="pageSizes" columns="$columns"  update-page-size="caseCtrl.changeItemPerPage(size)"></table-settings>\n                       <span ng-if="pagination.total" id="cases-results-size-top" class="pull-right">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n                  </div>\n                </th>\n              </tr>\n              <tr data-headers>\n                <th class="case-checkbox" data-ignore><div bo-selectall></div></th>\n                <th class="text-right case-column" bo-sorter="sourceObjectId" bo-sorter-title-asc="{{\'sort by ID ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by ID descending\' | translate}}">{{\'ID\' | translate}}</th>\n                <th class="case-column" bo-sorter="name" bo-sorter-title-asc="{{\'sort by Process name ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Process name descending\' | translate}}">{{\'Process name\' | translate}}</th>\n                <th class="case-column" >{{\'Version\' | translate}}</th>\n                <th bo-sorter="startDate" class="case-column" bo-sorter-title-asc="{{\'sort by Start date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Start date descending\' | translate}}">{{\'Start date\' | translate}}</th>\n                <th class="case-column" >{{\'Started by\' | translate}}</th>\n                <th bo-sorter="endDate" class="case-column" bo-sorter-title-asc="{{\'sort by End date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by End date descending\' | translate}}">{{\'End date\' | translate}}</th>\n                <th class="case-column" >{{\'State\' | translate}}</th>\n                <th bo-sorter="index1" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()"><span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{\'To personalize the display of search keys (and columns in general), use the table settings button on the right. You can search on up to 5 search keys.\' | translate}}" popover-trigger="mouseenter"></span> {{\'Search Key 1\' | translate}}</th>\n                <th bo-sorter="index2" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 2\' | translate}}</th>\n                <th bo-sorter="index3" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 3\' | translate}}</th>\n                <th bo-sorter="index4" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 4\' | translate}}</th>\n                <th bo-sorter="index5" visible="false" class="case-column" remove-column="{{!caseCtrl.displayKeys()}}" ng-hide="!caseCtrl.displayKeys()">{{\'Search Key 5\' | translate}}</th>\n\n                <th data-ignore class="text-center">{{\'Actions\' | translate}}</th>\n              </tr>\n            </thead>\n            <tbody>\n\n            <tr ng-repeat="case in cases" id="caseId-{{::case.id}}" class="case-row" ng-class="{\'info\' : case.selected}">\n              <td class="case-checkbox">\n                <input id="case-check-{{::case.id}}" type="checkbox" bo-selector="case" >\n              </td>\n\n              <td class="case-detail text-right"><a id="case-detail-link-{{case.id}}" target="_parent" href="{{::caseCtrl.getLinkToCase(case)}}">{{case[\'ID\']}}</a></td>\n              <td class="case-detail"><a id="case-process-link-{{case.id}}" target="_parent" href="{{::caseCtrl.getLinkToProcess(case)}}">{{case[\'Process name\']}}</a></td>\n              <td class="case-detail">{{::case[\'Version\']}}</td>\n              <td class="case-detail">{{::caseCtrl.parseAndFormat(case[\'Start date\'])}}</td>\n              <td class="case-detail">{{::case[\'Started by\'] || (\'System\' | translate)}}</td>\n              <td class="case-detail">{{::caseCtrl.parseAndFormat(case[\'End date\'])}}</td>\n              <td class="case-detail">{{::case[\'State\']}}</td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="1"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="2"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="3"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="4"></search-index></td>\n              <td class="case-detail" ng-hide="!caseCtrl.displayKeys()"><search-index case="case" index="5"></search-index></td>\n              <td class="case-link text-center">\n                <case-visu process-id=\'{{::case.processDefinitionId.id}}\' case-id=\'{{::case.ID}}\'></case-visu>\n                <a id="case-overview-btn-{{::case.id}}" tooltip="{{\'View case overview\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseCtrl.getLinkToArchivedCaseOverview(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-eye-open"></span>\n                </a>\n                <a id="case-detail-btn-{{::case.id}}" tooltip="{{\'View case details\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseCtrl.getLinkToCase(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-option-horizontal"></span>\n                </a>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="col-md-12">\n          <div class="pull-right" ng-if="pagination.total">\n            <span id="cases-results-size-bottom" class="pull-left">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n            <pagination id="cases-results-pages" ng-if="pagination.total > pagination.itemsPerPage" ng-click="caseCtrl.searchForCases()" boundary-links="true" total-items="pagination.total" ng-model="pagination.currentPage" items-per-page="pagination.itemsPerPage " previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="5"></pagination>\n           </div>\n        </div>\n      </div>\n      <div ng-show="loading">\n        <p class="text-muted"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>&nbsp;{{ \'Loading...\' | translate}}</p>\n      </div>\n      <div ng-show="!loading &amp;&amp; cases &amp;&amp; cases.length===0">\n        <p class="text-muted animated fadeIn">{{ \'No cases to display\' | translate }}</p>\n      </div>\n    </div>\n  </div>\n</div>\n');
}]),angular.module("portalTemplates/admin/cases/list/cases.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/cases/list/cases.html",'<div id="case-list" class="container">\n  <h1 id="case-title">{{\'Cases\' | translate }}</h1>\n\n  <div>\n    <ul class="nav nav-tabs" role="tablist">\n      <li role="presentation" ng-repeat="caseState in casesStates" ng-class="{\'active\' : state.is(caseState.state)}"><a class="title" href="" bonita-href="{\'token\' : currentToken, \'_tab\' : caseState.tabName}" id="{{:: caseState.htmlAttributeId}}">{{:: caseState.title}}</a></li>\n    </ul>\n    <div ui-view=\'case-list\' id="case-list-tab-content"></div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/mapping/actors.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/mapping/actors.html",'<isteven-multi-select\n  input-model="actorsCtrl.members"\n  output-model="actorsCtrl.selectedMembers.list"\n  button-label="buttonLabel"\n  item-label="listLabel"\n  helper-elements="all filter reset none"\n  tick-property="selected"\n  max-labels="5"\n  max-height="200px"\n  translation="localLang"\n  on-search-change="actorsCtrl.search(data)"\n  on-clear="actorsCtrl.search({})"\n  on-reset="actorsCtrl.search({})"\n  selection-mode="{{actorsCtrl.selectionMode}}"></isteven-multi-select>\n')}]),angular.module("portalTemplates/admin/processes/details/actors-mapping.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/actors-mapping.html","<div id=\"process-details-actors\">\n  <h2>{{'Actors' | translate}}</h2>\n  <p>{{'Select the entities (users, groups, roles, memberships) to map to the actors. These entities will do the human tasks in the process.' | translate}}</p>\n  <table class=\"table  actorMappingList\">\n    <thead>\n      <tr>\n        <th>{{'Actor name' | translate}}</th>\n        <th>{{'Users' | translate}}</th>\n        <th>{{'Roles' | translate}}</th>\n        <th>{{'Groups' | translate}}</th>\n        <th>{{'Memberships' | translate}}</th>\n      </tr>\n    </thead>\n    <tbody>\n      <tr ng-repeat-start=\"actor in actorsMappingCtrl.actors\">\n        <td class=\"actorName\">{{actor.name}}</td>\n        <td class=\"members\">\n"+'          <span ng-repeat="user in actorsMappingCtrl.actorsMembers[actor.id].users.data" class="label label-default member">\n            {{user.user_id.firstname}} {{user.user_id.lastname}}\n          </span> \n          <span ng-if="actorsMappingCtrl.actorsMembers[actor.id].users.resource.pagination.total > actorsMappingCtrl.membersPerCell" class="label label-default member">{{\'{} more\' | translate | stringTemplater: actorsMappingCtrl.actorsMembers[actor.id].users.resource.pagination.total - actorsMappingCtrl.membersPerCell}}</span>\n        </td>\n        <td class="members">\n          <span ng-repeat="role in actorsMappingCtrl.actorsMembers[actor.id].roles.data" class="label label-default member">\n            {{role.role_id.displayName}}\n          </span>\n          <span ng-if="actorsMappingCtrl.actorsMembers[actor.id].roles.resource.pagination.total > actorsMappingCtrl.membersPerCell" class="label label-default member">{{\'{} more\'|translate}} | stringTemplater: actorsMappingCtrl.actorsMembers[actor.id].roles.resource.pagination.total - actorsMappingCtrl.membersPerCell</span>\n        </td>\n        <td class="members">\n          <span ng-repeat="group in actorsMappingCtrl.actorsMembers[actor.id].groups.data" class="label label-default member">\n            {{group.group_id.displayName}}\n          </span>\n          <span ng-if="actorsMappingCtrl.actorsMembers[actor.id].groups.resource.pagination.total > actorsMappingCtrl.membersPerCell" class="label label-default member">{{\'{} more\' | translate | stringTemplater: actorsMappingCtrl.actorsMembers[actor.id].groups.resource.pagination.total - actorsMappingCtrl.membersPerCell}}</span>\n        </td>\n        <td class="members">\n          <span ng-repeat="membership in actorsMappingCtrl.actorsMembers[actor.id].memberships.data" class="label label-default member">\n            {{\'{} of {}\' | translate | stringTemplater: [membership.role_id.displayName, membership.group_id.displayName]}}\n          </span>\n          <span ng-if="actorsMappingCtrl.actorsMembers[actor.id].memberships.resource.pagination.total > actorsMappingCtrl.membersPerCell" class="label label-default member">{{\'{} more\' | translate | stringTemplater: actorsMappingCtrl.actorsMembers[actor.id].memberships.resource.pagination.total - actorsMappingCtrl.membersPerCell}}</span>\n        </td>\n      </tr>\n      <tr ng-repeat-end class="mappingEdition-actions">\n        <td></td>\n        <td>\n          <div class="cellFooter pull-right">\n            <button ng-click="actorsMappingCtrl.editMapping(actor, \'users\')" class="btn btn-primary">\n              <span class="glyphicon" ng-class="{\'glyphicon-pencil\': actorsMappingCtrl.actorsMembers[actor.id].users.data.length, \'glyphicon-plus\': !actorsMappingCtrl.actorsMembers[actor.id].users.data.length}"></span>\n            </button>\n          </div>\n        </td>\n        <td>\n           <div class="cellFooter pull-right">\n            <button ng-click="actorsMappingCtrl.editMapping(actor, \'roles\')" class="btn btn-primary">\n              <span class="glyphicon" ng-class="{\'glyphicon-pencil\': actorsMappingCtrl.actorsMembers[actor.id].roles.data.length, \'glyphicon-plus\': !actorsMappingCtrl.actorsMembers[actor.id].roles.data.length}"></span>\n            </button>\n          </div>\n        </td>\n        <td>\n           <div class="cellFooter pull-right">\n            <button ng-click="actorsMappingCtrl.editMapping(actor, \'groups\')" class="btn btn-primary">\n              <span class="glyphicon" ng-class="{\'glyphicon-pencil\': actorsMappingCtrl.actorsMembers[actor.id].groups.data.length, \'glyphicon-plus\': !actorsMappingCtrl.actorsMembers[actor.id].groups.data.length}"></span>\n            </button>\n          </div>\n        </td>\n        <td>\n          <div class="cellFooter pull-right">\n            <button ng-click="actorsMappingCtrl.editMapping(actor, \'memberships\')" class="btn btn-primary">\n              <span class="glyphicon" ng-class="{\'glyphicon-pencil\': actorsMappingCtrl.actorsMembers[actor.id].memberships.data.length, \'glyphicon-plus\': !actorsMappingCtrl.actorsMembers[actor.id].memberships.data.length}"></span>\n            </button>\n          </div>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <pagination ng-if="actorsMappingCtrl.actors.resource.pagination.total>actorsMappingCtrl.actors.resource.pagination.numberPerPage" ng-click="actorsMappingCtrl.getProcessActors()" boundary-links="true" total-items="actorsMappingCtrl.actors.resource.pagination.total" ng-model="actorsMappingCtrl.actors.resource.pagination.currentPage" items-per-page="actorsMappingCtrl.actors.resource.pagination.numberPerPage " previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="5"></pagination>\n  <p>{{\'For each actor, check that each entity (user, group, role, membership) has the relevant user profile in the Portal.\' | translate}} {{\'To do so, go to\' | translate}} <a href="" bonita-href="profilelisting">{{\'Profiles\' | translate}}</a>.</p>\n</div>\n')}]),angular.module("portalTemplates/admin/processes/details/delete-process-modal.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/delete-process-modal.html",'<div id="delete-process-modal">\n    <div class="modal-header header">\n        <h3 class="modal-title">{{\'Delete process\'| translate }}</h3>\n    </div>\n    <div class="modal-body body">\n      <p class="text-muted">{{ \'Delete the process\' | translate }} {{deleteProcessModalInstanceCtrl.process.name}}</p>\n    </div>\n    <div class="modal-footer">\n        <button  class="start-for btn btn-primary" ng-click="deleteProcessModalInstanceCtrl.delete()">{{ \'Delete\' | translate }}</button>\n        <button class="btn btn-default close_popup" ng-click="deleteProcessModalInstanceCtrl.cancel()">{{ \'Cancel\' | translate }}</button>\n    </div>\n</div>')}]),angular.module("portalTemplates/admin/processes/details/edit-actor-members.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/edit-actor-members.html",'<div id="editActorsMembersModal" ng-init="editActorMembersCtrl.initView()" class="process-details">\n\n  <div class="modal-header">\n    <h1 class="modal-title">{{editActorMembersCtrl.title | translate | stringTemplater:[editActorMembersCtrl.actor.displayName]}}</h1>\n  </div>\n  <div class="modal-body">\n    <h2>{{\'{} mapped\' | translate | stringTemplater:[editActorMembersCtrl.currentMemberLabel]}}</h2>\n    <p class="members">\n      <span ng-repeat="member in editActorMembersCtrl.members" class="tag label label-default member">\n          {{member.label}} <i ng-click="editActorMembersCtrl.removeMember(member)" class="glyphicon glyphicon-remove"></i>\n      </span>\n      <span ng-click="editActorMembersCtrl.removeAll()" class="tag label label-danger" ng-if="!!editActorMembersCtrl.members.length"> {{\'Remove all\' | translate}}</span>\n    </p>\n    <p class="text-muted" ng-if="!editActorMembersCtrl.members.length">\n      {{\'No mapping\' | translate}}\n    </p>\n    <div ng-if="!editActorMembersCtrl.isMembershipEdit()">\n      <h3>{{\'Add\' | translate}}</h3>\n      <p>\n      <actors-select-box local-lang="editActorMembersCtrl.localLang"\n        selected-members="editActorMembersCtrl.newMembers"\n        already-mapped-actors-ids="editActorMembersCtrl.mappedIds"\n        type="{{editActorMembersCtrl.memberType}}"></actors-select-box>\n      </p>\n    </div>\n    <div ng-if="editActorMembersCtrl.isMembershipEdit()">\n      <h3>{{\'Create a new membership\' | translate}}</h3>\n      <p>\n       <actors-select-box local-lang="editActorMembersCtrl.localLangRole"\n        selected-members="editActorMembersCtrl.newMembers.membership.group"\n        already-mapped-actors-ids="editActorMembersCtrl.mappedIds"\n        type="ROLE" selection-mode="single"></actors-select-box>\n      <span style="clear:both">{{\' of \' | translate }}</span>\n       <actors-select-box local-lang="editActorMembersCtrl.localLangGroup"\n        selected-members="editActorMembersCtrl.newMembers.membership.role"\n        already-mapped-actors-ids="editActorMembersCtrl.mappedIds"\n        type="GROUP" selection-mode="single"></actors-select-box>\n      </p>\n    </div>\n    <div ng-if="!!editActorMembersCtrl.membersToDelete.length">\n      <h3>{{\'{} mappings to delete\' | translate | stringTemplater:[editActorMembersCtrl.currentMemberLabel]}}</h3>\n      <p class="members">\n        <span ng-repeat="member in editActorMembersCtrl.membersToDelete" class="member label label-default">\n          {{member.label}} <i ng-click="editActorMembersCtrl.reenableMember(member)" class="glyphicon glyphicon-remove"></i>\n        </span>\n        <span ng-click="editActorMembersCtrl.reenableAll()" class="label label-success" ng-if="editActorMembersCtrl.membersToDelete.length>0"> {{\'Enable all\' | translate}}</span>\n      </p>\n    </div>\n  </div>\n  <div class="modal-footer">\n    <a ng-if="editActorMembersCtrl.hasModificationToApply()" class="btn btn-primary" ng-click="editActorMembersCtrl.apply()">{{\'Apply\' | translate }}</a>\n    <a ng-click="editActorMembersCtrl.cancel()" class="btn btn-default">{{\'Cancel\'|translate}}</a>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/processes/details/information.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/information.html",'<div id="process-details-information">\n  <h2>{{\'General\' | translate}}</h2>\n  <div class="panel panel-default">\n    <div class="panel-body">\n      <div class="col-md-12 row">\n        <div class="metatags-label form-group">{{ \'Configuration state\' | translate }}\n          <b>{{::processInformationCtrl.process.configurationState}}</b>\n        </div>\n        <div class="metatags-label  form-group">\n          {{ \'Activation state\' | translate }}&nbsp;\n              <toggle-button on="Enabled" off="Disabled" process-id="{{::processInformationCtrl.process.id}}" initial-state="{{::processInformationCtrl.process.activationState === \'ENABLED\'}}" enable-toggle="processInformationCtrl.isProcessResolved"></toggle-button>\n        </div>\n        <div class="metatags-label form-group">\n            {{ \'Updated on\' | translate }}\n            <b >{{::processInformationCtrl.parseAndFormat(processInformationCtrl.process.last_update_date)}}</b>\n        </div>\n      </div>\n      <div class="col-md-12 row">\n\n        <p ng-if="processInformationCtrl.process.description" >{{processInformationCtrl.process.description}}</p>\n        <p class="text-muted" ng-if="!processInformationCtrl.process.description" >{{\'No description.\' | translate}}</p>\n      </div>\n      <div class="col-md-12 row">\n        <div class="col-md-12 row categories">\n          <div class="col-md-2 row metatags-label">\n          {{\'Categories\' | translate}} <button class="btn btn-primary" ng-click="processInformationCtrl.openProcessCategoryManagementModal()"><span class="glyphicon glyphicon-pencil"></span></button>\n          </div>\n          <div class="col-md-10 bootstrap-tags">\n            <bonitags tags-suggestion="processInformationCtrl.categories" tags-selection="processInformationCtrl.selectedCategories" read-only></bonitags>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n<div ng-if="processInformationCtrl.process.id">\n  <monitoring-status process=\'processInformationCtrl.process\'></monitoring-status>\n\n  <process-manager-mapping process=\'processInformationCtrl.process\'></process-manager-mapping>\n</div>\n')}]),angular.module("portalTemplates/admin/processes/details/manage-category-mapping-modal.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/manage-category-mapping-modal.html",'<div id="manage-categories-modal" class="process-details">\n    <div class="modal-header header">\n        <h3 class="modal-title">{{\'Manage Categories\'| translate }}</h3>\n    </div>\n    <div class="modal-body body">\n        <bonitags tags-suggestion="manageCategoryMappingInstanceCtrl.tags" tags-selection="manageCategoryMappingInstanceCtrl.selectedTags" tag-class="label-default editable"></bonitags>\n    <hr>\n        {{\'Use Arrow up and Arrow down keys to browse among existing categories.\' | translate}} <br>\n        {{\'Enter a new category name and press "Enter" key to create a new category and assign it to the current process.\' | translate}}\n    </div>\n    <div class="modal-footer">\n        <button class="btn btn-primary" ng-click="manageCategoryMappingInstanceCtrl.updateCategories()">{{ \'Save\' | translate }}</button>\n        <button class="btn btn-default close_popup" ng-click="manageCategoryMappingInstanceCtrl.cancel()">{{ \'Cancel\' | translate }}</button>\n    </div>\n\n</div>\n')}]),angular.module("portalTemplates/admin/processes/details/menu.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/menu.html",'<div id="process-details" class="process-details">\n  <div class="col-md-12 actions">\n    <div class="col-md-2">\n        <a id="processDetails-back" class="btn btn-default" ng-click="processMenuCtrl.goBack()">{{\'Back\' | translate}}</a>\n    </div>\n    <div class="col-md-10 text-right">\n      <start-for process="processMenuCtrl.process"></start-for>&nbsp;\n      <button id="processDetails-deleteProcess" type="button" class="btn btn-default" ng-disabled="processMenuCtrl.process.activationState === \'ENABLED\'" ng-click="processMenuCtrl.deleteProcess()">{{\'Delete\' | translate}}</button>\n    </div>\n  </div>\n  <div class="col-md-12">\n    <h1>{{processMenuCtrl.process.name}} ({{processMenuCtrl.process.version}})</h1>\n  </div>\n  <div class="col-md-12" style="padding-top: 10px;">\n    <div ng-if="processMenuCtrl.processResolutionProblems.length" style=" padding-bottom: 0px;" class="panel panel-danger slide">\n      <div class="panel-heading"><span class="glyphicon glyphicon-exclamation-sign"></span> {{ \'The Process cannot be enabled\' | translate }}</div>\n      <div class="panel-body">\n        <div class="col-md-12">\n          <ul>\n            <li ng-repeat="problem in processMenuCtrl.processResolutionProblems">\n              {{problem.message | translate | stringTemplater: problem.args}}\n            </li>\n          </ul>\n        </div>\n      </div>\n    </div>\n  </div>\n  <div class="col-sm-3 col-md-3 col-lg-2">\n    <div class="list-group">\n      <a class="list-group-item" ng-repeat="item in processMenuCtrl.menuContent" ng-class="{active: processMenuCtrl.includesCurrentState(item.state) }" ui-sref="{{item.defaultDestinationState || item.state}}" ui-sref-opts="{location:false}">{{item.name | translate}}<span ng-if="processMenuCtrl.hasResolutionProblem(item.resolutionLabel)" ng-class="{\'text-danger\': !processMenuCtrl.includesCurrentState(item.state) }" class="glyphicon glyphicon-exclamation-sign"></span> </a>\n    </div>\n  </div>\n  <div class="col-sm-9 col-md-9 col-lg-10">\n    <div growl></div>\n\n    <div class="col-md-12">\n      <ui-view></ui-view>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/admin/processes/details/params.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/params.html",'<div id="process-details-params">\n  <h2>{{\'Parameters\' | translate}}</h2>\n  <div ng-if="!processParamsCtrl.parameters.length">\n    {{ \'The current process has no parameters defined.\' | translate}}\n  </div>\n  <div ng-if="!!processParamsCtrl.parameters.length">\n    <table class="table table-striped">\n        <thead>\n            <tr>\n                <th>{{\'Name\' | translate}}</th> \n                <th>{{\'Description\' | translate}}</th>\n                <th>{{\'Type\' | translate}}</th>\n                <th>{{\'Value\' | translate}}</th>\n            </tr>\n        </thead>\n        <tbody>\n            <tr ng-repeat="parameter in processParamsCtrl.parameters">\n              <td>{{parameter.name}}</td>\n              <td>{{parameter.description}}</td>\n              <td>{{parameter.type}}</td>\n              <td ng-if="!processParamsCtrl.showActions">{{parameter.value}}</td>\n              <td ng-if="processParamsCtrl.showActions" class="xeditable">\n                <div ng-switch="parameter.type">\n                  <div ng-switch-when="java.lang.Boolean" class="form-group">\n                    <a href="" editable-select="parameter.value" onbeforesave="processParamsCtrl.updateParameter(parameter, $data)"  e-ng-options="s.value as s.value for s in processParamsCtrl.booleanValues">{{ parameter.value || \'No Value\' | translate}}</a>\n                  </div>\n                  <div ng-switch-default class="form-group">\n                    <a href="" editable-text="parameter.value" e-style="width: 400px;" onbeforesave="processParamsCtrl.updateParameter(parameter, $data)" >{{ parameter.value || \'No Value\' | translate}}</a>\n                  </div>\n                </div>\n              </td>\n            </tr>\n        </tbody>\n    </table> \n  </div>\n</div>')}]),angular.module("portalTemplates/admin/processes/details/process-connectors.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/admin/processes/details/process-connectors.html",'<div id="process-details-connectors">\n  <h2>{{\'Connectors\' | translate}}</h2>\n  <div ng-if="!processConnectorsCtrl.processConnectors.length">\n    {{ \'The current process has no connectors defined.\' | translate}}\n  </div>\n  <div ng-if="!!processConnectorsCtrl.processConnectors.length">\n    <table class="table table-hover processConnectorsList">\n      <thead>\n        <tr data-headers>\n          <th>{{\'Type\' | translate}}</th>\n          <th>{{\'Implementation version\' | translate}}</th>\n          <th>{{\'Class name\' | translate}}</th>\n          <th ng-if="processConnectorsCtrl.showActions">{{\'Actions\' | translate}}</th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr ng-repeat="processConnector in processConnectorsCtrl.processConnectors">\n          <td>{{processConnector.definition_id}}</td>\n          <td>{{processConnector.impl_version}}</td>\n          <td>{{processConnector.classname}}</td>\n          <td ng-if="processConnectorsCtrl.showActions"><edit-process-connector-implementation-link process-connector="processConnector" process="processConnectorsCtrl.process"></edit-process-connector-implementation-link></td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n</div>')}]),angular.module("portalTemplates/user/cases/list/archived-cases-list-filters.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/cases/list/archived-cases-list-filters.html",'<div id="case-filters" class="panel panel-default">\n\n  <div class="panel-heading title">{{ \'Filters\' | translate }}</div>\n  <div class="panel-body">\n    <div class="col-md-3 button-filter"> {{ \'Process name\' | translate }}\n      <div class="btn-group" dropdown id="case-app-name-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle ">{{selectedFilters.selectedApp | translate}}<span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterUserCtrl.selectApp(defaultUserFilters.appName)"><a>{{defaultUserFilters.appName | translate}}</a></li>\n          <li ng-if="appNames &amp;&amp; appNames.length>0" class="divider"></li>\n          <li ng-repeat="appName in appNames" ng-click="filterUserCtrl.selectApp(appName)"><a>{{appName}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">{{\'Started by\' | translate}}\n      <div class="btn-group" dropdown id="case-app-startedby-filter">\n          <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{caseStatesUserValues[selectedFilters.selectedStartedBy] | translate}} <span class="caret"></span></button>\n          <ul class="dropdown-menu" role="menu">\n              <li ng-click="filterUserCtrl.selectCaseStartedBy(defaultUserFilters.startedBy)"><a>{{defaultUserFilters.startedBy | translate}}</a></li>\n              <li class="divider"></li>\n              <li ng-click="filterUserCtrl.selectCaseStartedBy(\'Me\')"><a>{{\'Me\' | translate}}</a></li>\n          </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">\n    </div>\n    <div class="col-md-3 button-filter">\n      <form role="form" name="searchForm" novalidate ng-submit="filterUserCtrl.submitSearch()">\n          <div class="input-group">\n            <input type="text" class="form-control" ng-model="selectedFilters.currentSearch" name="searchField" id="case-list-search" placeholder="{{ \'Search...\' | translate }}">\n            <span ng-click="filterUserCtrl.submitSearch()" class="input-group-addon pointer"><span class="glyphicon glyphicon-search"></span></span>\n          </div>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/user/cases/list/cases-list-filters.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/cases/list/cases-list-filters.html",'<div id="case-filters" class="panel panel-default">\n  <div class="panel-heading title">{{\'Filters\' | translate}}</div>\n  <div class="panel-body">\n    <div class="col-md-3 button-filter">{{\'Process name\' | translate}}\n      <div class="btn-group" dropdown id="case-app-name-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{selectedFilters.selectedApp | translate}}<span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterUserCtrl.selectApp(defaultUserFilters.appName)"><a>{{defaultUserFilters.appName | translate}}</a></li>\n          <li ng-if="appNames &amp;&amp; appNames.length>0" class="divider"></li>\n          <li ng-repeat="appName in appNames" ng-click="filterUserCtrl.selectApp(appName)"><a>{{appName}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3 button-filter">{{\'Started by\' | translate}}\n      <div class="btn-group" dropdown id="case-app-startedby-filter">\n        <button type="button" dropdown-toggle class="btn btn-primary dropdown-toggle">{{caseStatesUserValues[selectedFilters.selectedStartedBy] | translate}} <span class="caret"></span></button>\n        <ul class="dropdown-menu" role="menu">\n          <li ng-click="filterUserCtrl.selectCaseStartedBy(defaultUserFilters.startedBy)"><a>{{defaultUserFilters.startedBy | translate}}</a></li>\n          <li class="divider"></li>\n          <li ng-click="filterUserCtrl.selectCaseStartedBy(\'Me\')"><a>{{\'Me\' | translate}}</a></li>\n        </ul>\n      </div>\n    </div>\n    <div class="col-md-3" style="float:right">\n      <form role="form" name="searchForm" novalidate ng-submit="filterUserCtrl.submitSearch()">\n        <div class="input-group">\n          <input type="text" class="form-control" ng-model="selectedFilters.currentSearch" name="searchField" id="case-list-search" placeholder="{{ \'Search...\' | translate }}">\n          <span ng-click="filterUserCtrl.submitSearch()" class="input-group-addon pointer"><span class="glyphicon glyphicon-search"></span></span>\n        </div>\n      </form>\n    </div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/user/cases/list/cases-list.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/cases/list/cases-list.html",'<div>\n\n  <div ng-switch on="archivedTabName">\n    <archived-case-user-filters ng-switch-when="true"> </archived-case-user-filters>\n    <active-case-user-filters ng-switch-default> </active-case-user-filters>\n  </div>\n  <div class="panel panel-default">\n\n    <div class="panel-heading title">{{ \'Case list\' | translate }}  <span ng-click="caseUserCtrl.reinitCases()" tooltip="{{ \'Refresh\' | translate}}" tooltip-animation="false" tooltip-popup-delay="300" class="case-list-refresh glyphicon glyphicon-repeat"></span></div>\n    <div class="panel-body">\n      <div growl></div>\n        <div ng-show="cases.length">\n        <div class="col-md-12">\n          <table ng-if="!archivedTabName" bonitable bo-storable="user-cases-list" on-storage-loaded="caseUserCtrl.loadContent()" bo-repeatable  on-sort="caseUserCtrl.updateSortField(sortOptions)" sort-options="sortOptions" resizable-column="$columns" resize-selector="tr th.case-column" class="table table-striped table-hover table-responsive">\n            <thead>\n              <tr>\n                <th colspan="{{$columns.length+2}}">\n                  <div class="pull-right table-buttons">\n                    <table-settings class="pull-right" page-size="pagination.itemsPerPage" sizes="pageSizes" columns="$columns" update-page-size="caseUserCtrl.changeItemPerPage(size)"></table-settings>\n                    <span  ng-if="pagination.total" id="cases-results-size-top" class="pull-right">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n                  </div>\n                </th>\n              </tr>\n              <tr data-headers>\n                <th class="text-right case-column" bo-sorter="id" bo-sorter-title-asc="{{\'sort by ID ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by ID descending\' | translate}}">{{\'ID\' | translate}}</th>\n                <th class="case-column" bo-sorter="name" bo-sorter-title-asc="{{\'sort by Process name ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Process name descending\' | translate}}">{{\'Process name\' | translate}}</th>\n                <th class="case-column" visible="false">{{\'Version\' | translate}}</th>\n                <th bo-sorter="startDate" class="case-column" bo-sorter-title-asc="{{\'sort by Start date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Start date descending\' | translate}}">{{\'Start date\' | translate}}</th>\n                <th class="case-column">{{\'Started by\' | translate}}</th>\n                <th class="text-right case-column">{{\'Available tasks\' | translate}}</th>\n                <th bo-sorter="index1" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()"><span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{\'To personalize the display of search keys (and columns in general), use the table settings button on the right. You can search on up to 5 search keys.\' | translate}}" popover-trigger="mouseenter"></span> {{\'Search Key 1\' | translate}}</th>\n                <th bo-sorter="index2" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 2\' | translate}}</th>\n                <th bo-sorter="index3" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 3\' | translate}}</th>\n                <th bo-sorter="index4" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 4\' | translate}}</th>\n                <th bo-sorter="index5" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 5\' | translate}}</th>\n                <th data-ignore class="text-center">{{\'Actions\' | translate}}</th>\n\n              </tr>\n            </thead>\n            <tbody>\n\n            <tr ng-repeat="case in cases" id="caseId-{{::case.id}}" class="case-row" ng-class="{\'info\' : case.selected}">\n              <td class="text-right case-detail"><a id="case-detail-link-{{case.id}}" target="_parent" href="{{::caseUserCtrl.getLinkToCase(case)}}">{{case[\'ID\']}}</a></td>\n              <td class="case-detail">{{::case[\'Process name\']}}</td>\n              <td class="case-detail">{{::case[\'Version\']}}</td>\n              <td class="case-detail">{{::caseUserCtrl.parseAndFormat(case[\'Start date\'])}}</td>\n              <td class="case-detail">{{::case[\'Started by\'] || (\'System\' | translate)}}</td>\n              <td class="case-detail text-right">{{::case[\'Available tasks\']}}</td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="1"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="2"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="3"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="4"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="5"></search-index></td>\n              <td class="case-link text-center">\n                <a id="case-overview-btn-{{::case.id}}" tooltip="{{\'View case overview\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseUserCtrl.getLinkToCaseOverview(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-eye-open"></span>\n                </a>\n                <a id="case-detail-btn-{{::case.id}}" tooltip="{{\'View case details\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseUserCtrl.getLinkToCase(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-option-horizontal"></span>\n                </a>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n\n          <table ng-if="archivedTabName" bonitable bo-storable="archived-user-cases-list" on-storage-loaded="caseUserCtrl.loadContent()" bo-repeatable on-sort="caseUserCtrl.updateSortField(sortOptions)" sort-options="sortOptions" resizable-column="$columns" resize-selector="tr th.case-column" class="table table-striped table-hover table-responsive">\n            <thead>\n              <tr>\n                <th colspan="{{$columns.length+2}}">\n                  <div class="pull-right table-buttons">\n                    <table-settings class="pull-right" page-size="pagination.itemsPerPage" sizes="pageSizes" columns="$columns"  update-page-size="caseUserCtrl.changeItemPerPage(size)"></table-settings>\n                       <span ng-if="pagination.total" id="cases-results-size-top" class="pull-right">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n                  </div>\n                </th>\n              </tr>\n              <tr data-headers>\n                <th class="text-right case-column" bo-sorter="sourceObjectId" bo-sorter-title-asc="{{\'sort by ID ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by ID descending\' | translate}}">{{\'ID\' | translate}}</th>\n                <th class="case-column" bo-sorter="name" bo-sorter-title-asc="{{\'sort by Process name ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Process name descending\' | translate}}">{{\'Process name\' | translate}}</th>\n                <th class="case-column" visible="false">{{\'Version\' | translate}}</th>\n                <th bo-sorter="startDate" class="case-column" bo-sorter-title-asc="{{\'sort by Start date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by Start date descending\' | translate}}">{{\'Start date\' | translate}}</th>\n                <th class="case-column" >{{\'Started by\' | translate}}</th>\n                <th bo-sorter="endDate" class="case-column" bo-sorter-title-asc="{{\'sort by End date ascending\' | translate}}" bo-sorter-title-desc="{{\'sort by End date descending\' | translate}}">{{\'End date\' | translate}}</th>\n                <th bo-sorter="index1" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()"><span id="infoPopover" class="glyphicon glyphicon-info-sign" popover="{{\'To personalize the display of search keys (and columns in general), use the table settings button on the right. You can search on up to 5 search keys.\' | translate}}" popover-trigger="mouseenter"></span> {{\'Search Key 1\' | translate}}</th>\n                <th bo-sorter="index2" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 2\' | translate}}</th>\n                <th bo-sorter="index3" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 3\' | translate}}</th>\n                <th bo-sorter="index4" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 4\' | translate}}</th>\n                <th bo-sorter="index5" visible="false" class="case-column" remove-column="{{!caseUserCtrl.displayKeys()}}" ng-hide="!caseUserCtrl.displayKeys()">{{\'Search Key 5\' | translate}}</th>\n\n                <th data-ignore class="text-center">{{\'Actions\' | translate}}</th>\n              </tr>\n            </thead>\n            <tbody>\n            <tr ng-repeat="case in cases" id="caseId-{{::case.id}}" class="case-row" ng-class="{\'info\' : case.selected}">\n              <td class="case-detail text-right"><a id="case-detail-link-{{case.id}}" target="_parent" href="{{::caseUserCtrl.getLinkToCase(case)}}">{{case[\'ID\']}}</a></td>\n              <td class="case-detail">{{::case[\'Process name\']}}</td>\n              <td class="case-detail">{{::case[\'Version\']}}</td>\n              <td class="case-detail">{{::caseUserCtrl.parseAndFormat(case[\'Start date\'])}}</td>\n              <td class="case-detail">{{::case[\'Started by\'] || (\'System\' | translate)}}</td>\n              <td class="case-detail">{{::caseUserCtrl.parseAndFormat(case[\'End date\'])}}</td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="1"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="2"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="3"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="4"></search-index></td>\n              <td class="case-detail" ng-hide="!caseUserCtrl.displayKeys()"><search-index case="case" index="5"></search-index></td>\n              <td class="case-link text-center">\n                <a id="case-overview-btn-{{::case.id}}" tooltip="{{\'View case overview\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseUserCtrl.getLinkToArchivedCaseOverview(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-eye-open"></span>\n                </a>\n                <a id="case-detail-btn-{{::case.id}}" tooltip="{{\'View case details\' | translate }}"  tooltip-popup-delay="500" tooltip-animation="false" target="_parent" ng-href="{{::caseUserCtrl.getLinkToCase(case)}}" class="open-link">\n                  <span class="glyphicon glyphicon-option-horizontal"></span>\n                </a>\n              </td>\n            </tr>\n            </tbody>\n          </table>\n        </div>\n        <div class="col-md-12">\n          <div class="pull-right" ng-if="pagination.total">\n            <span id="cases-results-size-bottom" class="pull-left">{{ \'{}-{} of {}\' | translate | stringTemplater:[currentFirstResultIndex, currentLastResultIndex, pagination.total]}}</span>\n            <pagination id="cases-results-pages" ng-if="pagination.total > pagination.itemsPerPage" ng-click="caseUserCtrl.searchForCases()" boundary-links="true" total-items="pagination.total" ng-model="pagination.currentPage" items-per-page="pagination.itemsPerPage " previous-text="&lsaquo;" next-text="&rsaquo;" first-text="&laquo;" last-text="&raquo;" max-size="5"></pagination>\n           </div>\n        </div>\n      </div>\n      <div ng-show="loading">\n        <p class="text-muted"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span>&nbsp;{{ \'Loading...\' | translate}}</p>\n      </div>\n      <div ng-show="!loading &amp;&amp; cases &amp;&amp; cases.length===0">\n        <p class="text-muted animated fadeIn">{{ \'No cases to display\' | translate }}</p>\n      </div>\n    </div>\n  </div>\n</div>\n');
}]),angular.module("portalTemplates/user/cases/list/cases.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/cases/list/cases.html",'<div id="case-list" class="container">\n  <h1 id="case-title">{{\'Cases\' | translate }}</h1>\n\n  <div>\n    <ul class="nav nav-tabs" role="tablist">\n      <li role="presentation" ng-repeat="caseState in casesStates" ng-class="{\'active\' : state.is(caseState.state)}"><a class="title" href="" bonita-href="{\'token\' : currentToken, \'_tab\' : caseState.tabName}" id="{{:: caseState.htmlAttributeId}}">{{:: caseState.title}}</a></li>\n    </ul>\n    <div ui-view=\'case-list\' id="case-list-tab-content"></div>\n  </div>\n</div>\n')}]),angular.module("portalTemplates/user/tasks/list/common/directive/bonita-iframe-viewer.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/common/directive/bonita-iframe-viewer.html",'<div class="Viewer-wrapper">\n  <iframe\n    class="Viewer-frame"\n    seamless\n    ng-src="{{url}}"\n    width="100%" height="100%"\n    frameborder="0"></iframe>\n  <div class="Viewer-overlay" ng-if="!isEditable"></div>\n</div>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-details.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-details.html",'<button class="pull-right btn btn-primary"\n        id="Button{{editable? \'Release\' : \'Take\'}}DetailsColumn"\n        ng-click="onTakeReleaseTask()" title="{{editable ? \'Unassign the task and put it back in Available tasks\' : \'Assign the task to myself and move it to My tasks.\'}}">\n  <i class="glyphicon" ng-class="{\'glyphicon-save\':!editable, \'glyphicon-open\':editable}"></i>\n  <span class="sr-only">{{editable ? \'Release\' : \'Take\'}}</span>\n</button>\n\n<tabset>\n  <tab heading="Context"\n       active="tab.context"\n       ng-click="onClickTab(\'context\')" >\n    <div ng-if="!inactive">\n      <h3 class="Context-title">{{currentTask.name}}</h3>\n      <p ng-if="currentTask.description">\n        {{currentTask.description}}\n      </p>\n      <h4>Case Info</h4>\n      <ul class="list-group">\n        <li class="list-group-item" ng-repeat="supervisor in currentCase.supervisors">\n          <span class="ListGroup-label">Process Supervisor&nbsp;:</span>\n          <a ng-href="mailto:{{::supervisor.user_id.email}}" title="mail to {{::supervisor.user_id.name}}">\n          {{::supervisor.user_id.email}}\n          </a>\n        </li>\n        <li class="list-group-item">\n          <span class="ListGroup-label">Process&nbsp;:</span>\n          {{currentCase.processDefinitionId.name}}\n        </li>\n        <li class="list-group-item">\n          <span class="ListGroup-label">case ID&nbsp;:</span>\n          {{currentCase.sourceObjectId || currentCase.id}}\n        </li>\n        <li class="list-group-item">\n          <span class="ListGroup-label">Started by&nbsp;:</span>\n           {{currentCase.started_by.userName}}\n           on {{currentCase.start | moment:\'MMM DD YYYY - hh:mm a\'}}\n        </li>\n      </ul>\n\n      <h4>Case Overview</h4>\n      <bonita-iframe-viewer\n        class="CaseViewer"\n        frame-url="overviewUrl"\n        is-editable="true"\n        is-visible="tab.context">\n      </bonita-iframe-viewer>\n\n      <h4>Case History</h4>\n      <div class="CaseHistory">\n        <div class="CaseHistory-timeline">\n\n        <ul class="CaseHistory-events">\n          <li class="CaseHistory-event" ng-repeat="item in currentCase.history">\n            <span class="CaseHistory-eventDate">{{::item.date | moment:\'MMM DD YYYY - hh:mm a\'}}</span>\n            {{::item.content}}\n          </li>\n        </ul>\n\n        </div>\n      </div>\n    </div>\n  </tab>\n\n  <tab heading="Form"\n       ng-click="onClickTab(\'form\')"\n       active="tab.form" >\n    <p class="alert alert-info TaskInfo" ng-if="hideForm">\n      This task is completed.\n    </p>\n\n    <div ng-if="!hideForm">\n      <p class="alert alert-warning" ng-if="!inactive && !editable">\n        This task is not assigned to you. You need to take it before filling in this form.\n      </p>\n      <bonita-iframe-viewer class="FormViewer"\n        tabindex="0"\n        ng-if="!inactive && hasForm"\n        is-editable="editable"\n        frame-url="formUrl"\n        is-visible="tab.form">\n      </bonita-iframe-viewer>\n      <no-form class="FormViewer"\n        ng-if="!hasForm"\n        current-task="currentTask"\n        editable="editable"\n        inactive="inactive">\n      </no-form>\n    </div>\n  </tab>\n</tabset>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-filters.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-filters.html",'<ul class="TaskFilters nav nav-pills nav-stacked">\n  <!-- <a href="#" > is not good for a11n but it\'s a tradeoff for being themable\n     that\'s why we use bottstrap markup-->\n  <li role="presentation" ng-class="{\'active\':TASK_FILTERS.TODO===taskStatus}">\n    <a href="#" id="todo-tasks" title="Show all tasks that I can do, assigned to me or not assigned"\n       ng-click="setStatusTaskFilter(TASK_FILTERS.TODO)">\n      <span class="badge pull-right" ng-show="count.TODO>0">{{count.TODO}}</span>\n      To do\n    </a>\n    <div collapse="TASK_FILTERS.DONE === taskStatus">\n      <ul class="TaskFilters nav nav-pills nav-stacked">\n        <li role="presentation" ng-class="{\'active\':TASK_FILTERS.MY_TASK===taskStatus}">\n          <a href="#" id="my-tasks" class="TaskFilter"\n             title="Show tasks assigned to me, automatically, by me or by another user"\n             ng-click="setStatusTaskFilter(TASK_FILTERS.MY_TASK)">\n            <span class="badge pull-right" ng-show="count.MY_TASK>0">{{count.MY_TASK}}</span>\n            My tasks\n          </a>\n        </li><!-- my tasks -->\n        <li role="presentation" ng-class="{\'active\':TASK_FILTERS.POOL_TASK===taskStatus}">\n          <a href="#" id="available-tasks" class="TaskFilter"\n             title="Show tasks that I can do that are not assigned"\n             ng-click="setStatusTaskFilter(TASK_FILTERS.POOL_TASK)" >\n            <span class="badge pull-right" ng-show="count.POOL_TASK>0">{{count.POOL_TASK}}</span>\n            Available tasks\n          </a>\n        </li><!-- available tasks -->\n      </ul>\n    </div>\n  </li><!-- tasks -->\n  <li role="presentation" ng-class="{\'active\':TASK_FILTERS.DONE===taskStatus}">\n    <a href="#" id="done-tasks" title="Show done tasks"\n       ng-click="setStatusTaskFilter(TASK_FILTERS.DONE)" >\n      Done tasks\n    </a>\n  </li> <!-- done tasks -->\n</ul>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-layoutswitch.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-layoutswitch.html",'<div class="LayoutSwitch pull-right">\n  <div class="btn-group">\n    <button class="btn btn-default"  title="Show task list with details pane"\n            type="button"\n            btn-radio="true"\n            ng-model="value"\n            ng-change="changeHandler(value)">\n      <i class="icon-view-details"></i>\n      <span class="sr-only">Show task list with details pane</span>\n    </button>\n    <button class="btn btn-default"  title="Show extended task list"\n            type="button"\n            btn-radio="false"\n            ng-model="value"\n            ng-change="changeHandler(value)">\n        <i class="icon-view-list"></i>\n        <span class="sr-only">Show extended task list</span>\n    </button>\n  </div>\n</div><!-- Settings-display -->\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-list.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-list.html",'<link rel="stylesheet" href="features/user/tasks/list/css/icomoon.css">\n    <link rel="stylesheet" href="features/user/tasks/list/css/task-app.css">\n    <link rel="stylesheet" href="features/user/tasks/list/css/task-filters.css">\n    <link rel="stylesheet" href="features/user/tasks/list/css/task-list.css">\n    <link rel="stylesheet" href="features/user/tasks/list/css/task-details.css">\n  <!-- endbuild -->\n\n  <toast></toast>\n  <div class="TaskListPage" ng-cloak task-app form-spy spy-submit="app.onFormSubmited(message)"\n    ng-class="{\n      \'TaskListPage--small\':app.smallScreen,\n      \'TaskListPage--withMenu\':!app.smallScreen && app.showMenu}">\n    <div class="OffcanvasMenu navbar">\n      <h3 class="OffcanvasMenu-title">Filters</h3>\n      <button ng-hide="app.smallScreen" title="{{app.showMenu ? \'Hide\' : \'Show\'}} Menu"\n        class="FilterToggle btn btn-default" btn-checkbox ng-model="app.showMenu">\n        <span class="glyphicon" ng-class="{\'glyphicon-chevron-left\':app.showMenu,\'glyphicon-chevron-right\': !app.showMenu }"></span>\n        <span class="sr-only">menu</span>\n      </button>\n      <task-filters filter="app.request.taskFilter"\n                    filters="app.TASK_FILTERS"\n                    count="app.count"\n                    filter-change="app.changeFilter(filter)">\n      </task-filters>\n    </div>\n    <div class="AppWrapper">\n      <div class="AppHeader">\n        <h1>\n          <i class="icon-inbox TitleIcon"></i>\n          <span>{{app.request.taskFilter.title}}</span>\n\n          <layout-switch value="app.showDetails" on-change="app.updateLayout(showDetails)" ng-hide="app.smallScreen"/>\n        </h1>\n\n      </div>\n\n        <div class="alert alert-warning" ng-show="error">\n          <p ng-bind-template="Please login to your bonita portal (Error {{error.status}})"></p>\n        </div>\n      <div class="" ng-hide="error">\n        <div>\n          <div class="TaskList col-md-{{app.getSize()}}"\n               ng-if="!(app.showDetails && app.expandDetails) || app.smallScreen">\n            <div class="panel panel-default">\n              <div class="Settings">\n                <div class="Settings-filter">\n                  <form name="searchForm" class="form-inline" ng-submit="app.searchTask()">\n                    <fieldset class="SearchBox">\n                      <legend class="sr-only">searchLegend</legend>\n                      <div class="form-group">\n                        <i class="icon-search SearchBox-icon"></i>\n                        <input class="form-control SearchBox-input" id="search"\n                          input-focus\n                          placeholder="Search on task name"\n                          ng-model="app.request.search"\n                          ng-model-options="{updateOn:\'keyup\', debounce:{\'default\':250, \'blur\':0} }"\n                          ng-change="app.searchTask()"\n                          >\n\n                      </div>\n                      {{"Process name"}}\n                      <div class="ProcessList" dropdown>\n                        <button dropdown-toggle type="button"\n                                class="btn btn-primary"\n                                title="{{\'Process: \' + app.request.process.name + (app.request.process.version ? \' \' + app.request.process.version : \'\') }}"\n                                ng-disabled="app.request.taskFilter === app.TASK_FILTERS.DONE || !app.processes || app.processes.length === 0">\n                          <div class="ProcessList-label">{{app.request.process.name + (app.request.process.version?" "+app.request.process.version:"")}} <span class="caret"></span></div>\n                        </button>\n                        <ul class="dropdown-menu">\n                          <li ng-repeat="p in app.processes" >\n                            <a ng-click="app.setProcess(p)" ng-class="{\'active\':p.id === app.request.process.id}" class="processOptionLink">\n                              {{p.name+"&nbsp;"+p.version}}\n                            </a>\n                          </li>\n                        </ul>\n                      </div>\n                      <span class="Loading pull-right" ng-show="app.loadingTasks" ></span>\n                      <button class="btn btn-default pull-right"\n                        type="button"\n                        title="refresh data"\n                        ng-hide="app.loadingTasks"\n                        ng-click="app.updateAll()">\n                        <i class="icon-refresh"></i>\n                        <span class="sr-only">Refresh data</span>\n                      </button>\n                    </fieldset>\n                  </form>\n\n                </div> <!-- Settings-filter -->\n              </div> <!-- .Settings -->\n              <div class="panel-body">\n              <task-list tasks="app.tasks"\n                         current-task="app.currentTask"\n                         request="app.request"\n                         user="app.user"\n                         mode="app.getMode(app.showDetails, app.smallScreen)"\n                         page-sizes="app.PAGE_SIZES"\n                         refresh-tasks="app.updateTasks()"\n                         refresh-count="app.updateCount()"\n                         select-task="app.selectTask(task)"\n                         do-task="app.showTasksFormPopup(task)"\n                         view-task="app.showTaskDetailsPopup(task)">\n                </task-list>\n              </div>\n            </div>\n          </div> <!-- .Tasklist -->\n\n          <div class="TaskDetails col-md-{{app.getSize()}}" id="details" ng-if="app.smallScreen || app.showDetails">\n            <div class="panel panel-default">\n              <div class="panel-heading">\n                <button class="pull-right btn btn-default"\n                        ng-model="app.expandDetails"\n                        btn-checkbox\n                        title="{{app.expandDetails ? \'Expand\' : \'Reduce\'}}">\n                  <span ng-class="{\'glyphicon glyphicon-resize-full\':!app.expandDetails,\'glyphicon glyphicon-resize-small\':app.expandDetails}"></span>\n                  <span class="sr-only">{{app.expandDetails ? \'Expand\' : \'Reduce\'}}</span>\n                </button>\n                <h3 class="panel-title">Task Details</h3>\n              </div>\n              <div class="panel-body">\n                <task-details current-task="app.currentTask"\n                              current-case="app.currentCase"\n                              refresh-count="app.updateCount()"\n                              refresh-all="app.updateAll()"\n                              editable="app.currentTask.assigned_id === app.user.user_id"\n                              hide-form="app.request.taskFilter === app.TASK_FILTERS.DONE"\n                              inactive="app.tasks.length === 0">\n                </task-details>\n              </div>\n            </div>\n          </div> <!-- .TaskDetails -->\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <!-- build:js resources/js/vendors.js -->\n  <!--  <script src="../bower_components/angular/angular.js" ></script> -->\n  <!--  <script src="../bower_components/angular-animate/angular-animate.js" ></script> -->\n  <!--  <script src="../bower_components/angular-bootstrap/ui-bootstrap-tpls.js" ></script> -->\n  <!--  <script src="../bower_components/angular-cookies/angular-cookies.js" ></script> -->\n  <!--  <script src="../bower_components/angular-resource/angular-resource.js" ></script> -->\n  <!--  <script src="../bower_components/angular-sanitize/angular-sanitize.js" ></script> -->\n  <!--  <script src="../bower_components/angular-touch/angular-touch.js" ></script> -->\n  <!--  <script src="../bower_components/bonita-js-components/dist/bonita-lib-tpl.js" ></script> -->\n  <!--  <script src="../bower_components/ngtoast/dist/ngToast.js" ></script> -->\n  <!--  <script src="../bower_components/keymaster/keymaster.js" ></script> -->\n  <!--  <script src="../bower_components/momentjs/moment.js" ></script> -->\n  <!-- endbuild -->\n\n  <!-- build:js resources/js/app.js -->\n  <!--   <script src="js/templates.js" ></script> -->\n  <!--   <script src="js/common/security.js" ></script> -->\n  <!--   <script src="js/common/keymaster.js" ></script> -->\n  <!--   <script src="js/common/api.js" ></script> -->\n  <!--   <script src="js/common/filters.js" ></script> -->\n  <!--   <script src="js/common/screen.js" ></script> -->\n  <!--   <script src="js/common/iframeUrl.js" ></script> -->\n  <!--   <script src="js/common/directive/input-focus.js" ></script> -->\n  <!--   <script src="js/common/directive/bonita-iframe-viewer.js"></script> -->\n  <!--   <script src="js/common/directive/bonita-form-spy.js"></script> -->\n  <!--   <script src="js/common/taskRequest.js" ></script> -->\n  <!--   <script src="js/common/preference.js" ></script> -->\n  <!--   <script src="js/common/store.js" ></script> -->\n  <!--   <script src="js/modal/modalForm.js" ></script> -->\n  <!--   <script src="js/modal/modalDetails.js" ></script> -->\n  <!--   <script src="js/layoutswitch/layoutswitch.js" ></script> -->\n  <!--   <script src="js/tasklist/taskList.js" ></script> -->\n  <!--   <script src="js/taskdetails/taskDetails.js" ></script> -->\n  <!--   <script src="js/taskfilters/taskFilters.js" ></script> -->\n  <!--   <script src="js/taskApp.js" ></script> -->\n  <!--   <script src="js/app.config.js" ></script> -->\n  <!--   <script src="js/app.js" ></script> -->\n  <!-- endbuild -->\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-modal-details.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-modal-details.html",'<div class="modal-body">\n\n  <button type="button" ng-click="modal.cancel()" class="close" title="close Preview">\n    <span aria-hidden="true">&times;</span>\n    <span class="sr-only">Close Preview</span>\n  </button>\n\n  <task-details current-task="modal.task"\n                current-case="modal.Case"\n                editable="modal.task.assigned_id===modal.userId"\n                hide-form="modal.task.archivedDate"\n                inactive="false"\n                active-tab="context"\n                refresh-count="modal.onRefreshCountHandler()">\n  </task-details>\n</div>\n<div class="modal-footer">\n  <button type="button"\n          class="btn btn-warning"\n          title="close Preview"\n          ng-click="modal.cancel()">\n    Close Preview\n</button>\n</div>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-modal-form.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-modal-form.html",'<div class="modal-body">\n  <button type="button" ng-click="modal.cancel()" class="close" title="close form">\n    <span aria-hidden="true">&times;</span>\n    <span class="sr-only">Close</span>\n  </button>\n   <bonita-iframe-viewer class="FormViewer"\n      ng-if="modal.hasForm"\n      tabindex="0"\n      is-editable="modal.isFormEditable"\n      frame-url="modal.formUrl"\n      is-visible="modal.isFormVisible">\n    </bonita-iframe-viewer>\n    <no-form class="FormViewer"\n      ng-if="!modal.hasForm"\n      current-task="modal.task"\n      editable="modal.isFormEditable">\n    </no-form>\n</div>\n<div class="modal-footer">\n  <button type="button" class="btn btn-warning" title="close form" ng-click="modal.cancel()">Close form</button>\n</div>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-no-form.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-no-form.html",'<div class="Viewer-wrapper" ng-if="!inactive">\n        <h4>{{currentTask.displayName || currentTask.name}}</h4>\n        <p>No form is needed. You can enter a comment and confirm.</p>\n        <form role="form">\n          <div class="form-group">\n            <label for="task-comment">Comment:</label>\n            <textarea ng-model="currentTask.comment" id="task-comment" class="form-control"></textarea>\n          </div>\n          <button ng-click="onExecuteTask()" class="btn btn-primary center-block">Submit</button>\n        </form>\n        <div class="Viewer-overlay" ng-if="!editable"></div>\n      </div>\n')}]),angular.module("portalTemplates/user/tasks/list/tasks-table.html",[]).run(["$templateCache",function(a){"use strict";a.put("portalTemplates/user/tasks/list/tasks-table.html",'<!-- tasks listing -->\n<div class="alert alert-noresult" ng-show="tasks.length === 0">\n  No matching results\n</div>\n<div bonitable\n  on-sort="refreshTasks()"\n  sort-options="request.sortOption"\n  bo-repeatable\n  repeatable-config="columnSettings">\n  <div class="GroupAction clearfix" ng-show="tasks.length > 0">\n    <div class="GroupAction-button pull-left" ng-show="canDoGroupAction()">\n      <button class="btn btn-primary" type="button" title="Assign the task to myself and move it to My tasks."\n         ng-disabled="!canTake($selectedItems)" ng-click="takeTasks($selectedItems)">\n         <i class="glyphicon glyphicon-save"></i> Take\n      </button>\n      <button class="btn btn-default"  type="button" title="Unassign the task and put it back in Available tasks"\n        ng-disabled="!canRelease($selectedItems)" ng-click="releaseTasks($selectedItems)">\n        <i class="glyphicon glyphicon-open"></i> Release\n      </button>\n    </div>\n    <div class="PaginationInfo pull-right">\n      <!-- pagination -->\n      <span class="PaginationInfo-summary">\n        {{getPaginationStatus()}}\n      </span>\n      <pagination\n        class="PaginationInfo-pagination"\n        ng-show="request.pagination.total >= request.pagination.numberPerPage"\n        total-items="request.pagination.total"\n        ng-model="request.pagination.currentPage"\n        items-per-page="request.pagination.numberPerPage"\n        max-size="5"\n        boundary-links="false"\n        ng-change="refreshTasks()"\n        previous-text="&lsaquo;" next-text="&rsaquo;"\n        rotate="false">\n      </pagination>\n      <table-settings\n        columns="$columns"\n        page-size="request.pagination.numberPerPage" sizes="pageSizes"\n        update-page-size="pageSizeHandler(size)"\n        update-visibility="visibilityHandler(field, $columns)"\n        ></table-settings>\n      </table-settings>\n    </div>\n  </div>\n  <div class="table-responsive" ng-hide="tasks.length === 0">\n    <table class="table table-hover table-striped">\n      <thead>\n        <tr>\n          <th data-ignore class="Cell--checkbox" ng-if="canDoGroupAction()">\n            <div bo-selectall></div>\n          </th>\n          <th data-ignore class="Cell--assignee">\n            <i class="icon-user" title="Available or My tasks"></i>\n          </th><!-- assigned icon -->\n          <th class="text-right">Task Id</th>\n          <th bo-sorter="displayName" style="width:30%; min-width:150px">Task name</th>\n          <th style="width:30%; min-width:150px">Description</th>\n          <th bo-sorter="processInstanceId" class="text-right">Case Id</th>\n          <th style="width:30%; min-width:150px">Process name</th>\n          <th class="text-right">Last update</th>\n          <th class="text-right">Assigned on</th>\n          <th bo-sorter="dueDate" class="text-right">Due date</th>\n          <th bo-sorter="priority">Priority</th>\n          <th data-ignore class="RowActions" ng-if="mode!==\'mid\'"></th>\n        </tr>\n      </thead>\n      <tbody>\n        <tr class="Line"\n            ng-repeat="task in tasks"\n            ng-click="onClickTask(task)"\n            ng-mouseover="showTaskButtons(task)"\n            ng-mouseleave="hideTaskButtons(task)"\n            ng-class="{\'info\':task === currentTask}"\n            tabindex="0">\n\n          <td class="Cell--checkbox" ng-if="canDoGroupAction()">\n            <input type="checkbox" bo-selector="task" ng-click="onCheckBoxChange($event, $index)">\n          </td>\n\n          <td>\n            <i class="icon-user" title="My task" ng-if="user.user_id===task.assigned_id"></i>\n          </td>\n\n          <td class="text-right">{{::task.id}}</td>\n          <td class="Ellipsis" title="{{::task.displayName}}">{{::task.displayName}}</td>\n          <td style="Ellipsis" title="{{::task.displayDescription}}">{{::task.displayDescription}}</td>\n          <td class="text-right Cell--sortable">{{::task.caseId}}</td>\n          <td class="Ellipsis">{{::task.rootContainerId.name}}</td>\n          <td class="text-right" title="{{::task.last_update_date|moment:\'YYYY-MM-DD HH:mm\'}}">{{::task.last_update_date|moment:\'MMM DD YYYY\'}}</td>\n          <td class="text-right" title="{{::task.assigned_date|moment:\'YYYY-MM-DD HH:mm\'}}">{{::task.assigned_date|moment:\'MMM DD YYYY\'}}</td>\n          <td class="text-right  Cell--sortable" title="{{dueDate|moment:\'YYYY-MM-DD HH:mm\'}}">{{::task.dueDate|moment:\'MMM DD YYYY\'}}</td>\n          <td>{{::task.priority}}</td>\n          <td class="Cell--with-actions" ng-switch on="mode" ng-if="mode!==\'mid\'">\n            <button  class="btn btn-default" type="button"\n                    ng-switch-when="max"\n                    ng-click="onDoTask(task)"\n                    ng-if="request.taskFilter !== TASK_FILTERS.DONE"\n                    ng-show="task === currentTask || task.btnVisible"\n                    title="Do this task">\n              <i class="icon-do"></i>\n              <span class="sr-only">Do task</span>\n            </button>\n            <button class="btn btn-default" type="button"\n                    ng-click="onViewTask(task)"\n                    ng-switch-when="max"\n                    ng-show="task === currentTask || task.btnVisible"\n                    title="View this task">\n              <i class="icon-eye"></i>\n              <span class="sr-only">View task</span>\n            </button>\n            <a class="btn btn-xs btn-default" type="button"\n               ng-switch-when="min"\n               ng-click="goToDetail(\'details\')"\n               title="View this task">\n              View task\n            </a>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  </div>\n  <div class="GroupAction clearfix" ng-show="tasks.length > 0">\n    <div class="GroupAction-button pull-left" ng-show="canDoGroupAction()">\n      <button class="btn btn-primary" type="button" title="Assign the task to myself and move it to My tasks."\n         ng-disabled="!canTake($selectedItems)" ng-click="takeTasks($selectedItems)">\n         <i class="glyphicon glyphicon-save"></i> Take\n      </button>\n      <button class="btn btn-default" type="button" title="Unassign the task and put it back in Available tasks"\n        ng-disabled="!canRelease($selectedItems)" ng-click="releaseTasks($selectedItems)">\n        <i class="glyphicon glyphicon-open"></i> Release\n      </button>\n    </div>\n    <div class="PaginationInfo pull-right" >\n      <!-- pagination -->\n      <span class="PaginationInfo-summary">\n        {{getPaginationStatus()}}\n      </span>\n      <pagination\n        class="PaginationInfo-pagination"\n        ng-show="request.pagination.total >= request.pagination.numberPerPage"\n        total-items="request.pagination.total"\n        ng-model="request.pagination.currentPage"\n        items-per-page="request.pagination.numberPerPage"\n        max-size="5"\n        boundary-links="false"\n        ng-change="refreshTasks()"\n        previous-text="&lsaquo;" next-text="&rsaquo;"\n        rotate="false">\n      </pagination>\n    </div>\n  </div>\n</div>\n\n')}]);